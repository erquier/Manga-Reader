var Tk=Object.defineProperty;var qw=s=>{throw TypeError(s)};var Pk=(s,e,t)=>e in s?Tk(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ee=(s,e,t)=>Pk(s,typeof e!="symbol"?e+"":e,t),fm=(s,e,t)=>e.has(s)||qw("Cannot "+t);var c=(s,e,t)=>(fm(s,e,"read from private field"),t?t.call(s):e.get(s)),x=(s,e,t)=>e.has(s)?qw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),w=(s,e,t,n)=>(fm(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),S=(s,e,t)=>(fm(s,e,"access private method"),t);var Vt=(s,e,t,n)=>({set _(i){w(s,e,i,t)},get _(){return c(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Rk(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var i=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return s[n]}})}),t}var r1={exports:{}},kg={},o1={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=Symbol.for("react.element"),Nk=Symbol.for("react.portal"),Lk=Symbol.for("react.fragment"),Ik=Symbol.for("react.strict_mode"),Mk=Symbol.for("react.profiler"),Ok=Symbol.for("react.provider"),jk=Symbol.for("react.context"),Dk=Symbol.for("react.forward_ref"),Fk=Symbol.for("react.suspense"),$k=Symbol.for("react.memo"),zk=Symbol.for("react.lazy"),Xw=Symbol.iterator;function Uk(s){return s===null||typeof s!="object"?null:(s=Xw&&s[Xw]||s["@@iterator"],typeof s=="function"?s:null)}var a1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l1=Object.assign,c1={};function Xc(s,e,t){this.props=s,this.context=e,this.refs=c1,this.updater=t||a1}Xc.prototype.isReactComponent={};Xc.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};Xc.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function u1(){}u1.prototype=Xc.prototype;function Cv(s,e,t){this.props=s,this.context=e,this.refs=c1,this.updater=t||a1}var Tv=Cv.prototype=new u1;Tv.constructor=Cv;l1(Tv,Xc.prototype);Tv.isPureReactComponent=!0;var Kw=Array.isArray,h1=Object.prototype.hasOwnProperty,Pv={current:null},d1={key:!0,ref:!0,__self:!0,__source:!0};function f1(s,e,t){var n,i={},r=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)h1.call(e,n)&&!d1.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(s&&s.defaultProps)for(n in a=s.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Vd,type:s,key:r,ref:o,props:i,_owner:Pv.current}}function Bk(s,e){return{$$typeof:Vd,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function Rv(s){return typeof s=="object"&&s!==null&&s.$$typeof===Vd}function Hk(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var Yw=/\/+/g;function pm(s,e){return typeof s=="object"&&s!==null&&s.key!=null?Hk(""+s.key):e.toString(36)}function Lf(s,e,t,n,i){var r=typeof s;(r==="undefined"||r==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Vd:case Nk:o=!0}}if(o)return o=s,i=i(o),s=n===""?"."+pm(o,0):n,Kw(i)?(t="",s!=null&&(t=s.replace(Yw,"$&/")+"/"),Lf(i,e,t,"",function(u){return u})):i!=null&&(Rv(i)&&(i=Bk(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yw,"$&/")+"/")+s)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Kw(s))for(var a=0;a<s.length;a++){r=s[a];var l=n+pm(r,a);o+=Lf(r,e,t,l,i)}else if(l=Uk(s),typeof l=="function")for(s=l.call(s),a=0;!(r=s.next()).done;)r=r.value,l=n+pm(r,a++),o+=Lf(r,e,t,l,i);else if(r==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function of(s,e,t){if(s==null)return s;var n=[],i=0;return Lf(s,n,"","",function(r){return e.call(t,r,i++)}),n}function Vk(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(t){(s._status===0||s._status===-1)&&(s._status=1,s._result=t)},function(t){(s._status===0||s._status===-1)&&(s._status=2,s._result=t)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var ss={current:null},If={transition:null},Gk={ReactCurrentDispatcher:ss,ReactCurrentBatchConfig:If,ReactCurrentOwner:Pv};function p1(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:of,forEach:function(s,e,t){of(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return of(s,function(){e++}),e},toArray:function(s){return of(s,function(e){return e})||[]},only:function(s){if(!Rv(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};fe.Component=Xc;fe.Fragment=Lk;fe.Profiler=Mk;fe.PureComponent=Cv;fe.StrictMode=Ik;fe.Suspense=Fk;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;fe.act=p1;fe.cloneElement=function(s,e,t){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=l1({},s.props),i=s.key,r=s.ref,o=s._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Pv.current),e.key!==void 0&&(i=""+e.key),s.type&&s.type.defaultProps)var a=s.type.defaultProps;for(l in e)h1.call(e,l)&&!d1.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Vd,type:s.type,key:i,ref:r,props:n,_owner:o}};fe.createContext=function(s){return s={$$typeof:jk,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:Ok,_context:s},s.Consumer=s};fe.createElement=f1;fe.createFactory=function(s){var e=f1.bind(null,s);return e.type=s,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(s){return{$$typeof:Dk,render:s}};fe.isValidElement=Rv;fe.lazy=function(s){return{$$typeof:zk,_payload:{_status:-1,_result:s},_init:Vk}};fe.memo=function(s,e){return{$$typeof:$k,type:s,compare:e===void 0?null:e}};fe.startTransition=function(s){var e=If.transition;If.transition={};try{s()}finally{If.transition=e}};fe.unstable_act=p1;fe.useCallback=function(s,e){return ss.current.useCallback(s,e)};fe.useContext=function(s){return ss.current.useContext(s)};fe.useDebugValue=function(){};fe.useDeferredValue=function(s){return ss.current.useDeferredValue(s)};fe.useEffect=function(s,e){return ss.current.useEffect(s,e)};fe.useId=function(){return ss.current.useId()};fe.useImperativeHandle=function(s,e,t){return ss.current.useImperativeHandle(s,e,t)};fe.useInsertionEffect=function(s,e){return ss.current.useInsertionEffect(s,e)};fe.useLayoutEffect=function(s,e){return ss.current.useLayoutEffect(s,e)};fe.useMemo=function(s,e){return ss.current.useMemo(s,e)};fe.useReducer=function(s,e,t){return ss.current.useReducer(s,e,t)};fe.useRef=function(s){return ss.current.useRef(s)};fe.useState=function(s){return ss.current.useState(s)};fe.useSyncExternalStore=function(s,e,t){return ss.current.useSyncExternalStore(s,e,t)};fe.useTransition=function(){return ss.current.useTransition()};fe.version="18.3.1";o1.exports=fe;var L=o1.exports;const Wk=i1(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=L,Xk=Symbol.for("react.element"),Kk=Symbol.for("react.fragment"),Yk=Object.prototype.hasOwnProperty,Jk=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qk={key:!0,ref:!0,__self:!0,__source:!0};function g1(s,e,t){var n,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Yk.call(e,n)&&!Qk.hasOwnProperty(n)&&(i[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Xk,type:s,key:r,ref:o,props:i,_owner:Jk.current}}kg.Fragment=Kk;kg.jsx=g1;kg.jsxs=g1;r1.exports=kg;var m=r1.exports,m1={exports:{}},Us={},y1={exports:{}},v1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(O,X){var Y=O.length;O.push(X);e:for(;0<Y;){var ge=Y-1>>>1,ue=O[ge];if(0<i(ue,X))O[ge]=X,O[Y]=ue,Y=ge;else break e}}function t(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var X=O[0],Y=O.pop();if(Y!==X){O[0]=Y;e:for(var ge=0,ue=O.length,Ae=ue>>>1;ge<Ae;){var Pt=2*(ge+1)-1,z=O[Pt],ne=Pt+1,me=O[ne];if(0>i(z,Y))ne<ue&&0>i(me,z)?(O[ge]=me,O[ne]=Y,ge=ne):(O[ge]=z,O[Pt]=Y,ge=Pt);else if(ne<ue&&0>i(me,Y))O[ge]=me,O[ne]=Y,ge=ne;else break e}}return X}function i(O,X){var Y=O.sortIndex-X.sortIndex;return Y!==0?Y:O.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();s.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,p=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(O){for(var X=t(u);X!==null;){if(X.callback===null)n(u);else if(X.startTime<=O)n(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(u)}}function E(O){if(y=!1,A(O),!g)if(t(l)!==null)g=!0,D(k);else{var X=t(u);X!==null&&G(E,X.startTime-O)}}function k(O,X){g=!1,y&&(y=!1,v(P),P=-1),p=!0;var Y=f;try{for(A(X),d=t(l);d!==null&&(!(d.expirationTime>X)||O&&!V());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,f=d.priorityLevel;var ue=ge(d.expirationTime<=X);X=s.unstable_now(),typeof ue=="function"?d.callback=ue:d===t(l)&&n(l),A(X)}else n(l);d=t(l)}if(d!==null)var Ae=!0;else{var Pt=t(u);Pt!==null&&G(E,Pt.startTime-X),Ae=!1}return Ae}finally{d=null,f=Y,p=!1}}var C=!1,T=null,P=-1,M=5,j=-1;function V(){return!(s.unstable_now()-j<M)}function N(){if(T!==null){var O=s.unstable_now();j=O;var X=!0;try{X=T(!0,O)}finally{X?$():(C=!1,T=null)}}else C=!1}var $;if(typeof b=="function")$=function(){b(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,we=Z.port2;Z.port1.onmessage=N,$=function(){we.postMessage(null)}}else $=function(){_(N,0)};function D(O){T=O,C||(C=!0,$())}function G(O,X){P=_(function(){O(s.unstable_now())},X)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_continueExecution=function(){g||p||(g=!0,D(k))},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return f},s.unstable_getFirstCallbackNode=function(){return t(l)},s.unstable_next=function(O){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var Y=f;f=X;try{return O()}finally{f=Y}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(O,X){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=f;f=O;try{return X()}finally{f=Y}},s.unstable_scheduleCallback=function(O,X,Y){var ge=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ge+Y:ge):Y=ge,O){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,O={id:h++,callback:X,priorityLevel:O,startTime:Y,expirationTime:ue,sortIndex:-1},Y>ge?(O.sortIndex=Y,e(u,O),t(l)===null&&O===t(u)&&(y?(v(P),P=-1):y=!0,G(E,Y-ge))):(O.sortIndex=ue,e(l,O),g||p||(g=!0,D(k))),O},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(O){var X=f;return function(){var Y=f;f=X;try{return O.apply(this,arguments)}finally{f=Y}}}})(v1);y1.exports=v1;var Zk=y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC=L,zs=Zk;function I(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w1=new Set,Ju={};function Ga(s,e){Dc(s,e),Dc(s+"Capture",e)}function Dc(s,e){for(Ju[s]=e,s=0;s<e.length;s++)w1.add(e[s])}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n0=Object.prototype.hasOwnProperty,tC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jw={},Qw={};function sC(s){return n0.call(Qw,s)?!0:n0.call(Jw,s)?!1:tC.test(s)?Qw[s]=!0:(Jw[s]=!0,!1)}function nC(s,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function iC(s,e,t,n){if(e===null||typeof e>"u"||nC(s,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ns(s,e,t,n,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Tt[s]=new ns(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];Tt[e]=new ns(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Tt[s]=new ns(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Tt[s]=new ns(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Tt[s]=new ns(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Tt[s]=new ns(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Tt[s]=new ns(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Tt[s]=new ns(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Tt[s]=new ns(s,5,!1,s.toLowerCase(),null,!1,!1)});var Nv=/[\-:]([a-z])/g;function Lv(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(Nv,Lv);Tt[e]=new ns(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(Nv,Lv);Tt[e]=new ns(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(Nv,Lv);Tt[e]=new ns(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Tt[s]=new ns(s,1,!1,s.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Tt[s]=new ns(s,1,!1,s.toLowerCase(),null,!0,!0)});function Iv(s,e,t,n){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iC(e,t,i,n)&&(t=null),n||i===null?sC(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):i.mustUseProperty?s[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?s.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?s.setAttributeNS(n,e,t):s.setAttribute(e,t))))}var sr=eC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,af=Symbol.for("react.element"),cl=Symbol.for("react.portal"),ul=Symbol.for("react.fragment"),Mv=Symbol.for("react.strict_mode"),i0=Symbol.for("react.profiler"),b1=Symbol.for("react.provider"),_1=Symbol.for("react.context"),Ov=Symbol.for("react.forward_ref"),r0=Symbol.for("react.suspense"),o0=Symbol.for("react.suspense_list"),jv=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),x1=Symbol.for("react.offscreen"),Zw=Symbol.iterator;function su(s){return s===null||typeof s!="object"?null:(s=Zw&&s[Zw]||s["@@iterator"],typeof s=="function"?s:null)}var We=Object.assign,gm;function mu(s){if(gm===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);gm=e&&e[1]||""}return`
`+gm+s}var mm=!1;function ym(s,e){if(!s||mm)return"";mm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(s,[],e)}else{try{e.call()}catch(u){n=u}s.call(e.prototype)}else{try{throw Error()}catch(u){n=u}s()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=n.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var l=`
`+i[o].replace(" at new "," at ");return s.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",s.displayName)),l}while(1<=o&&0<=a);break}}}finally{mm=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?mu(s):""}function rC(s){switch(s.tag){case 5:return mu(s.type);case 16:return mu("Lazy");case 13:return mu("Suspense");case 19:return mu("SuspenseList");case 0:case 2:case 15:return s=ym(s.type,!1),s;case 11:return s=ym(s.type.render,!1),s;case 1:return s=ym(s.type,!0),s;default:return""}}function a0(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ul:return"Fragment";case cl:return"Portal";case i0:return"Profiler";case Mv:return"StrictMode";case r0:return"Suspense";case o0:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case _1:return(s.displayName||"Context")+".Consumer";case b1:return(s._context.displayName||"Context")+".Provider";case Ov:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case jv:return e=s.displayName||null,e!==null?e:a0(s.type)||"Memo";case ar:e=s._payload,s=s._init;try{return a0(s(e))}catch{}}return null}function oC(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a0(e);case 8:return e===Mv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function S1(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aC(s){var e=S1(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),n=""+s[e];if(!s.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function lf(s){s._valueTracker||(s._valueTracker=aC(s))}function A1(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return s&&(n=S1(s)?s.checked?"true":"false":s.value),s=n,s!==t?(e.setValue(s),!0):!1}function Ap(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function l0(s,e){var t=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??s._wrapperState.initialChecked})}function eb(s,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=so(e.value!=null?e.value:t),s._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E1(s,e){e=e.checked,e!=null&&Iv(s,"checked",e,!1)}function c0(s,e){E1(s,e);var t=so(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?u0(s,e.type,t):e.hasOwnProperty("defaultValue")&&u0(s,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function tb(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function u0(s,e,t){(e!=="number"||Ap(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}var yu=Array.isArray;function Sl(s,e,t,n){if(s=s.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<s.length;t++)i=e.hasOwnProperty("$"+s[t].value),s[t].selected!==i&&(s[t].selected=i),i&&n&&(s[t].defaultSelected=!0)}else{for(t=""+so(t),e=null,i=0;i<s.length;i++){if(s[i].value===t){s[i].selected=!0,n&&(s[i].defaultSelected=!0);return}e!==null||s[i].disabled||(e=s[i])}e!==null&&(e.selected=!0)}}function h0(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function sb(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(I(92));if(yu(t)){if(1<t.length)throw Error(I(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:so(t)}}function k1(s,e){var t=so(e.value),n=so(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),n!=null&&(s.defaultValue=""+n)}function nb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function C1(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function d0(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?C1(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var cf,T1=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return s(e,t,n,i)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(cf=cf||document.createElement("div"),cf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cf.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function Qu(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var Du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lC=["Webkit","ms","Moz","O"];Object.keys(Du).forEach(function(s){lC.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),Du[e]=Du[s]})});function P1(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Du.hasOwnProperty(s)&&Du[s]?(""+e).trim():e+"px"}function R1(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=P1(t,e[t],n);t==="float"&&(t="cssFloat"),n?s.setProperty(t,i):s[t]=i}}var cC=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f0(s,e){if(e){if(cC[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function p0(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g0=null;function Dv(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var m0=null,Al=null,El=null;function ib(s){if(s=qd(s)){if(typeof m0!="function")throw Error(I(280));var e=s.stateNode;e&&(e=Ng(e),m0(s.stateNode,s.type,e))}}function N1(s){Al?El?El.push(s):El=[s]:Al=s}function L1(){if(Al){var s=Al,e=El;if(El=Al=null,ib(s),e)for(s=0;s<e.length;s++)ib(e[s])}}function I1(s,e){return s(e)}function M1(){}var vm=!1;function O1(s,e,t){if(vm)return s(e,t);vm=!0;try{return I1(s,e,t)}finally{vm=!1,(Al!==null||El!==null)&&(M1(),L1())}}function Zu(s,e){var t=s.stateNode;if(t===null)return null;var n=Ng(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(I(231,e,typeof t));return t}var y0=!1;if(Ki)try{var nu={};Object.defineProperty(nu,"passive",{get:function(){y0=!0}}),window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{y0=!1}function uC(s,e,t,n,i,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Fu=!1,Ep=null,kp=!1,v0=null,hC={onError:function(s){Fu=!0,Ep=s}};function dC(s,e,t,n,i,r,o,a,l){Fu=!1,Ep=null,uC.apply(hC,arguments)}function fC(s,e,t,n,i,r,o,a,l){if(dC.apply(this,arguments),Fu){if(Fu){var u=Ep;Fu=!1,Ep=null}else throw Error(I(198));kp||(kp=!0,v0=u)}}function Wa(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function j1(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function rb(s){if(Wa(s)!==s)throw Error(I(188))}function pC(s){var e=s.alternate;if(!e){if(e=Wa(s),e===null)throw Error(I(188));return e!==s?null:s}for(var t=s,n=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return rb(i),s;if(r===n)return rb(i),e;r=r.sibling}throw Error(I(188))}if(t.return!==n.return)t=i,n=r;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,n=r;break}if(a===n){o=!0,n=i,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,n=i;break}if(a===n){o=!0,n=r,t=i;break}a=a.sibling}if(!o)throw Error(I(189))}}if(t.alternate!==n)throw Error(I(190))}if(t.tag!==3)throw Error(I(188));return t.stateNode.current===t?s:e}function D1(s){return s=pC(s),s!==null?F1(s):null}function F1(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=F1(s);if(e!==null)return e;s=s.sibling}return null}var $1=zs.unstable_scheduleCallback,ob=zs.unstable_cancelCallback,gC=zs.unstable_shouldYield,mC=zs.unstable_requestPaint,Je=zs.unstable_now,yC=zs.unstable_getCurrentPriorityLevel,Fv=zs.unstable_ImmediatePriority,z1=zs.unstable_UserBlockingPriority,Cp=zs.unstable_NormalPriority,vC=zs.unstable_LowPriority,U1=zs.unstable_IdlePriority,Cg=null,ri=null;function wC(s){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(Cg,s,void 0,(s.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:xC,bC=Math.log,_C=Math.LN2;function xC(s){return s>>>=0,s===0?32:31-(bC(s)/_C|0)|0}var uf=64,hf=4194304;function vu(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Tp(s,e){var t=s.pendingLanes;if(t===0)return 0;var n=0,i=s.suspendedLanes,r=s.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?n=vu(a):(r&=o,r!==0&&(n=vu(r)))}else o=t&~i,o!==0?n=vu(o):r!==0&&(n=vu(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(n&4&&(n|=t&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=n;0<e;)t=31-Tn(e),i=1<<t,n|=s[t],e&=~i;return n}function SC(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AC(s,e){for(var t=s.suspendedLanes,n=s.pingedLanes,i=s.expirationTimes,r=s.pendingLanes;0<r;){var o=31-Tn(r),a=1<<o,l=i[o];l===-1?(!(a&t)||a&n)&&(i[o]=SC(a,e)):l<=e&&(s.expiredLanes|=a),r&=~a}}function w0(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function B1(){var s=uf;return uf<<=1,!(uf&4194240)&&(uf=64),s}function wm(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function Gd(s,e,t){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-Tn(e),s[e]=t}function EC(s,e){var t=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<t;){var i=31-Tn(t),r=1<<i;e[i]=0,n[i]=-1,s[i]=-1,t&=~r}}function $v(s,e){var t=s.entangledLanes|=e;for(s=s.entanglements;t;){var n=31-Tn(t),i=1<<n;i&e|s[n]&e&&(s[n]|=e),t&=~i}}var Ce=0;function H1(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var V1,zv,G1,W1,q1,b0=!1,df=[],qr=null,Xr=null,Kr=null,eh=new Map,th=new Map,ur=[],kC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ab(s,e){switch(s){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":eh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(e.pointerId)}}function iu(s,e,t,n,i,r){return s===null||s.nativeEvent!==r?(s={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},e!==null&&(e=qd(e),e!==null&&zv(e)),s):(s.eventSystemFlags|=n,e=s.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),s)}function CC(s,e,t,n,i){switch(e){case"focusin":return qr=iu(qr,s,e,t,n,i),!0;case"dragenter":return Xr=iu(Xr,s,e,t,n,i),!0;case"mouseover":return Kr=iu(Kr,s,e,t,n,i),!0;case"pointerover":var r=i.pointerId;return eh.set(r,iu(eh.get(r)||null,s,e,t,n,i)),!0;case"gotpointercapture":return r=i.pointerId,th.set(r,iu(th.get(r)||null,s,e,t,n,i)),!0}return!1}function X1(s){var e=So(s.target);if(e!==null){var t=Wa(e);if(t!==null){if(e=t.tag,e===13){if(e=j1(t),e!==null){s.blockedOn=e,q1(s.priority,function(){G1(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Mf(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=_0(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t===null){t=s.nativeEvent;var n=new t.constructor(t.type,t);g0=n,t.target.dispatchEvent(n),g0=null}else return e=qd(t),e!==null&&zv(e),s.blockedOn=t,!1;e.shift()}return!0}function lb(s,e,t){Mf(s)&&t.delete(e)}function TC(){b0=!1,qr!==null&&Mf(qr)&&(qr=null),Xr!==null&&Mf(Xr)&&(Xr=null),Kr!==null&&Mf(Kr)&&(Kr=null),eh.forEach(lb),th.forEach(lb)}function ru(s,e){s.blockedOn===e&&(s.blockedOn=null,b0||(b0=!0,zs.unstable_scheduleCallback(zs.unstable_NormalPriority,TC)))}function sh(s){function e(i){return ru(i,s)}if(0<df.length){ru(df[0],s);for(var t=1;t<df.length;t++){var n=df[t];n.blockedOn===s&&(n.blockedOn=null)}}for(qr!==null&&ru(qr,s),Xr!==null&&ru(Xr,s),Kr!==null&&ru(Kr,s),eh.forEach(e),th.forEach(e),t=0;t<ur.length;t++)n=ur[t],n.blockedOn===s&&(n.blockedOn=null);for(;0<ur.length&&(t=ur[0],t.blockedOn===null);)X1(t),t.blockedOn===null&&ur.shift()}var kl=sr.ReactCurrentBatchConfig,Pp=!0;function PC(s,e,t,n){var i=Ce,r=kl.transition;kl.transition=null;try{Ce=1,Uv(s,e,t,n)}finally{Ce=i,kl.transition=r}}function RC(s,e,t,n){var i=Ce,r=kl.transition;kl.transition=null;try{Ce=4,Uv(s,e,t,n)}finally{Ce=i,kl.transition=r}}function Uv(s,e,t,n){if(Pp){var i=_0(s,e,t,n);if(i===null)Pm(s,e,n,Rp,t),ab(s,n);else if(CC(i,s,e,t,n))n.stopPropagation();else if(ab(s,n),e&4&&-1<kC.indexOf(s)){for(;i!==null;){var r=qd(i);if(r!==null&&V1(r),r=_0(s,e,t,n),r===null&&Pm(s,e,n,Rp,t),r===i)break;i=r}i!==null&&n.stopPropagation()}else Pm(s,e,n,null,t)}}var Rp=null;function _0(s,e,t,n){if(Rp=null,s=Dv(n),s=So(s),s!==null)if(e=Wa(s),e===null)s=null;else if(t=e.tag,t===13){if(s=j1(e),s!==null)return s;s=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return Rp=s,null}function K1(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yC()){case Fv:return 1;case z1:return 4;case Cp:case vC:return 16;case U1:return 536870912;default:return 16}default:return 16}}var Gr=null,Bv=null,Of=null;function Y1(){if(Of)return Of;var s,e=Bv,t=e.length,n,i="value"in Gr?Gr.value:Gr.textContent,r=i.length;for(s=0;s<t&&e[s]===i[s];s++);var o=t-s;for(n=1;n<=o&&e[t-n]===i[r-n];n++);return Of=i.slice(s,1<n?1-n:void 0)}function jf(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function ff(){return!0}function cb(){return!1}function Bs(s){function e(t,n,i,r,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in s)s.hasOwnProperty(a)&&(t=s[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ff:cb,this.isPropagationStopped=cb,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ff)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ff)},persist:function(){},isPersistent:ff}),e}var Kc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hv=Bs(Kc),Wd=We({},Kc,{view:0,detail:0}),NC=Bs(Wd),bm,_m,ou,Tg=We({},Wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vv,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ou&&(ou&&s.type==="mousemove"?(bm=s.screenX-ou.screenX,_m=s.screenY-ou.screenY):_m=bm=0,ou=s),bm)},movementY:function(s){return"movementY"in s?s.movementY:_m}}),ub=Bs(Tg),LC=We({},Tg,{dataTransfer:0}),IC=Bs(LC),MC=We({},Wd,{relatedTarget:0}),xm=Bs(MC),OC=We({},Kc,{animationName:0,elapsedTime:0,pseudoElement:0}),jC=Bs(OC),DC=We({},Kc,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),FC=Bs(DC),$C=We({},Kc,{data:0}),hb=Bs($C),zC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HC(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=BC[s])?!!e[s]:!1}function Vv(){return HC}var VC=We({},Wd,{key:function(s){if(s.key){var e=zC[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=jf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?UC[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vv,charCode:function(s){return s.type==="keypress"?jf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?jf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),GC=Bs(VC),WC=We({},Tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),db=Bs(WC),qC=We({},Wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vv}),XC=Bs(qC),KC=We({},Kc,{propertyName:0,elapsedTime:0,pseudoElement:0}),YC=Bs(KC),JC=We({},Tg,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),QC=Bs(JC),ZC=[9,13,27,32],Gv=Ki&&"CompositionEvent"in window,$u=null;Ki&&"documentMode"in document&&($u=document.documentMode);var eT=Ki&&"TextEvent"in window&&!$u,J1=Ki&&(!Gv||$u&&8<$u&&11>=$u),fb=" ",pb=!1;function Q1(s,e){switch(s){case"keyup":return ZC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var hl=!1;function tT(s,e){switch(s){case"compositionend":return Z1(e);case"keypress":return e.which!==32?null:(pb=!0,fb);case"textInput":return s=e.data,s===fb&&pb?null:s;default:return null}}function sT(s,e){if(hl)return s==="compositionend"||!Gv&&Q1(s,e)?(s=Y1(),Of=Bv=Gr=null,hl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J1&&e.locale!=="ko"?null:e.data;default:return null}}var nT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gb(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!nT[s.type]:e==="textarea"}function ex(s,e,t,n){N1(n),e=Np(e,"onChange"),0<e.length&&(t=new Hv("onChange","change",null,t,n),s.push({event:t,listeners:e}))}var zu=null,nh=null;function iT(s){hx(s,0)}function Pg(s){var e=pl(s);if(A1(e))return s}function rT(s,e){if(s==="change")return e}var tx=!1;if(Ki){var Sm;if(Ki){var Am="oninput"in document;if(!Am){var mb=document.createElement("div");mb.setAttribute("oninput","return;"),Am=typeof mb.oninput=="function"}Sm=Am}else Sm=!1;tx=Sm&&(!document.documentMode||9<document.documentMode)}function yb(){zu&&(zu.detachEvent("onpropertychange",sx),nh=zu=null)}function sx(s){if(s.propertyName==="value"&&Pg(nh)){var e=[];ex(e,nh,s,Dv(s)),O1(iT,e)}}function oT(s,e,t){s==="focusin"?(yb(),zu=e,nh=t,zu.attachEvent("onpropertychange",sx)):s==="focusout"&&yb()}function aT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Pg(nh)}function lT(s,e){if(s==="click")return Pg(e)}function cT(s,e){if(s==="input"||s==="change")return Pg(e)}function uT(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var Rn=typeof Object.is=="function"?Object.is:uT;function ih(s,e){if(Rn(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!n0.call(e,i)||!Rn(s[i],e[i]))return!1}return!0}function vb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function wb(s,e){var t=vb(s);s=0;for(var n;t;){if(t.nodeType===3){if(n=s+t.textContent.length,s<=e&&n>=e)return{node:t,offset:e-s};s=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=vb(t)}}function nx(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?nx(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function ix(){for(var s=window,e=Ap();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=Ap(s.document)}return e}function Wv(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function hT(s){var e=ix(),t=s.focusedElem,n=s.selectionRange;if(e!==t&&t&&t.ownerDocument&&nx(t.ownerDocument.documentElement,t)){if(n!==null&&Wv(t)){if(e=n.start,s=n.end,s===void 0&&(s=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(s,t.value.length);else if(s=(e=t.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var i=t.textContent.length,r=Math.min(n.start,i);n=n.end===void 0?r:Math.min(n.end,i),!s.extend&&r>n&&(i=n,n=r,r=i),i=wb(t,r);var o=wb(t,n);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),s.removeAllRanges(),r>n?(s.addRange(e),s.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),s.addRange(e)))}}for(e=[],s=t;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)s=e[t],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var dT=Ki&&"documentMode"in document&&11>=document.documentMode,dl=null,x0=null,Uu=null,S0=!1;function bb(s,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;S0||dl==null||dl!==Ap(n)||(n=dl,"selectionStart"in n&&Wv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Uu&&ih(Uu,n)||(Uu=n,n=Np(x0,"onSelect"),0<n.length&&(e=new Hv("onSelect","select",null,e,t),s.push({event:e,listeners:n}),e.target=dl)))}function pf(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var fl={animationend:pf("Animation","AnimationEnd"),animationiteration:pf("Animation","AnimationIteration"),animationstart:pf("Animation","AnimationStart"),transitionend:pf("Transition","TransitionEnd")},Em={},rx={};Ki&&(rx=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Rg(s){if(Em[s])return Em[s];if(!fl[s])return s;var e=fl[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in rx)return Em[s]=e[t];return s}var ox=Rg("animationend"),ax=Rg("animationiteration"),lx=Rg("animationstart"),cx=Rg("transitionend"),ux=new Map,_b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ao(s,e){ux.set(s,e),Ga(e,[s])}for(var km=0;km<_b.length;km++){var Cm=_b[km],fT=Cm.toLowerCase(),pT=Cm[0].toUpperCase()+Cm.slice(1);ao(fT,"on"+pT)}ao(ox,"onAnimationEnd");ao(ax,"onAnimationIteration");ao(lx,"onAnimationStart");ao("dblclick","onDoubleClick");ao("focusin","onFocus");ao("focusout","onBlur");ao(cx,"onTransitionEnd");Dc("onMouseEnter",["mouseout","mouseover"]);Dc("onMouseLeave",["mouseout","mouseover"]);Dc("onPointerEnter",["pointerout","pointerover"]);Dc("onPointerLeave",["pointerout","pointerover"]);Ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gT=new Set("cancel close invalid load scroll toggle".split(" ").concat(wu));function xb(s,e,t){var n=s.type||"unknown-event";s.currentTarget=t,fC(n,e,void 0,s),s.currentTarget=null}function hx(s,e){e=(e&4)!==0;for(var t=0;t<s.length;t++){var n=s[t],i=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;xb(i,a,u),r=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;xb(i,a,u),r=l}}}if(kp)throw s=v0,kp=!1,v0=null,s}function Me(s,e){var t=e[T0];t===void 0&&(t=e[T0]=new Set);var n=s+"__bubble";t.has(n)||(dx(e,s,2,!1),t.add(n))}function Tm(s,e,t){var n=0;e&&(n|=4),dx(t,s,n,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function rh(s){if(!s[gf]){s[gf]=!0,w1.forEach(function(t){t!=="selectionchange"&&(gT.has(t)||Tm(t,!1,s),Tm(t,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[gf]||(e[gf]=!0,Tm("selectionchange",!1,e))}}function dx(s,e,t,n){switch(K1(e)){case 1:var i=PC;break;case 4:i=RC;break;default:i=Uv}t=i.bind(null,e,t,s),i=void 0,!y0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?s.addEventListener(e,t,{capture:!0,passive:i}):s.addEventListener(e,t,!0):i!==void 0?s.addEventListener(e,t,{passive:i}):s.addEventListener(e,t,!1)}function Pm(s,e,t,n,i){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=So(a),o===null)return;if(l=o.tag,l===5||l===6){n=r=o;continue e}a=a.parentNode}}n=n.return}O1(function(){var u=r,h=Dv(t),d=[];e:{var f=ux.get(s);if(f!==void 0){var p=Hv,g=s;switch(s){case"keypress":if(jf(t)===0)break e;case"keydown":case"keyup":p=GC;break;case"focusin":g="focus",p=xm;break;case"focusout":g="blur",p=xm;break;case"beforeblur":case"afterblur":p=xm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ub;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=IC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=XC;break;case ox:case ax:case lx:p=jC;break;case cx:p=YC;break;case"scroll":p=NC;break;case"wheel":p=QC;break;case"copy":case"cut":case"paste":p=FC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=db}var y=(e&4)!==0,_=!y&&s==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var b=u,A;b!==null;){A=b;var E=A.stateNode;if(A.tag===5&&E!==null&&(A=E,v!==null&&(E=Zu(b,v),E!=null&&y.push(oh(b,E,A)))),_)break;b=b.return}0<y.length&&(f=new p(f,g,null,t,h),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=s==="mouseover"||s==="pointerover",p=s==="mouseout"||s==="pointerout",f&&t!==g0&&(g=t.relatedTarget||t.fromElement)&&(So(g)||g[Yi]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=u,g=g?So(g):null,g!==null&&(_=Wa(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=ub,E="onMouseLeave",v="onMouseEnter",b="mouse",(s==="pointerout"||s==="pointerover")&&(y=db,E="onPointerLeave",v="onPointerEnter",b="pointer"),_=p==null?f:pl(p),A=g==null?f:pl(g),f=new y(E,b+"leave",p,t,h),f.target=_,f.relatedTarget=A,E=null,So(h)===u&&(y=new y(v,b+"enter",g,t,h),y.target=A,y.relatedTarget=_,E=y),_=E,p&&g)t:{for(y=p,v=g,b=0,A=y;A;A=Ja(A))b++;for(A=0,E=v;E;E=Ja(E))A++;for(;0<b-A;)y=Ja(y),b--;for(;0<A-b;)v=Ja(v),A--;for(;b--;){if(y===v||v!==null&&y===v.alternate)break t;y=Ja(y),v=Ja(v)}y=null}else y=null;p!==null&&Sb(d,f,p,y,!1),g!==null&&_!==null&&Sb(d,_,g,y,!0)}}e:{if(f=u?pl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=rT;else if(gb(f))if(tx)k=cT;else{k=aT;var C=oT}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=lT);if(k&&(k=k(s,u))){ex(d,k,t,h);break e}C&&C(s,f,u),s==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&u0(f,"number",f.value)}switch(C=u?pl(u):window,s){case"focusin":(gb(C)||C.contentEditable==="true")&&(dl=C,x0=u,Uu=null);break;case"focusout":Uu=x0=dl=null;break;case"mousedown":S0=!0;break;case"contextmenu":case"mouseup":case"dragend":S0=!1,bb(d,t,h);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":bb(d,t,h)}var T;if(Gv)e:{switch(s){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else hl?Q1(s,t)&&(P="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(J1&&t.locale!=="ko"&&(hl||P!=="onCompositionStart"?P==="onCompositionEnd"&&hl&&(T=Y1()):(Gr=h,Bv="value"in Gr?Gr.value:Gr.textContent,hl=!0)),C=Np(u,P),0<C.length&&(P=new hb(P,s,null,t,h),d.push({event:P,listeners:C}),T?P.data=T:(T=Z1(t),T!==null&&(P.data=T)))),(T=eT?tT(s,t):sT(s,t))&&(u=Np(u,"onBeforeInput"),0<u.length&&(h=new hb("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=T))}hx(d,e)})}function oh(s,e,t){return{instance:s,listener:e,currentTarget:t}}function Np(s,e){for(var t=e+"Capture",n=[];s!==null;){var i=s,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Zu(s,t),r!=null&&n.unshift(oh(s,r,i)),r=Zu(s,e),r!=null&&n.push(oh(s,r,i))),s=s.return}return n}function Ja(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Sb(s,e,t,n,i){for(var r=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=Zu(t,r),l!=null&&o.unshift(oh(t,l,a))):i||(l=Zu(t,r),l!=null&&o.push(oh(t,l,a)))),t=t.return}o.length!==0&&s.push({event:e,listeners:o})}var mT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function Ab(s){return(typeof s=="string"?s:""+s).replace(mT,`
`).replace(yT,"")}function mf(s,e,t){if(e=Ab(e),Ab(s)!==e&&t)throw Error(I(425))}function Lp(){}var A0=null,E0=null;function k0(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var C0=typeof setTimeout=="function"?setTimeout:void 0,vT=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,wT=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(s){return Eb.resolve(null).then(s).catch(bT)}:C0;function bT(s){setTimeout(function(){throw s})}function Rm(s,e){var t=e,n=0;do{var i=t.nextSibling;if(s.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){s.removeChild(i),sh(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);sh(e)}function Yr(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function kb(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var Yc=Math.random().toString(36).slice(2),ii="__reactFiber$"+Yc,ah="__reactProps$"+Yc,Yi="__reactContainer$"+Yc,T0="__reactEvents$"+Yc,_T="__reactListeners$"+Yc,xT="__reactHandles$"+Yc;function So(s){var e=s[ii];if(e)return e;for(var t=s.parentNode;t;){if(e=t[Yi]||t[ii]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=kb(s);s!==null;){if(t=s[ii])return t;s=kb(s)}return e}s=t,t=s.parentNode}return null}function qd(s){return s=s[ii]||s[Yi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function pl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(I(33))}function Ng(s){return s[ah]||null}var P0=[],gl=-1;function lo(s){return{current:s}}function je(s){0>gl||(s.current=P0[gl],P0[gl]=null,gl--)}function Ie(s,e){gl++,P0[gl]=s.current,s.current=e}var no={},Ht=lo(no),gs=lo(!1),Oa=no;function Fc(s,e){var t=s.type.contextTypes;if(!t)return no;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=i),i}function ms(s){return s=s.childContextTypes,s!=null}function Ip(){je(gs),je(Ht)}function Cb(s,e,t){if(Ht.current!==no)throw Error(I(168));Ie(Ht,e),Ie(gs,t)}function fx(s,e,t){var n=s.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(I(108,oC(s)||"Unknown",i));return We({},t,n)}function Mp(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||no,Oa=Ht.current,Ie(Ht,s),Ie(gs,gs.current),!0}function Tb(s,e,t){var n=s.stateNode;if(!n)throw Error(I(169));t?(s=fx(s,e,Oa),n.__reactInternalMemoizedMergedChildContext=s,je(gs),je(Ht),Ie(Ht,s)):je(gs),Ie(gs,t)}var yi=null,Lg=!1,Nm=!1;function px(s){yi===null?yi=[s]:yi.push(s)}function ST(s){Lg=!0,px(s)}function co(){if(!Nm&&yi!==null){Nm=!0;var s=0,e=Ce;try{var t=yi;for(Ce=1;s<t.length;s++){var n=t[s];do n=n(!0);while(n!==null)}yi=null,Lg=!1}catch(i){throw yi!==null&&(yi=yi.slice(s+1)),$1(Fv,co),i}finally{Ce=e,Nm=!1}}return null}var ml=[],yl=0,Op=null,jp=0,Js=[],Qs=0,ja=null,Vi=1,Gi="";function po(s,e){ml[yl++]=jp,ml[yl++]=Op,Op=s,jp=e}function gx(s,e,t){Js[Qs++]=Vi,Js[Qs++]=Gi,Js[Qs++]=ja,ja=s;var n=Vi;s=Gi;var i=32-Tn(n)-1;n&=~(1<<i),t+=1;var r=32-Tn(e)+i;if(30<r){var o=i-i%5;r=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Vi=1<<32-Tn(e)+i|t<<i|n,Gi=r+s}else Vi=1<<r|t<<i|n,Gi=s}function qv(s){s.return!==null&&(po(s,1),gx(s,1,0))}function Xv(s){for(;s===Op;)Op=ml[--yl],ml[yl]=null,jp=ml[--yl],ml[yl]=null;for(;s===ja;)ja=Js[--Qs],Js[Qs]=null,Gi=Js[--Qs],Js[Qs]=null,Vi=Js[--Qs],Js[Qs]=null}var Ds=null,js=null,ze=!1,kn=null;function mx(s,e){var t=tn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=s,e=s.deletions,e===null?(s.deletions=[t],s.flags|=16):e.push(t)}function Pb(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,Ds=s,js=Yr(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,Ds=s,js=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ja!==null?{id:Vi,overflow:Gi}:null,s.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=tn(18,null,null,0),t.stateNode=e,t.return=s,s.child=t,Ds=s,js=null,!0):!1;default:return!1}}function R0(s){return(s.mode&1)!==0&&(s.flags&128)===0}function N0(s){if(ze){var e=js;if(e){var t=e;if(!Pb(s,e)){if(R0(s))throw Error(I(418));e=Yr(t.nextSibling);var n=Ds;e&&Pb(s,e)?mx(n,t):(s.flags=s.flags&-4097|2,ze=!1,Ds=s)}}else{if(R0(s))throw Error(I(418));s.flags=s.flags&-4097|2,ze=!1,Ds=s}}}function Rb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ds=s}function yf(s){if(s!==Ds)return!1;if(!ze)return Rb(s),ze=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!k0(s.type,s.memoizedProps)),e&&(e=js)){if(R0(s))throw yx(),Error(I(418));for(;e;)mx(s,e),e=Yr(e.nextSibling)}if(Rb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(I(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){js=Yr(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}js=null}}else js=Ds?Yr(s.stateNode.nextSibling):null;return!0}function yx(){for(var s=js;s;)s=Yr(s.nextSibling)}function $c(){js=Ds=null,ze=!1}function Kv(s){kn===null?kn=[s]:kn.push(s)}var AT=sr.ReactCurrentBatchConfig;function au(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(I(309));var n=t.stateNode}if(!n)throw Error(I(147,s));var i=n,r=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof s!="string")throw Error(I(284));if(!t._owner)throw Error(I(290,s))}return s}function vf(s,e){throw s=Object.prototype.toString.call(e),Error(I(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Nb(s){var e=s._init;return e(s._payload)}function vx(s){function e(v,b){if(s){var A=v.deletions;A===null?(v.deletions=[b],v.flags|=16):A.push(b)}}function t(v,b){if(!s)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=eo(v,b),v.index=0,v.sibling=null,v}function r(v,b,A){return v.index=A,s?(A=v.alternate,A!==null?(A=A.index,A<b?(v.flags|=2,b):A):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return s&&v.alternate===null&&(v.flags|=2),v}function a(v,b,A,E){return b===null||b.tag!==6?(b=Fm(A,v.mode,E),b.return=v,b):(b=i(b,A),b.return=v,b)}function l(v,b,A,E){var k=A.type;return k===ul?h(v,b,A.props.children,E,A.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ar&&Nb(k)===b.type)?(E=i(b,A.props),E.ref=au(v,b,A),E.return=v,E):(E=Hf(A.type,A.key,A.props,null,v.mode,E),E.ref=au(v,b,A),E.return=v,E)}function u(v,b,A,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=$m(A,v.mode,E),b.return=v,b):(b=i(b,A.children||[]),b.return=v,b)}function h(v,b,A,E,k){return b===null||b.tag!==7?(b=Ia(A,v.mode,E,k),b.return=v,b):(b=i(b,A),b.return=v,b)}function d(v,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Fm(""+b,v.mode,A),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case af:return A=Hf(b.type,b.key,b.props,null,v.mode,A),A.ref=au(v,null,b),A.return=v,A;case cl:return b=$m(b,v.mode,A),b.return=v,b;case ar:var E=b._init;return d(v,E(b._payload),A)}if(yu(b)||su(b))return b=Ia(b,v.mode,A,null),b.return=v,b;vf(v,b)}return null}function f(v,b,A,E){var k=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:a(v,b,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case af:return A.key===k?l(v,b,A,E):null;case cl:return A.key===k?u(v,b,A,E):null;case ar:return k=A._init,f(v,b,k(A._payload),E)}if(yu(A)||su(A))return k!==null?null:h(v,b,A,E,null);vf(v,A)}return null}function p(v,b,A,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(A)||null,a(b,v,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case af:return v=v.get(E.key===null?A:E.key)||null,l(b,v,E,k);case cl:return v=v.get(E.key===null?A:E.key)||null,u(b,v,E,k);case ar:var C=E._init;return p(v,b,A,C(E._payload),k)}if(yu(E)||su(E))return v=v.get(A)||null,h(b,v,E,k,null);vf(b,E)}return null}function g(v,b,A,E){for(var k=null,C=null,T=b,P=b=0,M=null;T!==null&&P<A.length;P++){T.index>P?(M=T,T=null):M=T.sibling;var j=f(v,T,A[P],E);if(j===null){T===null&&(T=M);break}s&&T&&j.alternate===null&&e(v,T),b=r(j,b,P),C===null?k=j:C.sibling=j,C=j,T=M}if(P===A.length)return t(v,T),ze&&po(v,P),k;if(T===null){for(;P<A.length;P++)T=d(v,A[P],E),T!==null&&(b=r(T,b,P),C===null?k=T:C.sibling=T,C=T);return ze&&po(v,P),k}for(T=n(v,T);P<A.length;P++)M=p(T,v,P,A[P],E),M!==null&&(s&&M.alternate!==null&&T.delete(M.key===null?P:M.key),b=r(M,b,P),C===null?k=M:C.sibling=M,C=M);return s&&T.forEach(function(V){return e(v,V)}),ze&&po(v,P),k}function y(v,b,A,E){var k=su(A);if(typeof k!="function")throw Error(I(150));if(A=k.call(A),A==null)throw Error(I(151));for(var C=k=null,T=b,P=b=0,M=null,j=A.next();T!==null&&!j.done;P++,j=A.next()){T.index>P?(M=T,T=null):M=T.sibling;var V=f(v,T,j.value,E);if(V===null){T===null&&(T=M);break}s&&T&&V.alternate===null&&e(v,T),b=r(V,b,P),C===null?k=V:C.sibling=V,C=V,T=M}if(j.done)return t(v,T),ze&&po(v,P),k;if(T===null){for(;!j.done;P++,j=A.next())j=d(v,j.value,E),j!==null&&(b=r(j,b,P),C===null?k=j:C.sibling=j,C=j);return ze&&po(v,P),k}for(T=n(v,T);!j.done;P++,j=A.next())j=p(T,v,P,j.value,E),j!==null&&(s&&j.alternate!==null&&T.delete(j.key===null?P:j.key),b=r(j,b,P),C===null?k=j:C.sibling=j,C=j);return s&&T.forEach(function(N){return e(v,N)}),ze&&po(v,P),k}function _(v,b,A,E){if(typeof A=="object"&&A!==null&&A.type===ul&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case af:e:{for(var k=A.key,C=b;C!==null;){if(C.key===k){if(k=A.type,k===ul){if(C.tag===7){t(v,C.sibling),b=i(C,A.props.children),b.return=v,v=b;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ar&&Nb(k)===C.type){t(v,C.sibling),b=i(C,A.props),b.ref=au(v,C,A),b.return=v,v=b;break e}t(v,C);break}else e(v,C);C=C.sibling}A.type===ul?(b=Ia(A.props.children,v.mode,E,A.key),b.return=v,v=b):(E=Hf(A.type,A.key,A.props,null,v.mode,E),E.ref=au(v,b,A),E.return=v,v=E)}return o(v);case cl:e:{for(C=A.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){t(v,b.sibling),b=i(b,A.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=$m(A,v.mode,E),b.return=v,v=b}return o(v);case ar:return C=A._init,_(v,b,C(A._payload),E)}if(yu(A))return g(v,b,A,E);if(su(A))return y(v,b,A,E);vf(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(t(v,b.sibling),b=i(b,A),b.return=v,v=b):(t(v,b),b=Fm(A,v.mode,E),b.return=v,v=b),o(v)):t(v,b)}return _}var zc=vx(!0),wx=vx(!1),Dp=lo(null),Fp=null,vl=null,Yv=null;function Jv(){Yv=vl=Fp=null}function Qv(s){var e=Dp.current;je(Dp),s._currentValue=e}function L0(s,e,t){for(;s!==null;){var n=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),s===t)break;s=s.return}}function Cl(s,e){Fp=s,Yv=vl=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(ps=!0),s.firstContext=null)}function on(s){var e=s._currentValue;if(Yv!==s)if(s={context:s,memoizedValue:e,next:null},vl===null){if(Fp===null)throw Error(I(308));vl=s,Fp.dependencies={lanes:0,firstContext:s}}else vl=vl.next=s;return e}var Ao=null;function Zv(s){Ao===null?Ao=[s]:Ao.push(s)}function bx(s,e,t,n){var i=e.interleaved;return i===null?(t.next=t,Zv(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ji(s,n)}function Ji(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}var lr=!1;function ew(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _x(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Wi(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Jr(s,e,t){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ji(s,t)}return i=n.interleaved,i===null?(e.next=e,Zv(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ji(s,t)}function Df(s,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,$v(s,t)}}function Lb(s,e){var t=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,effects:n.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function $p(s,e,t,n){var i=s.updateQueue;lr=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var h=s.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(r!==null){var d=i.baseState;o=0,h=u=l=null,a=r;do{var f=a.lane,p=a.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=s,y=a;switch(f=e,p=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=We({},d,f);break e;case 2:lr=!0}}a.callback!==null&&a.lane!==0&&(s.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Fa|=o,s.lanes=o,s.memoizedState=d}}function Ib(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var n=s[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(I(191,i));i.call(n)}}}var Xd={},oi=lo(Xd),lh=lo(Xd),ch=lo(Xd);function Eo(s){if(s===Xd)throw Error(I(174));return s}function tw(s,e){switch(Ie(ch,e),Ie(lh,s),Ie(oi,Xd),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:d0(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=d0(e,s)}je(oi),Ie(oi,e)}function Uc(){je(oi),je(lh),je(ch)}function xx(s){Eo(ch.current);var e=Eo(oi.current),t=d0(e,s.type);e!==t&&(Ie(lh,s),Ie(oi,t))}function sw(s){lh.current===s&&(je(oi),je(lh))}var He=lo(0);function zp(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lm=[];function nw(){for(var s=0;s<Lm.length;s++)Lm[s]._workInProgressVersionPrimary=null;Lm.length=0}var Ff=sr.ReactCurrentDispatcher,Im=sr.ReactCurrentBatchConfig,Da=0,Ge=null,lt=null,vt=null,Up=!1,Bu=!1,uh=0,ET=0;function Rt(){throw Error(I(321))}function iw(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!Rn(s[t],e[t]))return!1;return!0}function rw(s,e,t,n,i,r){if(Da=r,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ff.current=s===null||s.memoizedState===null?PT:RT,s=t(n,i),Bu){r=0;do{if(Bu=!1,uh=0,25<=r)throw Error(I(301));r+=1,vt=lt=null,e.updateQueue=null,Ff.current=NT,s=t(n,i)}while(Bu)}if(Ff.current=Bp,e=lt!==null&&lt.next!==null,Da=0,vt=lt=Ge=null,Up=!1,e)throw Error(I(300));return s}function ow(){var s=uh!==0;return uh=0,s}function zn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ge.memoizedState=vt=s:vt=vt.next=s,vt}function an(){if(lt===null){var s=Ge.alternate;s=s!==null?s.memoizedState:null}else s=lt.next;var e=vt===null?Ge.memoizedState:vt.next;if(e!==null)vt=e,lt=s;else{if(s===null)throw Error(I(310));lt=s,s={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},vt===null?Ge.memoizedState=vt=s:vt=vt.next=s}return vt}function hh(s,e){return typeof e=="function"?e(s):e}function Mm(s){var e=an(),t=e.queue;if(t===null)throw Error(I(311));t.lastRenderedReducer=s;var n=lt,i=n.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}n.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,n=n.baseState;var a=o=null,l=null,u=r;do{var h=u.lane;if((Da&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:s(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,Ge.lanes|=h,Fa|=h}u=u.next}while(u!==null&&u!==r);l===null?o=n:l.next=a,Rn(n,e.memoizedState)||(ps=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(s=t.interleaved,s!==null){i=s;do r=i.lane,Ge.lanes|=r,Fa|=r,i=i.next;while(i!==s)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Om(s){var e=an(),t=e.queue;if(t===null)throw Error(I(311));t.lastRenderedReducer=s;var n=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=s(r,o.action),o=o.next;while(o!==i);Rn(r,e.memoizedState)||(ps=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function Sx(){}function Ax(s,e){var t=Ge,n=an(),i=e(),r=!Rn(n.memoizedState,i);if(r&&(n.memoizedState=i,ps=!0),n=n.queue,aw(Cx.bind(null,t,n,s),[s]),n.getSnapshot!==e||r||vt!==null&&vt.memoizedState.tag&1){if(t.flags|=2048,dh(9,kx.bind(null,t,n,i,e),void 0,null),wt===null)throw Error(I(349));Da&30||Ex(t,e,i)}return i}function Ex(s,e,t){s.flags|=16384,s={getSnapshot:e,value:t},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[s]):(t=e.stores,t===null?e.stores=[s]:t.push(s))}function kx(s,e,t,n){e.value=t,e.getSnapshot=n,Tx(e)&&Px(s)}function Cx(s,e,t){return t(function(){Tx(e)&&Px(s)})}function Tx(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!Rn(s,t)}catch{return!0}}function Px(s){var e=Ji(s,1);e!==null&&Pn(e,s,1,-1)}function Mb(s){var e=zn();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:s},e.queue=s,s=s.dispatch=TT.bind(null,Ge,s),[e.memoizedState,s]}function dh(s,e,t,n){return s={tag:s,create:e,destroy:t,deps:n,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(n=t.next,t.next=s,s.next=n,e.lastEffect=s)),s}function Rx(){return an().memoizedState}function $f(s,e,t,n){var i=zn();Ge.flags|=s,i.memoizedState=dh(1|e,t,void 0,n===void 0?null:n)}function Ig(s,e,t,n){var i=an();n=n===void 0?null:n;var r=void 0;if(lt!==null){var o=lt.memoizedState;if(r=o.destroy,n!==null&&iw(n,o.deps)){i.memoizedState=dh(e,t,r,n);return}}Ge.flags|=s,i.memoizedState=dh(1|e,t,r,n)}function Ob(s,e){return $f(8390656,8,s,e)}function aw(s,e){return Ig(2048,8,s,e)}function Nx(s,e){return Ig(4,2,s,e)}function Lx(s,e){return Ig(4,4,s,e)}function Ix(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function Mx(s,e,t){return t=t!=null?t.concat([s]):null,Ig(4,4,Ix.bind(null,e,s),t)}function lw(){}function Ox(s,e){var t=an();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&iw(e,n[1])?n[0]:(t.memoizedState=[s,e],s)}function jx(s,e){var t=an();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&iw(e,n[1])?n[0]:(s=s(),t.memoizedState=[s,e],s)}function Dx(s,e,t){return Da&21?(Rn(t,e)||(t=B1(),Ge.lanes|=t,Fa|=t,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,ps=!0),s.memoizedState=t)}function kT(s,e){var t=Ce;Ce=t!==0&&4>t?t:4,s(!0);var n=Im.transition;Im.transition={};try{s(!1),e()}finally{Ce=t,Im.transition=n}}function Fx(){return an().memoizedState}function CT(s,e,t){var n=Zr(s);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},$x(s))zx(e,t);else if(t=bx(s,e,t,n),t!==null){var i=Qt();Pn(t,s,n,i),Ux(t,e,n)}}function TT(s,e,t){var n=Zr(s),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if($x(s))zx(e,i);else{var r=s.alternate;if(s.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(i.hasEagerState=!0,i.eagerState=a,Rn(a,o)){var l=e.interleaved;l===null?(i.next=i,Zv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=bx(s,e,i,n),t!==null&&(i=Qt(),Pn(t,s,n,i),Ux(t,e,n))}}function $x(s){var e=s.alternate;return s===Ge||e!==null&&e===Ge}function zx(s,e){Bu=Up=!0;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}function Ux(s,e,t){if(t&4194240){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,$v(s,t)}}var Bp={readContext:on,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},PT={readContext:on,useCallback:function(s,e){return zn().memoizedState=[s,e===void 0?null:e],s},useContext:on,useEffect:Ob,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,$f(4194308,4,Ix.bind(null,e,s),t)},useLayoutEffect:function(s,e){return $f(4194308,4,s,e)},useInsertionEffect:function(s,e){return $f(4,2,s,e)},useMemo:function(s,e){var t=zn();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var n=zn();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},n.queue=s,s=s.dispatch=CT.bind(null,Ge,s),[n.memoizedState,s]},useRef:function(s){var e=zn();return s={current:s},e.memoizedState=s},useState:Mb,useDebugValue:lw,useDeferredValue:function(s){return zn().memoizedState=s},useTransition:function(){var s=Mb(!1),e=s[0];return s=kT.bind(null,s[1]),zn().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,t){var n=Ge,i=zn();if(ze){if(t===void 0)throw Error(I(407));t=t()}else{if(t=e(),wt===null)throw Error(I(349));Da&30||Ex(n,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,Ob(Cx.bind(null,n,r,s),[s]),n.flags|=2048,dh(9,kx.bind(null,n,r,t,e),void 0,null),t},useId:function(){var s=zn(),e=wt.identifierPrefix;if(ze){var t=Gi,n=Vi;t=(n&~(1<<32-Tn(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=uh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ET++,e=":"+e+"r"+t.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},RT={readContext:on,useCallback:Ox,useContext:on,useEffect:aw,useImperativeHandle:Mx,useInsertionEffect:Nx,useLayoutEffect:Lx,useMemo:jx,useReducer:Mm,useRef:Rx,useState:function(){return Mm(hh)},useDebugValue:lw,useDeferredValue:function(s){var e=an();return Dx(e,lt.memoizedState,s)},useTransition:function(){var s=Mm(hh)[0],e=an().memoizedState;return[s,e]},useMutableSource:Sx,useSyncExternalStore:Ax,useId:Fx,unstable_isNewReconciler:!1},NT={readContext:on,useCallback:Ox,useContext:on,useEffect:aw,useImperativeHandle:Mx,useInsertionEffect:Nx,useLayoutEffect:Lx,useMemo:jx,useReducer:Om,useRef:Rx,useState:function(){return Om(hh)},useDebugValue:lw,useDeferredValue:function(s){var e=an();return lt===null?e.memoizedState=s:Dx(e,lt.memoizedState,s)},useTransition:function(){var s=Om(hh)[0],e=an().memoizedState;return[s,e]},useMutableSource:Sx,useSyncExternalStore:Ax,useId:Fx,unstable_isNewReconciler:!1};function un(s,e){if(s&&s.defaultProps){e=We({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}function I0(s,e,t,n){e=s.memoizedState,t=t(n,e),t=t==null?e:We({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var Mg={isMounted:function(s){return(s=s._reactInternals)?Wa(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var n=Qt(),i=Zr(s),r=Wi(n,i);r.payload=e,t!=null&&(r.callback=t),e=Jr(s,r,i),e!==null&&(Pn(e,s,i,n),Df(e,s,i))},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var n=Qt(),i=Zr(s),r=Wi(n,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Jr(s,r,i),e!==null&&(Pn(e,s,i,n),Df(e,s,i))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=Qt(),n=Zr(s),i=Wi(t,n);i.tag=2,e!=null&&(i.callback=e),e=Jr(s,i,n),e!==null&&(Pn(e,s,n,t),Df(e,s,n))}};function jb(s,e,t,n,i,r,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,r,o):e.prototype&&e.prototype.isPureReactComponent?!ih(t,n)||!ih(i,r):!0}function Bx(s,e,t){var n=!1,i=no,r=e.contextType;return typeof r=="object"&&r!==null?r=on(r):(i=ms(e)?Oa:Ht.current,n=e.contextTypes,r=(n=n!=null)?Fc(s,i):no),e=new e(t,r),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mg,s.stateNode=e,e._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=r),e}function Db(s,e,t,n){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==s&&Mg.enqueueReplaceState(e,e.state,null)}function M0(s,e,t,n){var i=s.stateNode;i.props=t,i.state=s.memoizedState,i.refs={},ew(s);var r=e.contextType;typeof r=="object"&&r!==null?i.context=on(r):(r=ms(e)?Oa:Ht.current,i.context=Fc(s,r)),i.state=s.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(I0(s,e,r,t),i.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Mg.enqueueReplaceState(i,i.state,null),$p(s,t,i,n),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function Bc(s,e){try{var t="",n=e;do t+=rC(n),n=n.return;while(n);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:s,source:e,stack:i,digest:null}}function jm(s,e,t){return{value:s,source:null,stack:t??null,digest:e??null}}function O0(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var LT=typeof WeakMap=="function"?WeakMap:Map;function Hx(s,e,t){t=Wi(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Vp||(Vp=!0,G0=n),O0(s,e)},t}function Vx(s,e,t){t=Wi(-1,t),t.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){O0(s,e)}}var r=s.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){O0(s,e),typeof n!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Fb(s,e,t){var n=s.pingCache;if(n===null){n=s.pingCache=new LT;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),s=WT.bind(null,s,e,t),e.then(s,s))}function $b(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function zb(s,e,t,n,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===e?s.flags|=65536:(s.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Wi(-1,1),e.tag=2,Jr(t,e,1))),t.lanes|=1),s)}var IT=sr.ReactCurrentOwner,ps=!1;function Yt(s,e,t,n){e.child=s===null?wx(e,null,t,n):zc(e,s.child,t,n)}function Ub(s,e,t,n,i){t=t.render;var r=e.ref;return Cl(e,i),n=rw(s,e,t,n,r,i),t=ow(),s!==null&&!ps?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~i,Qi(s,e,i)):(ze&&t&&qv(e),e.flags|=1,Yt(s,e,n,i),e.child)}function Bb(s,e,t,n,i){if(s===null){var r=t.type;return typeof r=="function"&&!mw(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,Gx(s,e,r,n,i)):(s=Hf(t.type,null,n,e,e.mode,i),s.ref=e.ref,s.return=e,e.child=s)}if(r=s.child,!(s.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:ih,t(o,n)&&s.ref===e.ref)return Qi(s,e,i)}return e.flags|=1,s=eo(r,n),s.ref=e.ref,s.return=e,e.child=s}function Gx(s,e,t,n,i){if(s!==null){var r=s.memoizedProps;if(ih(r,n)&&s.ref===e.ref)if(ps=!1,e.pendingProps=n=r,(s.lanes&i)!==0)s.flags&131072&&(ps=!0);else return e.lanes=s.lanes,Qi(s,e,i)}return j0(s,e,t,n,i)}function Wx(s,e,t){var n=e.pendingProps,i=n.children,r=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(bl,Is),Is|=t;else{if(!(t&1073741824))return s=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,Ie(bl,Is),Is|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:t,Ie(bl,Is),Is|=n}else r!==null?(n=r.baseLanes|t,e.memoizedState=null):n=t,Ie(bl,Is),Is|=n;return Yt(s,e,i,t),e.child}function qx(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function j0(s,e,t,n,i){var r=ms(t)?Oa:Ht.current;return r=Fc(e,r),Cl(e,i),t=rw(s,e,t,n,r,i),n=ow(),s!==null&&!ps?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~i,Qi(s,e,i)):(ze&&n&&qv(e),e.flags|=1,Yt(s,e,t,i),e.child)}function Hb(s,e,t,n,i){if(ms(t)){var r=!0;Mp(e)}else r=!1;if(Cl(e,i),e.stateNode===null)zf(s,e),Bx(e,t,n),M0(e,t,n,i),n=!0;else if(s===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=on(u):(u=ms(t)?Oa:Ht.current,u=Fc(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Db(e,o,n,u),lr=!1;var f=e.memoizedState;o.state=f,$p(e,n,o,i),l=e.memoizedState,a!==n||f!==l||gs.current||lr?(typeof h=="function"&&(I0(e,t,h,n),l=e.memoizedState),(a=lr||jb(e,t,a,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,_x(s,e),a=e.memoizedProps,u=e.type===e.elementType?a:un(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=on(l):(l=ms(t)?Oa:Ht.current,l=Fc(e,l));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Db(e,o,n,l),lr=!1,f=e.memoizedState,o.state=f,$p(e,n,o,i);var g=e.memoizedState;a!==d||f!==g||gs.current||lr?(typeof p=="function"&&(I0(e,t,p,n),g=e.memoizedState),(u=lr||jb(e,t,u,n,f,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=1024),n=!1)}return D0(s,e,t,n,r,i)}function D0(s,e,t,n,i,r){qx(s,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Tb(e,t,!1),Qi(s,e,r);n=e.stateNode,IT.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,s!==null&&o?(e.child=zc(e,s.child,null,r),e.child=zc(e,null,a,r)):Yt(s,e,a,r),e.memoizedState=n.state,i&&Tb(e,t,!0),e.child}function Xx(s){var e=s.stateNode;e.pendingContext?Cb(s,e.pendingContext,e.pendingContext!==e.context):e.context&&Cb(s,e.context,!1),tw(s,e.containerInfo)}function Vb(s,e,t,n,i){return $c(),Kv(i),e.flags|=256,Yt(s,e,t,n),e.child}var F0={dehydrated:null,treeContext:null,retryLane:0};function $0(s){return{baseLanes:s,cachePool:null,transitions:null}}function Kx(s,e,t){var n=e.pendingProps,i=He.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=s!==null&&s.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Ie(He,i&1),s===null)return N0(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,s=n.fallback,r?(n=e.mode,r=e.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Dg(o,n,0,null),s=Ia(s,n,t,null),r.return=e,s.return=e,r.sibling=s,e.child=r,e.child.memoizedState=$0(t),e.memoizedState=F0,s):cw(e,o));if(i=s.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return MT(s,e,o,n,a,i,t);if(r){r=n.fallback,o=e.mode,i=s.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=eo(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=eo(a,r):(r=Ia(r,o,t,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,o=s.child.memoizedState,o=o===null?$0(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=s.childLanes&~t,e.memoizedState=F0,n}return r=s.child,s=r.sibling,n=eo(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,s!==null&&(t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)),e.child=n,e.memoizedState=null,n}function cw(s,e){return e=Dg({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function wf(s,e,t,n){return n!==null&&Kv(n),zc(e,s.child,null,t),s=cw(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function MT(s,e,t,n,i,r,o){if(t)return e.flags&256?(e.flags&=-257,n=jm(Error(I(422))),wf(s,e,o,n)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(r=n.fallback,i=e.mode,n=Dg({mode:"visible",children:n.children},i,0,null),r=Ia(r,i,o,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&zc(e,s.child,null,o),e.child.memoizedState=$0(o),e.memoizedState=F0,r);if(!(e.mode&1))return wf(s,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,r=Error(I(419)),n=jm(r,n,void 0),wf(s,e,o,n)}if(a=(o&s.childLanes)!==0,ps||a){if(n=wt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Ji(s,i),Pn(n,s,i,-1))}return gw(),n=jm(Error(I(421))),wf(s,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=s.child,e=qT.bind(null,s),i._reactRetry=e,null):(s=r.treeContext,js=Yr(i.nextSibling),Ds=e,ze=!0,kn=null,s!==null&&(Js[Qs++]=Vi,Js[Qs++]=Gi,Js[Qs++]=ja,Vi=s.id,Gi=s.overflow,ja=e),e=cw(e,n.children),e.flags|=4096,e)}function Gb(s,e,t){s.lanes|=e;var n=s.alternate;n!==null&&(n.lanes|=e),L0(s.return,e,t)}function Dm(s,e,t,n,i){var r=s.memoizedState;r===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=i)}function Yx(s,e,t){var n=e.pendingProps,i=n.revealOrder,r=n.tail;if(Yt(s,e,n.children,t),n=He.current,n&2)n=n&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Gb(s,t,e);else if(s.tag===19)Gb(s,t,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(Ie(He,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)s=t.alternate,s!==null&&zp(s)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Dm(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(s=i.alternate,s!==null&&zp(s)===null){e.child=i;break}s=i.sibling,i.sibling=t,t=i,i=s}Dm(e,!0,t,null,r);break;case"together":Dm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zf(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Qi(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),Fa|=e.lanes,!(t&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(I(153));if(e.child!==null){for(s=e.child,t=eo(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=eo(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}function OT(s,e,t){switch(e.tag){case 3:Xx(e),$c();break;case 5:xx(e);break;case 1:ms(e.type)&&Mp(e);break;case 4:tw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ie(Dp,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ie(He,He.current&1),e.flags|=128,null):t&e.child.childLanes?Kx(s,e,t):(Ie(He,He.current&1),s=Qi(s,e,t),s!==null?s.sibling:null);Ie(He,He.current&1);break;case 19:if(n=(t&e.childLanes)!==0,s.flags&128){if(n)return Yx(s,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(He,He.current),n)break;return null;case 22:case 23:return e.lanes=0,Wx(s,e,t)}return Qi(s,e,t)}var Jx,z0,Qx,Zx;Jx=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};z0=function(){};Qx=function(s,e,t,n){var i=s.memoizedProps;if(i!==n){s=e.stateNode,Eo(oi.current);var r=null;switch(t){case"input":i=l0(s,i),n=l0(s,n),r=[];break;case"select":i=We({},i,{value:void 0}),n=We({},n,{value:void 0}),r=[];break;case"textarea":i=h0(s,i),n=h0(s,n),r=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=Lp)}f0(t,n);var o;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ju.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ju.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Me("scroll",s),r||a===l||(r=[])):(r=r||[]).push(u,l))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Zx=function(s,e,t,n){t!==n&&(e.flags|=4)};function lu(s,e){if(!ze)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function Nt(s){var e=s.alternate!==null&&s.alternate.child===s.child,t=0,n=0;if(e)for(var i=s.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=n,s.childLanes=t,e}function jT(s,e,t){var n=e.pendingProps;switch(Xv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return ms(e.type)&&Ip(),Nt(e),null;case 3:return n=e.stateNode,Uc(),je(gs),je(Ht),nw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(yf(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(X0(kn),kn=null))),z0(s,e),Nt(e),null;case 5:sw(e);var i=Eo(ch.current);if(t=e.type,s!==null&&e.stateNode!=null)Qx(s,e,t,n,i),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(I(166));return Nt(e),null}if(s=Eo(oi.current),yf(e)){n=e.stateNode,t=e.type;var r=e.memoizedProps;switch(n[ii]=e,n[ah]=r,s=(e.mode&1)!==0,t){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(i=0;i<wu.length;i++)Me(wu[i],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":eb(n,r),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},Me("invalid",n);break;case"textarea":sb(n,r),Me("invalid",n)}f0(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?n.textContent!==a&&(r.suppressHydrationWarning!==!0&&mf(n.textContent,a,s),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&mf(n.textContent,a,s),i=["children",""+a]):Ju.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",n)}switch(t){case"input":lf(n),tb(n,r,!0);break;case"textarea":lf(n),nb(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=Lp)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=C1(t)),s==="http://www.w3.org/1999/xhtml"?t==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=o.createElement(t,{is:n.is}):(s=o.createElement(t),t==="select"&&(o=s,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):s=o.createElementNS(s,t),s[ii]=e,s[ah]=n,Jx(s,e,!1,!1),e.stateNode=s;e:{switch(o=p0(t,n),t){case"dialog":Me("cancel",s),Me("close",s),i=n;break;case"iframe":case"object":case"embed":Me("load",s),i=n;break;case"video":case"audio":for(i=0;i<wu.length;i++)Me(wu[i],s);i=n;break;case"source":Me("error",s),i=n;break;case"img":case"image":case"link":Me("error",s),Me("load",s),i=n;break;case"details":Me("toggle",s),i=n;break;case"input":eb(s,n),i=l0(s,n),Me("invalid",s);break;case"option":i=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},i=We({},n,{value:void 0}),Me("invalid",s);break;case"textarea":sb(s,n),i=h0(s,n),Me("invalid",s);break;default:i=n}f0(t,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?R1(s,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T1(s,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Qu(s,l):typeof l=="number"&&Qu(s,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ju.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Me("scroll",s):l!=null&&Iv(s,r,l,o))}switch(t){case"input":lf(s),tb(s,n,!1);break;case"textarea":lf(s),nb(s);break;case"option":n.value!=null&&s.setAttribute("value",""+so(n.value));break;case"select":s.multiple=!!n.multiple,r=n.value,r!=null?Sl(s,!!n.multiple,r,!1):n.defaultValue!=null&&Sl(s,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=Lp)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(s&&e.stateNode!=null)Zx(s,e,s.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(I(166));if(t=Eo(ch.current),Eo(oi.current),yf(e)){if(n=e.stateNode,t=e.memoizedProps,n[ii]=e,(r=n.nodeValue!==t)&&(s=Ds,s!==null))switch(s.tag){case 3:mf(n.nodeValue,t,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&mf(n.nodeValue,t,(s.mode&1)!==0)}r&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[ii]=e,e.stateNode=n}return Nt(e),null;case 13:if(je(He),n=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ze&&js!==null&&e.mode&1&&!(e.flags&128))yx(),$c(),e.flags|=98560,r=!1;else if(r=yf(e),n!==null&&n.dehydrated!==null){if(s===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[ii]=e}else $c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),r=!1}else kn!==null&&(X0(kn),kn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(s===null||He.current&1?ct===0&&(ct=3):gw())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Uc(),z0(s,e),s===null&&rh(e.stateNode.containerInfo),Nt(e),null;case 10:return Qv(e.type._context),Nt(e),null;case 17:return ms(e.type)&&Ip(),Nt(e),null;case 19:if(je(He),r=e.memoizedState,r===null)return Nt(e),null;if(n=(e.flags&128)!==0,o=r.rendering,o===null)if(n)lu(r,!1);else{if(ct!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(o=zp(s),o!==null){for(e.flags|=128,lu(r,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)r=t,s=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return Ie(He,He.current&1|2),e.child}s=s.sibling}r.tail!==null&&Je()>Hc&&(e.flags|=128,n=!0,lu(r,!1),e.lanes=4194304)}else{if(!n)if(s=zp(o),s!==null){if(e.flags|=128,n=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),lu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ze)return Nt(e),null}else 2*Je()-r.renderingStartTime>Hc&&t!==1073741824&&(e.flags|=128,n=!0,lu(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Je(),e.sibling=null,t=He.current,Ie(He,n?t&1|2:t&1),e):(Nt(e),null);case 22:case 23:return pw(),n=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Is&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function DT(s,e){switch(Xv(e),e.tag){case 1:return ms(e.type)&&Ip(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return Uc(),je(gs),je(Ht),nw(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return sw(e),null;case 13:if(je(He),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(I(340));$c()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return je(He),null;case 4:return Uc(),null;case 10:return Qv(e.type._context),null;case 22:case 23:return pw(),null;case 24:return null;default:return null}}var bf=!1,zt=!1,FT=typeof WeakSet=="function"?WeakSet:Set,H=null;function wl(s,e){var t=s.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Xe(s,e,n)}else t.current=null}function U0(s,e,t){try{t()}catch(n){Xe(s,e,n)}}var Wb=!1;function $T(s,e){if(A0=Pp,s=ix(),Wv(s)){if("selectionStart"in s)var t={start:s.selectionStart,end:s.selectionEnd};else e:{t=(t=s.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=s,f=null;t:for(;;){for(var p;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==r||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===s)break t;if(f===t&&++u===i&&(a=o),f===r&&++h===n&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(E0={focusedElem:s,selectionRange:t},Pp=!1,H=e;H!==null;)if(e=H,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,H=s;else for(;H!==null;){e=H;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,_=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:un(e.type,y),_);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(E){Xe(e,e.return,E)}if(s=e.sibling,s!==null){s.return=e.return,H=s;break}H=e.return}return g=Wb,Wb=!1,g}function Hu(s,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&s)===s){var r=i.destroy;i.destroy=void 0,r!==void 0&&U0(e,t,r)}i=i.next}while(i!==n)}}function Og(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&s)===s){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function B0(s){var e=s.ref;if(e!==null){var t=s.stateNode;switch(s.tag){case 5:s=t;break;default:s=t}typeof e=="function"?e(s):e.current=s}}function eS(s){var e=s.alternate;e!==null&&(s.alternate=null,eS(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[ii],delete e[ah],delete e[T0],delete e[_T],delete e[xT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function tS(s){return s.tag===5||s.tag===3||s.tag===4}function qb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||tS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function H0(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Lp));else if(n!==4&&(s=s.child,s!==null))for(H0(s,e,t),s=s.sibling;s!==null;)H0(s,e,t),s=s.sibling}function V0(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.insertBefore(s,e):t.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(V0(s,e,t),s=s.sibling;s!==null;)V0(s,e,t),s=s.sibling}var Et=null,An=!1;function nr(s,e,t){for(t=t.child;t!==null;)sS(s,e,t),t=t.sibling}function sS(s,e,t){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(Cg,t)}catch{}switch(t.tag){case 5:zt||wl(t,e);case 6:var n=Et,i=An;Et=null,nr(s,e,t),Et=n,An=i,Et!==null&&(An?(s=Et,t=t.stateNode,s.nodeType===8?s.parentNode.removeChild(t):s.removeChild(t)):Et.removeChild(t.stateNode));break;case 18:Et!==null&&(An?(s=Et,t=t.stateNode,s.nodeType===8?Rm(s.parentNode,t):s.nodeType===1&&Rm(s,t),sh(s)):Rm(Et,t.stateNode));break;case 4:n=Et,i=An,Et=t.stateNode.containerInfo,An=!0,nr(s,e,t),Et=n,An=i;break;case 0:case 11:case 14:case 15:if(!zt&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&U0(t,e,o),i=i.next}while(i!==n)}nr(s,e,t);break;case 1:if(!zt&&(wl(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Xe(t,e,a)}nr(s,e,t);break;case 21:nr(s,e,t);break;case 22:t.mode&1?(zt=(n=zt)||t.memoizedState!==null,nr(s,e,t),zt=n):nr(s,e,t);break;default:nr(s,e,t)}}function Xb(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new FT),e.forEach(function(n){var i=XT.bind(null,s,n);t.has(n)||(t.add(n),n.then(i,i))})}}function ln(s,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var r=s,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Et=a.stateNode,An=!1;break e;case 3:Et=a.stateNode.containerInfo,An=!0;break e;case 4:Et=a.stateNode.containerInfo,An=!0;break e}a=a.return}if(Et===null)throw Error(I(160));sS(r,o,i),Et=null,An=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Xe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nS(e,s),e=e.sibling}function nS(s,e){var t=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ln(e,s),Mn(s),n&4){try{Hu(3,s,s.return),Og(3,s)}catch(y){Xe(s,s.return,y)}try{Hu(5,s,s.return)}catch(y){Xe(s,s.return,y)}}break;case 1:ln(e,s),Mn(s),n&512&&t!==null&&wl(t,t.return);break;case 5:if(ln(e,s),Mn(s),n&512&&t!==null&&wl(t,t.return),s.flags&32){var i=s.stateNode;try{Qu(i,"")}catch(y){Xe(s,s.return,y)}}if(n&4&&(i=s.stateNode,i!=null)){var r=s.memoizedProps,o=t!==null?t.memoizedProps:r,a=s.type,l=s.updateQueue;if(s.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&E1(i,r),p0(a,o);var u=p0(a,r);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?R1(i,d):h==="dangerouslySetInnerHTML"?T1(i,d):h==="children"?Qu(i,d):Iv(i,h,d,u)}switch(a){case"input":c0(i,r);break;case"textarea":k1(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Sl(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Sl(i,!!r.multiple,r.defaultValue,!0):Sl(i,!!r.multiple,r.multiple?[]:"",!1))}i[ah]=r}catch(y){Xe(s,s.return,y)}}break;case 6:if(ln(e,s),Mn(s),n&4){if(s.stateNode===null)throw Error(I(162));i=s.stateNode,r=s.memoizedProps;try{i.nodeValue=r}catch(y){Xe(s,s.return,y)}}break;case 3:if(ln(e,s),Mn(s),n&4&&t!==null&&t.memoizedState.isDehydrated)try{sh(e.containerInfo)}catch(y){Xe(s,s.return,y)}break;case 4:ln(e,s),Mn(s);break;case 13:ln(e,s),Mn(s),i=s.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(dw=Je())),n&4&&Xb(s);break;case 22:if(h=t!==null&&t.memoizedState!==null,s.mode&1?(zt=(u=zt)||h,ln(e,s),zt=u):ln(e,s),Mn(s),n&8192){if(u=s.memoizedState!==null,(s.stateNode.isHidden=u)&&!h&&s.mode&1)for(H=s,h=s.child;h!==null;){for(d=H=h;H!==null;){switch(f=H,p=f.child,f.tag){case 0:case 11:case 14:case 15:Hu(4,f,f.return);break;case 1:wl(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Xe(n,t,y)}}break;case 5:wl(f,f.return);break;case 22:if(f.memoizedState!==null){Yb(d);continue}}p!==null?(p.return=f,H=p):Yb(d)}h=h.sibling}e:for(h=null,d=s;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=P1("display",o))}catch(y){Xe(s,s.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Xe(s,s.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===s)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ln(e,s),Mn(s),n&4&&Xb(s);break;case 21:break;default:ln(e,s),Mn(s)}}function Mn(s){var e=s.flags;if(e&2){try{e:{for(var t=s.return;t!==null;){if(tS(t)){var n=t;break e}t=t.return}throw Error(I(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Qu(i,""),n.flags&=-33);var r=qb(s);V0(s,r,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=qb(s);H0(s,a,o);break;default:throw Error(I(161))}}catch(l){Xe(s,s.return,l)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function zT(s,e,t){H=s,iS(s)}function iS(s,e,t){for(var n=(s.mode&1)!==0;H!==null;){var i=H,r=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||bf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zt;a=bf;var u=zt;if(bf=o,(zt=l)&&!u)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?Jb(i):l!==null?(l.return=o,H=l):Jb(i);for(;r!==null;)H=r,iS(r),r=r.sibling;H=i,bf=a,zt=u}Kb(s)}else i.subtreeFlags&8772&&r!==null?(r.return=i,H=r):Kb(s)}}function Kb(s){for(;H!==null;){var e=H;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||Og(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zt)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:un(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Ib(e,r,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Ib(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&sh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}zt||e.flags&512&&B0(e)}catch(f){Xe(e,e.return,f)}}if(e===s){H=null;break}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}}function Yb(s){for(;H!==null;){var e=H;if(e===s){H=null;break}var t=e.sibling;if(t!==null){t.return=e.return,H=t;break}H=e.return}}function Jb(s){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Og(4,e)}catch(l){Xe(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Xe(e,i,l)}}var r=e.return;try{B0(e)}catch(l){Xe(e,r,l)}break;case 5:var o=e.return;try{B0(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===s){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var UT=Math.ceil,Hp=sr.ReactCurrentDispatcher,uw=sr.ReactCurrentOwner,sn=sr.ReactCurrentBatchConfig,be=0,wt=null,et=null,Ct=0,Is=0,bl=lo(0),ct=0,fh=null,Fa=0,jg=0,hw=0,Vu=null,ds=null,dw=0,Hc=1/0,fi=null,Vp=!1,G0=null,Qr=null,_f=!1,Wr=null,Gp=0,Gu=0,W0=null,Uf=-1,Bf=0;function Qt(){return be&6?Je():Uf!==-1?Uf:Uf=Je()}function Zr(s){return s.mode&1?be&2&&Ct!==0?Ct&-Ct:AT.transition!==null?(Bf===0&&(Bf=B1()),Bf):(s=Ce,s!==0||(s=window.event,s=s===void 0?16:K1(s.type)),s):1}function Pn(s,e,t,n){if(50<Gu)throw Gu=0,W0=null,Error(I(185));Gd(s,t,n),(!(be&2)||s!==wt)&&(s===wt&&(!(be&2)&&(jg|=t),ct===4&&hr(s,Ct)),ys(s,n),t===1&&be===0&&!(e.mode&1)&&(Hc=Je()+500,Lg&&co()))}function ys(s,e){var t=s.callbackNode;AC(s,e);var n=Tp(s,s===wt?Ct:0);if(n===0)t!==null&&ob(t),s.callbackNode=null,s.callbackPriority=0;else if(e=n&-n,s.callbackPriority!==e){if(t!=null&&ob(t),e===1)s.tag===0?ST(Qb.bind(null,s)):px(Qb.bind(null,s)),wT(function(){!(be&6)&&co()}),t=null;else{switch(H1(n)){case 1:t=Fv;break;case 4:t=z1;break;case 16:t=Cp;break;case 536870912:t=U1;break;default:t=Cp}t=dS(t,rS.bind(null,s))}s.callbackPriority=e,s.callbackNode=t}}function rS(s,e){if(Uf=-1,Bf=0,be&6)throw Error(I(327));var t=s.callbackNode;if(Tl()&&s.callbackNode!==t)return null;var n=Tp(s,s===wt?Ct:0);if(n===0)return null;if(n&30||n&s.expiredLanes||e)e=Wp(s,n);else{e=n;var i=be;be|=2;var r=aS();(wt!==s||Ct!==e)&&(fi=null,Hc=Je()+500,La(s,e));do try{VT();break}catch(a){oS(s,a)}while(!0);Jv(),Hp.current=r,be=i,et!==null?e=0:(wt=null,Ct=0,e=ct)}if(e!==0){if(e===2&&(i=w0(s),i!==0&&(n=i,e=q0(s,i))),e===1)throw t=fh,La(s,0),hr(s,n),ys(s,Je()),t;if(e===6)hr(s,n);else{if(i=s.current.alternate,!(n&30)&&!BT(i)&&(e=Wp(s,n),e===2&&(r=w0(s),r!==0&&(n=r,e=q0(s,r))),e===1))throw t=fh,La(s,0),hr(s,n),ys(s,Je()),t;switch(s.finishedWork=i,s.finishedLanes=n,e){case 0:case 1:throw Error(I(345));case 2:go(s,ds,fi);break;case 3:if(hr(s,n),(n&130023424)===n&&(e=dw+500-Je(),10<e)){if(Tp(s,0)!==0)break;if(i=s.suspendedLanes,(i&n)!==n){Qt(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=C0(go.bind(null,s,ds,fi),e);break}go(s,ds,fi);break;case 4:if(hr(s,n),(n&4194240)===n)break;for(e=s.eventTimes,i=-1;0<n;){var o=31-Tn(n);r=1<<o,o=e[o],o>i&&(i=o),n&=~r}if(n=i,n=Je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UT(n/1960))-n,10<n){s.timeoutHandle=C0(go.bind(null,s,ds,fi),n);break}go(s,ds,fi);break;case 5:go(s,ds,fi);break;default:throw Error(I(329))}}}return ys(s,Je()),s.callbackNode===t?rS.bind(null,s):null}function q0(s,e){var t=Vu;return s.current.memoizedState.isDehydrated&&(La(s,e).flags|=256),s=Wp(s,e),s!==2&&(e=ds,ds=t,e!==null&&X0(e)),s}function X0(s){ds===null?ds=s:ds.push.apply(ds,s)}function BT(s){for(var e=s;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],r=i.getSnapshot;i=i.value;try{if(!Rn(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(s,e){for(e&=~hw,e&=~jg,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-Tn(e),n=1<<t;s[t]=-1,e&=~n}}function Qb(s){if(be&6)throw Error(I(327));Tl();var e=Tp(s,0);if(!(e&1))return ys(s,Je()),null;var t=Wp(s,e);if(s.tag!==0&&t===2){var n=w0(s);n!==0&&(e=n,t=q0(s,n))}if(t===1)throw t=fh,La(s,0),hr(s,e),ys(s,Je()),t;if(t===6)throw Error(I(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,go(s,ds,fi),ys(s,Je()),null}function fw(s,e){var t=be;be|=1;try{return s(e)}finally{be=t,be===0&&(Hc=Je()+500,Lg&&co())}}function $a(s){Wr!==null&&Wr.tag===0&&!(be&6)&&Tl();var e=be;be|=1;var t=sn.transition,n=Ce;try{if(sn.transition=null,Ce=1,s)return s()}finally{Ce=n,sn.transition=t,be=e,!(be&6)&&co()}}function pw(){Is=bl.current,je(bl)}function La(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,vT(t)),et!==null)for(t=et.return;t!==null;){var n=t;switch(Xv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ip();break;case 3:Uc(),je(gs),je(Ht),nw();break;case 5:sw(n);break;case 4:Uc();break;case 13:je(He);break;case 19:je(He);break;case 10:Qv(n.type._context);break;case 22:case 23:pw()}t=t.return}if(wt=s,et=s=eo(s.current,null),Ct=Is=e,ct=0,fh=null,hw=jg=Fa=0,ds=Vu=null,Ao!==null){for(e=0;e<Ao.length;e++)if(t=Ao[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,n.next=o}t.pending=n}Ao=null}return s}function oS(s,e){do{var t=et;try{if(Jv(),Ff.current=Bp,Up){for(var n=Ge.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Up=!1}if(Da=0,vt=lt=Ge=null,Bu=!1,uh=0,uw.current=null,t===null||t.return===null){ct=1,fh=e,et=null;break}e:{var r=s,o=t.return,a=t,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=$b(o);if(p!==null){p.flags&=-257,zb(p,o,a,r,e),p.mode&1&&Fb(r,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){Fb(r,u,e),gw();break e}l=Error(I(426))}}else if(ze&&a.mode&1){var _=$b(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),zb(_,o,a,r,e),Kv(Bc(l,a));break e}}r=l=Bc(l,a),ct!==4&&(ct=2),Vu===null?Vu=[r]:Vu.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=Hx(r,l,e);Lb(r,v);break e;case 1:a=l;var b=r.type,A=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Qr===null||!Qr.has(A)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=Vx(r,a,e);Lb(r,E);break e}}r=r.return}while(r!==null)}cS(t)}catch(k){e=k,et===t&&t!==null&&(et=t=t.return);continue}break}while(!0)}function aS(){var s=Hp.current;return Hp.current=Bp,s===null?Bp:s}function gw(){(ct===0||ct===3||ct===2)&&(ct=4),wt===null||!(Fa&268435455)&&!(jg&268435455)||hr(wt,Ct)}function Wp(s,e){var t=be;be|=2;var n=aS();(wt!==s||Ct!==e)&&(fi=null,La(s,e));do try{HT();break}catch(i){oS(s,i)}while(!0);if(Jv(),be=t,Hp.current=n,et!==null)throw Error(I(261));return wt=null,Ct=0,ct}function HT(){for(;et!==null;)lS(et)}function VT(){for(;et!==null&&!gC();)lS(et)}function lS(s){var e=hS(s.alternate,s,Is);s.memoizedProps=s.pendingProps,e===null?cS(s):et=e,uw.current=null}function cS(s){var e=s;do{var t=e.alternate;if(s=e.return,e.flags&32768){if(t=DT(t,e),t!==null){t.flags&=32767,et=t;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ct=6,et=null;return}}else if(t=jT(t,e,Is),t!==null){et=t;return}if(e=e.sibling,e!==null){et=e;return}et=e=s}while(e!==null);ct===0&&(ct=5)}function go(s,e,t){var n=Ce,i=sn.transition;try{sn.transition=null,Ce=1,GT(s,e,t,n)}finally{sn.transition=i,Ce=n}return null}function GT(s,e,t,n){do Tl();while(Wr!==null);if(be&6)throw Error(I(327));t=s.finishedWork;var i=s.finishedLanes;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(I(177));s.callbackNode=null,s.callbackPriority=0;var r=t.lanes|t.childLanes;if(EC(s,r),s===wt&&(et=wt=null,Ct=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||_f||(_f=!0,dS(Cp,function(){return Tl(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=sn.transition,sn.transition=null;var o=Ce;Ce=1;var a=be;be|=4,uw.current=null,$T(s,t),nS(t,s),hT(E0),Pp=!!A0,E0=A0=null,s.current=t,zT(t),mC(),be=a,Ce=o,sn.transition=r}else s.current=t;if(_f&&(_f=!1,Wr=s,Gp=i),r=s.pendingLanes,r===0&&(Qr=null),wC(t.stateNode),ys(s,Je()),e!==null)for(n=s.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vp)throw Vp=!1,s=G0,G0=null,s;return Gp&1&&s.tag!==0&&Tl(),r=s.pendingLanes,r&1?s===W0?Gu++:(Gu=0,W0=s):Gu=0,co(),null}function Tl(){if(Wr!==null){var s=H1(Gp),e=sn.transition,t=Ce;try{if(sn.transition=null,Ce=16>s?16:s,Wr===null)var n=!1;else{if(s=Wr,Wr=null,Gp=0,be&6)throw Error(I(331));var i=be;for(be|=4,H=s.current;H!==null;){var r=H,o=r.child;if(H.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Hu(8,h,r)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var f=h.sibling,p=h.return;if(eS(h),h===u){H=null;break}if(f!==null){f.return=p,H=f;break}H=p}}}var g=r.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}H=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,H=o;else e:for(;H!==null;){if(r=H,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Hu(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,H=v;break e}H=r.return}}var b=s.current;for(H=b;H!==null;){o=H;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,H=A;else e:for(o=b;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Og(9,a)}}catch(k){Xe(a,a.return,k)}if(a===o){H=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,H=E;break e}H=a.return}}if(be=i,co(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(Cg,s)}catch{}n=!0}return n}finally{Ce=t,sn.transition=e}}return!1}function Zb(s,e,t){e=Bc(t,e),e=Hx(s,e,1),s=Jr(s,e,1),e=Qt(),s!==null&&(Gd(s,1,e),ys(s,e))}function Xe(s,e,t){if(s.tag===3)Zb(s,s,t);else for(;e!==null;){if(e.tag===3){Zb(e,s,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qr===null||!Qr.has(n))){s=Bc(t,s),s=Vx(e,s,1),e=Jr(e,s,1),s=Qt(),e!==null&&(Gd(e,1,s),ys(e,s));break}}e=e.return}}function WT(s,e,t){var n=s.pingCache;n!==null&&n.delete(e),e=Qt(),s.pingedLanes|=s.suspendedLanes&t,wt===s&&(Ct&t)===t&&(ct===4||ct===3&&(Ct&130023424)===Ct&&500>Je()-dw?La(s,0):hw|=t),ys(s,e)}function uS(s,e){e===0&&(s.mode&1?(e=hf,hf<<=1,!(hf&130023424)&&(hf=4194304)):e=1);var t=Qt();s=Ji(s,e),s!==null&&(Gd(s,e,t),ys(s,t))}function qT(s){var e=s.memoizedState,t=0;e!==null&&(t=e.retryLane),uS(s,t)}function XT(s,e){var t=0;switch(s.tag){case 13:var n=s.stateNode,i=s.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(e),uS(s,t)}var hS;hS=function(s,e,t){if(s!==null)if(s.memoizedProps!==e.pendingProps||gs.current)ps=!0;else{if(!(s.lanes&t)&&!(e.flags&128))return ps=!1,OT(s,e,t);ps=!!(s.flags&131072)}else ps=!1,ze&&e.flags&1048576&&gx(e,jp,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;zf(s,e),s=e.pendingProps;var i=Fc(e,Ht.current);Cl(e,t),i=rw(null,e,n,s,i,t);var r=ow();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ms(n)?(r=!0,Mp(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ew(e),i.updater=Mg,e.stateNode=i,i._reactInternals=e,M0(e,n,s,t),e=D0(null,e,n,!0,r,t)):(e.tag=0,ze&&r&&qv(e),Yt(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(zf(s,e),s=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=YT(n),s=un(n,s),i){case 0:e=j0(null,e,n,s,t);break e;case 1:e=Hb(null,e,n,s,t);break e;case 11:e=Ub(null,e,n,s,t);break e;case 14:e=Bb(null,e,n,un(n.type,s),t);break e}throw Error(I(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),j0(s,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),Hb(s,e,n,i,t);case 3:e:{if(Xx(e),s===null)throw Error(I(387));n=e.pendingProps,r=e.memoizedState,i=r.element,_x(s,e),$p(e,n,null,t);var o=e.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Bc(Error(I(423)),e),e=Vb(s,e,n,t,i);break e}else if(n!==i){i=Bc(Error(I(424)),e),e=Vb(s,e,n,t,i);break e}else for(js=Yr(e.stateNode.containerInfo.firstChild),Ds=e,ze=!0,kn=null,t=wx(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if($c(),n===i){e=Qi(s,e,t);break e}Yt(s,e,n,t)}e=e.child}return e;case 5:return xx(e),s===null&&N0(e),n=e.type,i=e.pendingProps,r=s!==null?s.memoizedProps:null,o=i.children,k0(n,i)?o=null:r!==null&&k0(n,r)&&(e.flags|=32),qx(s,e),Yt(s,e,o,t),e.child;case 6:return s===null&&N0(e),null;case 13:return Kx(s,e,t);case 4:return tw(e,e.stateNode.containerInfo),n=e.pendingProps,s===null?e.child=zc(e,null,n,t):Yt(s,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),Ub(s,e,n,i,t);case 7:return Yt(s,e,e.pendingProps,t),e.child;case 8:return Yt(s,e,e.pendingProps.children,t),e.child;case 12:return Yt(s,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,Ie(Dp,n._currentValue),n._currentValue=o,r!==null)if(Rn(r.value,o)){if(r.children===i.children&&!gs.current){e=Qi(s,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(r.tag===1){l=Wi(-1,t&-t),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),L0(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),L0(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Yt(s,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Cl(e,t),i=on(i),n=n(i),e.flags|=1,Yt(s,e,n,t),e.child;case 14:return n=e.type,i=un(n,e.pendingProps),i=un(n.type,i),Bb(s,e,n,i,t);case 15:return Gx(s,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),zf(s,e),e.tag=1,ms(n)?(s=!0,Mp(e)):s=!1,Cl(e,t),Bx(e,n,i),M0(e,n,i,t),D0(null,e,n,!0,s,t);case 19:return Yx(s,e,t);case 22:return Wx(s,e,t)}throw Error(I(156,e.tag))};function dS(s,e){return $1(s,e)}function KT(s,e,t,n){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(s,e,t,n){return new KT(s,e,t,n)}function mw(s){return s=s.prototype,!(!s||!s.isReactComponent)}function YT(s){if(typeof s=="function")return mw(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Ov)return 11;if(s===jv)return 14}return 2}function eo(s,e){var t=s.alternate;return t===null?(t=tn(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=s.flags&14680064,t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function Hf(s,e,t,n,i,r){var o=2;if(n=s,typeof s=="function")mw(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case ul:return Ia(t.children,i,r,e);case Mv:o=8,i|=8;break;case i0:return s=tn(12,t,e,i|2),s.elementType=i0,s.lanes=r,s;case r0:return s=tn(13,t,e,i),s.elementType=r0,s.lanes=r,s;case o0:return s=tn(19,t,e,i),s.elementType=o0,s.lanes=r,s;case x1:return Dg(t,i,r,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case b1:o=10;break e;case _1:o=9;break e;case Ov:o=11;break e;case jv:o=14;break e;case ar:o=16,n=null;break e}throw Error(I(130,s==null?s:typeof s,""))}return e=tn(o,t,e,i),e.elementType=s,e.type=n,e.lanes=r,e}function Ia(s,e,t,n){return s=tn(7,s,n,e),s.lanes=t,s}function Dg(s,e,t,n){return s=tn(22,s,n,e),s.elementType=x1,s.lanes=t,s.stateNode={isHidden:!1},s}function Fm(s,e,t){return s=tn(6,s,null,e),s.lanes=t,s}function $m(s,e,t){return e=tn(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function JT(s,e,t,n,i){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wm(0),this.expirationTimes=wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yw(s,e,t,n,i,r,o,a,l){return s=new JT(s,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=tn(3,null,null,e),s.current=r,r.stateNode=s,r.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ew(r),s}function QT(s,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cl,key:n==null?null:""+n,children:s,containerInfo:e,implementation:t}}function fS(s){if(!s)return no;s=s._reactInternals;e:{if(Wa(s)!==s||s.tag!==1)throw Error(I(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ms(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(s.tag===1){var t=s.type;if(ms(t))return fx(s,t,e)}return e}function pS(s,e,t,n,i,r,o,a,l){return s=yw(t,n,!0,s,i,r,o,a,l),s.context=fS(null),t=s.current,n=Qt(),i=Zr(t),r=Wi(n,i),r.callback=e??null,Jr(t,r,i),s.current.lanes=i,Gd(s,i,n),ys(s,n),s}function Fg(s,e,t,n){var i=e.current,r=Qt(),o=Zr(i);return t=fS(t),e.context===null?e.context=t:e.pendingContext=t,e=Wi(r,o),e.payload={element:s},n=n===void 0?null:n,n!==null&&(e.callback=n),s=Jr(i,e,o),s!==null&&(Pn(s,i,o,r),Df(s,i,o)),o}function qp(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function e_(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function vw(s,e){e_(s,e),(s=s.alternate)&&e_(s,e)}function ZT(){return null}var gS=typeof reportError=="function"?reportError:function(s){console.error(s)};function ww(s){this._internalRoot=s}$g.prototype.render=ww.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(I(409));Fg(s,e,null,null)};$g.prototype.unmount=ww.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;$a(function(){Fg(null,s,null,null)}),e[Yi]=null}};function $g(s){this._internalRoot=s}$g.prototype.unstable_scheduleHydration=function(s){if(s){var e=W1();s={blockedOn:null,target:s,priority:e};for(var t=0;t<ur.length&&e!==0&&e<ur[t].priority;t++);ur.splice(t,0,s),t===0&&X1(s)}};function bw(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function zg(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function t_(){}function e2(s,e,t,n,i){if(i){if(typeof n=="function"){var r=n;n=function(){var u=qp(o);r.call(u)}}var o=pS(e,n,s,0,null,!1,!1,"",t_);return s._reactRootContainer=o,s[Yi]=o.current,rh(s.nodeType===8?s.parentNode:s),$a(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=qp(l);a.call(u)}}var l=yw(s,0,!1,null,null,!1,!1,"",t_);return s._reactRootContainer=l,s[Yi]=l.current,rh(s.nodeType===8?s.parentNode:s),$a(function(){Fg(e,l,t,n)}),l}function Ug(s,e,t,n,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var l=qp(o);a.call(l)}}Fg(e,o,s,i)}else o=e2(t,e,s,i,n);return qp(o)}V1=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var t=vu(e.pendingLanes);t!==0&&($v(e,t|1),ys(e,Je()),!(be&6)&&(Hc=Je()+500,co()))}break;case 13:$a(function(){var n=Ji(s,1);if(n!==null){var i=Qt();Pn(n,s,1,i)}}),vw(s,1)}};zv=function(s){if(s.tag===13){var e=Ji(s,134217728);if(e!==null){var t=Qt();Pn(e,s,134217728,t)}vw(s,134217728)}};G1=function(s){if(s.tag===13){var e=Zr(s),t=Ji(s,e);if(t!==null){var n=Qt();Pn(t,s,e,n)}vw(s,e)}};W1=function(){return Ce};q1=function(s,e){var t=Ce;try{return Ce=s,e()}finally{Ce=t}};m0=function(s,e,t){switch(e){case"input":if(c0(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==s&&n.form===s.form){var i=Ng(n);if(!i)throw Error(I(90));A1(n),c0(n,i)}}}break;case"textarea":k1(s,t);break;case"select":e=t.value,e!=null&&Sl(s,!!t.multiple,e,!1)}};I1=fw;M1=$a;var t2={usingClientEntryPoint:!1,Events:[qd,pl,Ng,N1,L1,fw]},cu={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s2={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=D1(s),s===null?null:s.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||ZT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{Cg=xf.inject(s2),ri=xf}catch{}}Us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t2;Us.createPortal=function(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bw(e))throw Error(I(200));return QT(s,e,null,t)};Us.createRoot=function(s,e){if(!bw(s))throw Error(I(299));var t=!1,n="",i=gS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yw(s,1,!1,null,null,t,!1,n,i),s[Yi]=e.current,rh(s.nodeType===8?s.parentNode:s),new ww(e)};Us.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(I(188)):(s=Object.keys(s).join(","),Error(I(268,s)));return s=D1(e),s=s===null?null:s.stateNode,s};Us.flushSync=function(s){return $a(s)};Us.hydrate=function(s,e,t){if(!zg(e))throw Error(I(200));return Ug(null,s,e,!0,t)};Us.hydrateRoot=function(s,e,t){if(!bw(s))throw Error(I(405));var n=t!=null&&t.hydratedSources||null,i=!1,r="",o=gS;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=pS(e,null,s,1,t??null,i,!1,r,o),s[Yi]=e.current,rh(s),n)for(s=0;s<n.length;s++)t=n[s],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new $g(e)};Us.render=function(s,e,t){if(!zg(e))throw Error(I(200));return Ug(null,s,e,!1,t)};Us.unmountComponentAtNode=function(s){if(!zg(s))throw Error(I(40));return s._reactRootContainer?($a(function(){Ug(null,null,s,!1,function(){s._reactRootContainer=null,s[Yi]=null})}),!0):!1};Us.unstable_batchedUpdates=fw;Us.unstable_renderSubtreeIntoContainer=function(s,e,t,n){if(!zg(t))throw Error(I(200));if(s==null||s._reactInternals===void 0)throw Error(I(38));return Ug(s,e,t,!1,n)};Us.version="18.3.1-next-f1338f8080-20240426";function mS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mS)}catch(s){console.error(s)}}mS(),m1.exports=Us;var n2=m1.exports,yS,s_=n2;yS=s_.createRoot,s_.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(s,e)=>{const t=L.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>L.createElement("svg",{ref:h,...i2,width:i,height:i,stroke:n,strokeWidth:o?Number(r)*24/Number(i):r,className:["lucide",`lucide-${r2(s)}`,a].join(" "),...u},[...e.map(([d,f])=>L.createElement(d,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=pe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=pe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=pe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=pe("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=pe("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=pe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=pe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=pe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=pe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);let k2={data:""},C2=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||k2,T2=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,P2=/\/\*[^]*?\*\/|  +/g,a_=/\n+/g,dr=(s,e)=>{let t="",n="",i="";for(let r in s){let o=s[r];r[0]=="@"?r[1]=="i"?t=r+" "+o+";":n+=r[1]=="f"?dr(o,r):r+"{"+dr(o,r[1]=="k"?"":e)+"}":typeof o=="object"?n+=dr(o,e?e.replace(/([^,])+/g,a=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=dr.p?dr.p(r,o):r+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+n},ci={},kS=s=>{if(typeof s=="object"){let e="";for(let t in s)e+=t+kS(s[t]);return e}return s},R2=(s,e,t,n,i)=>{let r=kS(s),o=ci[r]||(ci[r]=(l=>{let u=0,h=11;for(;u<l.length;)h=101*h+l.charCodeAt(u++)>>>0;return"go"+h})(r));if(!ci[o]){let l=r!==s?s:(u=>{let h,d,f=[{}];for(;h=T2.exec(u.replace(P2,""));)h[4]?f.shift():h[3]?(d=h[3].replace(a_," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][h[1]]=h[2].replace(a_," ").trim();return f[0]})(s);ci[o]=dr(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&ci.g?ci.g:null;return t&&(ci.g=ci[o]),((l,u,h,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=h?l+u.data:u.data+l)})(ci[o],e,n,a),o},N2=(s,e,t)=>s.reduce((n,i,r)=>{let o=e[r];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":dr(a,""):a===!1?"":a}return n+i+(o??"")},"");function Hg(s){let e=this||{},t=s.call?s(e.p):s;return R2(t.unshift?t.raw?N2(t,[].slice.call(arguments,1),e.p):t.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):t,C2(e.target),e.g,e.o,e.k)}let CS,J0,Q0;Hg.bind({g:1});let Zi=Hg.bind({k:1});function L2(s,e,t,n){dr.p=e,CS=s,J0=t,Q0=n}function uo(s,e){let t=this||{};return function(){let n=arguments;function i(r,o){let a=Object.assign({},r),l=a.className||i.className;t.p=Object.assign({theme:J0&&J0()},a),t.o=/ *go\d+/.test(l),a.className=Hg.apply(t,n)+(l?" "+l:"");let u=s;return s[0]&&(u=a.as||s,delete a.as),Q0&&u[0]&&Q0(a),CS(u,a)}return i}}var I2=s=>typeof s=="function",Kp=(s,e)=>I2(s)?s(e):s,M2=(()=>{let s=0;return()=>(++s).toString()})(),TS=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");s=!e||e.matches}return s}})(),O2=20,PS=(s,e)=>{switch(e.type){case 0:return{...s,toasts:[e.toast,...s.toasts].slice(0,O2)};case 1:return{...s,toasts:s.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case 2:let{toast:t}=e;return PS(s,{type:s.toasts.find(r=>r.id===t.id)?1:0,toast:t});case 3:let{toastId:n}=e;return{...s,toasts:s.toasts.map(r=>r.id===n||n===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==e.toastId)};case 5:return{...s,pausedAt:e.time};case 6:let i=e.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+i}))}}},Vf=[],ko={toasts:[],pausedAt:void 0},qa=s=>{ko=PS(ko,s),Vf.forEach(e=>{e(ko)})},j2={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D2=(s={})=>{let[e,t]=L.useState(ko),n=L.useRef(ko);L.useEffect(()=>(n.current!==ko&&t(ko),Vf.push(t),()=>{let r=Vf.indexOf(t);r>-1&&Vf.splice(r,1)}),[]);let i=e.toasts.map(r=>{var o,a,l;return{...s,...s[r.type],...r,removeDelay:r.removeDelay||((o=s[r.type])==null?void 0:o.removeDelay)||(s==null?void 0:s.removeDelay),duration:r.duration||((a=s[r.type])==null?void 0:a.duration)||(s==null?void 0:s.duration)||j2[r.type],style:{...s.style,...(l=s[r.type])==null?void 0:l.style,...r.style}}});return{...e,toasts:i}},F2=(s,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...t,id:(t==null?void 0:t.id)||M2()}),Kd=s=>(e,t)=>{let n=F2(e,s,t);return qa({type:2,toast:n}),n.id},Jt=(s,e)=>Kd("blank")(s,e);Jt.error=Kd("error");Jt.success=Kd("success");Jt.loading=Kd("loading");Jt.custom=Kd("custom");Jt.dismiss=s=>{qa({type:3,toastId:s})};Jt.remove=s=>qa({type:4,toastId:s});Jt.promise=(s,e,t)=>{let n=Jt.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof s=="function"&&(s=s()),s.then(i=>{let r=e.success?Kp(e.success,i):void 0;return r?Jt.success(r,{id:n,...t,...t==null?void 0:t.success}):Jt.dismiss(n),i}).catch(i=>{let r=e.error?Kp(e.error,i):void 0;r?Jt.error(r,{id:n,...t,...t==null?void 0:t.error}):Jt.dismiss(n)}),s};var $2=(s,e)=>{qa({type:1,toast:{id:s,height:e}})},z2=()=>{qa({type:5,time:Date.now()})},Wu=new Map,U2=1e3,B2=(s,e=U2)=>{if(Wu.has(s))return;let t=setTimeout(()=>{Wu.delete(s),qa({type:4,toastId:s})},e);Wu.set(s,t)},H2=s=>{let{toasts:e,pausedAt:t}=D2(s);L.useEffect(()=>{if(t)return;let r=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(r-a.createdAt);if(l<0){a.visible&&Jt.dismiss(a.id);return}return setTimeout(()=>Jt.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let n=L.useCallback(()=>{t&&qa({type:6,time:Date.now()})},[t]),i=L.useCallback((r,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:u}=o||{},h=e.filter(p=>(p.position||u)===(r.position||u)&&p.height),d=h.findIndex(p=>p.id===r.id),f=h.filter((p,g)=>g<d&&p.visible).length;return h.filter(p=>p.visible).slice(...a?[f+1]:[0,f]).reduce((p,g)=>p+(g.height||0)+l,0)},[e]);return L.useEffect(()=>{e.forEach(r=>{if(r.dismissed)B2(r.id,r.removeDelay);else{let o=Wu.get(r.id);o&&(clearTimeout(o),Wu.delete(r.id))}})},[e]),{toasts:e,handlers:{updateHeight:$2,startPause:z2,endPause:n,calculateOffset:i}}},V2=Zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,G2=Zi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W2=Zi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,q2=uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${V2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${G2} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${W2} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,X2=Zi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,K2=uo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${X2} 1s linear infinite;
`,Y2=Zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,J2=Zi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Q2=uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Y2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${J2} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Z2=uo("div")`
  position: absolute;
`,eP=uo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,tP=Zi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sP=uo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${tP} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,nP=({toast:s})=>{let{icon:e,type:t,iconTheme:n}=s;return e!==void 0?typeof e=="string"?L.createElement(sP,null,e):e:t==="blank"?null:L.createElement(eP,null,L.createElement(K2,{...n}),t!=="loading"&&L.createElement(Z2,null,t==="error"?L.createElement(q2,{...n}):L.createElement(Q2,{...n})))},iP=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rP=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,oP="0%{opacity:0;} 100%{opacity:1;}",aP="0%{opacity:1;} 100%{opacity:0;}",lP=uo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cP=uo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,uP=(s,e)=>{let t=s.includes("top")?1:-1,[n,i]=TS()?[oP,aP]:[iP(t),rP(t)];return{animation:e?`${Zi(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Zi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},hP=L.memo(({toast:s,position:e,style:t,children:n})=>{let i=s.height?uP(s.position||e||"top-center",s.visible):{opacity:0},r=L.createElement(nP,{toast:s}),o=L.createElement(cP,{...s.ariaProps},Kp(s.message,s));return L.createElement(lP,{className:s.className,style:{...i,...t,...s.style}},typeof n=="function"?n({icon:r,message:o}):L.createElement(L.Fragment,null,r,o))});L2(L.createElement);var dP=({id:s,className:e,style:t,onHeightUpdate:n,children:i})=>{let r=L.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;n(s,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[s,n]);return L.createElement("div",{ref:r,className:e,style:t},i)},fP=(s,e)=>{let t=s.includes("top"),n=t?{top:0}:{bottom:0},i=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:TS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...n,...i}},pP=Hg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Sf=16,gP=({reverseOrder:s,position:e="top-center",toastOptions:t,gutter:n,children:i,containerStyle:r,containerClassName:o})=>{let{toasts:a,handlers:l}=H2(t);return L.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Sf,left:Sf,right:Sf,bottom:Sf,pointerEvents:"none",...r},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(u=>{let h=u.position||e,d=l.calculateOffset(u,{reverseOrder:s,gutter:n,defaultPosition:e}),f=fP(h,d);return L.createElement(dP,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?pP:"",style:f},u.type==="custom"?Kp(u.message,u):i?i(u):L.createElement(hP,{toast:u,position:h}))}))},J=Jt;const mP="modulepreload",yP=function(s){return"/"+s},l_={},Gc=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=yP(l),l in l_)return;l_[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":mP,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},vP=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Gc(async()=>{const{default:n}=await Promise.resolve().then(()=>Jc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class _w extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class wP extends _w{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bP extends _w{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _P extends _w{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Z0;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Z0||(Z0={}));var xP=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class SP{constructor(e,{headers:t={},customFetch:n,region:i=Z0.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=vP(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return xP(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(g=>{throw new wP(g)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new bP(h);if(!h.ok)throw new _P(h);let f=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield h.json():f==="application/octet-stream"?p=yield h.blob():f==="text/event-stream"?p=h:f==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var fs={},xw={},Vg={},Yd={},Gg={},Wg={},AP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Wc=AP();const EP=Wc.fetch,RS=Wc.fetch.bind(Wc),NS=Wc.Headers,kP=Wc.Request,CP=Wc.Response,Jc=Object.freeze(Object.defineProperty({__proto__:null,Headers:NS,Request:kP,Response:CP,default:RS,fetch:EP},Symbol.toStringTag,{value:"Module"})),TP=Rk(Jc);var qg={};Object.defineProperty(qg,"__esModule",{value:!0});let PP=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};qg.default=PP;var LS=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Wg,"__esModule",{value:!0});const RP=LS(TP),NP=LS(qg);let LP=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=RP.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,l;let u=null,h=null,d=null,f=r.status,p=r.statusText;if(r.ok){if(this.method!=="HEAD"){const v=await r.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=v:h=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&_&&_.length>1&&(d=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,f=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await r.text();try{u=JSON.parse(y),Array.isArray(u)&&r.status===404&&(h=[],u=null,f=200,p="OK")}catch{r.status===404&&y===""?(f=204,p="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new NP.default(u)}return{error:u,data:h,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(r=>{var o,a,l;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=r==null?void 0:r.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Wg.default=LP;var IP=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Gg,"__esModule",{value:!0});const MP=IP(Wg);let OP=class extends MP.default{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Gg.default=OP;var jP=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yd,"__esModule",{value:!0});const DP=jP(Gg);let FP=class extends DP.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Yd.default=FP;var $P=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Vg,"__esModule",{value:!0});const uu=$P(Yd);let zP=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=t,this.schema=n,this.fetch=i}select(e,{head:t=!1,count:n}={}){const i=t?"HEAD":"GET";let r=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new uu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const i="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new uu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new uu.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new uu.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new uu.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Vg.default=zP;var Xg={},Kg={};Object.defineProperty(Kg,"__esModule",{value:!0});Kg.version=void 0;Kg.version="0.0.0-automated";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.DEFAULT_HEADERS=void 0;const UP=Kg;Xg.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${UP.version}`};var IS=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xw,"__esModule",{value:!0});const BP=IS(Vg),HP=IS(Yd),VP=Xg;let GP=class MS{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},VP.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new BP.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new MS(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(o=n?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{a.searchParams.append(h,d)})):(o="POST",l=t);const u=Object.assign({},this.headers);return r&&(u.Prefer=`count=${r}`),new HP.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};xw.default=GP;var Qc=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fs,"__esModule",{value:!0});fs.PostgrestError=fs.PostgrestBuilder=fs.PostgrestTransformBuilder=fs.PostgrestFilterBuilder=fs.PostgrestQueryBuilder=fs.PostgrestClient=void 0;const OS=Qc(xw);fs.PostgrestClient=OS.default;const jS=Qc(Vg);fs.PostgrestQueryBuilder=jS.default;const DS=Qc(Yd);fs.PostgrestFilterBuilder=DS.default;const FS=Qc(Gg);fs.PostgrestTransformBuilder=FS.default;const $S=Qc(Wg);fs.PostgrestBuilder=$S.default;const zS=Qc(qg);fs.PostgrestError=zS.default;var WP=fs.default={PostgrestClient:OS.default,PostgrestQueryBuilder:jS.default,PostgrestFilterBuilder:DS.default,PostgrestTransformBuilder:FS.default,PostgrestBuilder:$S.default,PostgrestError:zS.default};const{PostgrestClient:qP,PostgrestQueryBuilder:qO,PostgrestFilterBuilder:XO,PostgrestTransformBuilder:KO,PostgrestBuilder:YO,PostgrestError:JO}=WP,XP="2.11.2",KP={"X-Client-Info":`realtime-js/${XP}`},YP="1.0.0",US=1e4,JP=1e3;var Pl;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Pl||(Pl={}));var ws;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ws||(ws={}));var En;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(En||(En={}));var ey;(function(s){s.websocket="websocket"})(ey||(ey={}));var bo;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(bo||(bo={}));class QP{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),r=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+r));o=o+r;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class BS{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ne||(Ne={}));const c_=(s,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((r,o)=>(r[o]=ZP(o,s,e,i),r),{})},ZP=(s,e,t,n)=>{const i=e.find(a=>a.name===s),r=i==null?void 0:i.type,o=t[s];return r&&!n.includes(r)?HS(r,o):ty(o)},HS=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return nR(e,t)}switch(s){case Ne.bool:return eR(e);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return tR(e);case Ne.json:case Ne.jsonb:return sR(e);case Ne.timestamp:return iR(e);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return ty(e);default:return ty(e)}},ty=s=>s,eR=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},tR=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},sR=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},nR=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let r;const o=s.slice(1,t);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>HS(e,a))}return s},iR=s=>typeof s=="string"?s.replace(" ","T"):s,VS=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class zm{constructor(e,t,n={},i=US){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var u_;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(u_||(u_={}));class qu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qu.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=qu.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=qu.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const r=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(r,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const d=r[u];if(d){const f=h.map(_=>_.presence_ref),p=d.map(_=>_.presence_ref),g=h.filter(_=>p.indexOf(_.presence_ref)<0),y=d.filter(_=>f.indexOf(_.presence_ref)<0);g.length>0&&(a[u]=g),y.length>0&&(l[u]=y)}else a[u]=h}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:r,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),h.length>0){const d=e[a].map(p=>p.presence_ref),f=h.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,h,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const h=l.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var h_;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(h_||(h_={}));var d_;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(d_||(d_={}));var pi;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(pi||(pi={}));class Sw{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ws.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new zm(this,En.join,this.params,this.timeout),this.rejoinTimer=new BS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ws.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ws.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ws.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ws.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new qu(this),this.broadcastEndpointURL=VS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(pi.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(pi.CLOSED));const l={},u={broadcast:r,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var d;if(this.socket.setAuth(),h===void 0){e==null||e(pi.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,g=[];for(let y=0;y<p;y++){const _=f[y],{filter:{event:v,schema:b,table:A,filter:E}}=_,k=h&&h[y];if(k&&k.event===v&&k.schema===b&&k.table===A&&k.filter===E)g.push(Object.assign(Object.assign({},_),{id:k.id}));else{this.unsubscribe(),e==null||e(pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(pi.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:r,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),u.receive("ok",()=>r("ok")),u.receive("error",()=>r("error")),u.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ws.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new zm(this,En.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(r),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new zm(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,r;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:h}=En;if(n&&[a,l,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,y,_;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(y=p.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(r=this.bindings[o])===null||r===void 0||r.filter(p=>{var g,y,_,v,b,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,k=(g=p.filter)===null||g===void 0?void 0:g.event;return E&&((y=t.ids)===null||y===void 0?void 0:y.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const E=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((A=t==null?void 0:t.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:_,commit_timestamp:v,type:b,errors:A}=g;f=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:v,eventType:b,new:{},old:{},errors:A}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===ws.closed}_isJoined(){return this.state===ws.joined}_isJoining(){return this.state===ws.joining}_isLeaving(){return this.state===ws.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Sw.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(En.close,{},e)}_onError(e){this._on(En.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ws.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=c_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=c_(e.columns,e.old_record)),t}}const rR=()=>{},oR=typeof WebSocket<"u",aR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lR{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=KP,this.params={},this.timeout=US,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=rR,this.conn=null,this.sendBuffer=[],this.serializer=new QP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...a)=>Gc(async()=>{const{default:l}=await Promise.resolve().then(()=>Jc);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ey.websocket}`,this.httpEndpoint=VS(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,o)=>o(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new BS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(oR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new cR(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Gc(async()=>{const{default:e}=await import("./browser-CkterteD.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YP}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pl.connecting:return bo.Connecting;case Pl.open:return bo.Open;case Pl.closing:return bo.Closing;default:return bo.Closed}}isConnected(){return this.connectionState()===bo.Open}channel(e,t={config:{}}){const n=new Sw(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:r}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(En.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(JP,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:r,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,r),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,r,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(En.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([aR],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class cR{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Pl.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Aw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class uR extends Aw{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sy extends Aw{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var hR=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const GS=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Gc(async()=>{const{default:n}=await Promise.resolve().then(()=>Jc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},dR=()=>hR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gc(()=>Promise.resolve().then(()=>Jc),void 0)).Response:Response}),ny=s=>{if(Array.isArray(s))return s.map(t=>ny(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[i]=ny(n)}),e};var Xa=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Um=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),fR=(s,e,t)=>Xa(void 0,void 0,void 0,function*(){const n=yield dR();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(i=>{e(new uR(Um(i),s.status||500))}).catch(i=>{e(new sy(Um(i),i))}):e(new sy(Um(s),s))}),pR=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function Jd(s,e,t,n,i,r){return Xa(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,pR(e,n,i,r)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>fR(l,a,n))})})}function Yp(s,e,t,n){return Xa(this,void 0,void 0,function*(){return Jd(s,"GET",e,t,n)})}function cr(s,e,t,n,i){return Xa(this,void 0,void 0,function*(){return Jd(s,"POST",e,n,i,t)})}function gR(s,e,t,n,i){return Xa(this,void 0,void 0,function*(){return Jd(s,"PUT",e,n,i,t)})}function mR(s,e,t,n){return Xa(this,void 0,void 0,function*(){return Jd(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function WS(s,e,t,n,i){return Xa(this,void 0,void 0,function*(){return Jd(s,"DELETE",e,n,i,t)})}var is=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const yR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},f_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vR{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=GS(i)}uploadOrUpdate(e,t,n,i){return is(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},f_),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l))):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:r,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(r){if(yt(r))return{data:null,error:r};throw r}})}upload(e,t,n){return is(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return is(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:f_.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),f=yield d.json();return d.ok?{data:{path:r,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(yt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return is(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const r=yield cr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new Aw("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}update(e,t,n){return is(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return is(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}})}copy(e,t,n){return is(this,void 0,void 0,function*(){try{return{data:{path:(yield cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return is(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield cr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return is(this,void 0,void 0,function*(){try{const i=yield cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}})}download(e,t){return is(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Yp(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}info(e){return is(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Yp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ny(n),error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}exists(e){return is(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield mR(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(yt(n)&&n instanceof sy){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return is(this,void 0,void 0,function*(){try{return{data:yield WS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}list(e,t,n){return is(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},yR),t),{prefix:e||""});return{data:yield cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const wR="2.7.1",bR={"X-Client-Info":`storage-js/${wR}`};var Qa=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class _R{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},bR),t),this.fetch=GS(n)}listBuckets(){return Qa(this,void 0,void 0,function*(){try{return{data:yield Yp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(yt(e))return{data:null,error:e};throw e}})}getBucket(e){return Qa(this,void 0,void 0,function*(){try{return{data:yield Yp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qa(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Qa(this,void 0,void 0,function*(){try{return{data:yield gR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Qa(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qa(this,void 0,void 0,function*(){try{return{data:yield WS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}}class xR extends _R{constructor(e,t={},n){super(e,t,n)}from(e){return new vR(this.url,this.headers,e,this.fetch)}}const SR="2.49.1";let bu="";typeof Deno<"u"?bu="deno":typeof document<"u"?bu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bu="react-native":bu="node";const AR={"X-Client-Info":`supabase-js-${bu}/${SR}`},ER={headers:AR},kR={schema:"public"},CR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TR={};var PR=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const RR=s=>{let e;return s?e=s:typeof fetch>"u"?e=RS:e=fetch,(...t)=>e(...t)},NR=()=>typeof Headers>"u"?NS:Headers,LR=(s,e,t)=>{const n=RR(t),i=NR();return(r,o)=>PR(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:s;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(r,Object.assign(Object.assign({},o),{headers:u}))})};var IR=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};function MR(s){return s.replace(/\/$/,"")}function OR(s,e){const{db:t,auth:n,realtime:i,global:r}=s,{db:o,auth:a,realtime:l,global:u}=e,h={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),r),accessToken:()=>IR(this,void 0,void 0,function*(){return""})};return s.accessToken?h.accessToken=s.accessToken:delete h.accessToken,h}const qS="2.68.0",tl=30*1e3,iy=3,Bm=iy*tl,jR="http://localhost:9999",DR="supabase.auth.token",FR={"X-Client-Info":`gotrue-js/${qS}`},ry="X-Supabase-Api-Version",XS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function $R(s){return Math.round(Date.now()/1e3)+s}function zR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Fn=()=>typeof window<"u"&&typeof document<"u",fo={tested:!1,writable:!1},Xu=()=>{if(!Fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fo.tested)return fo.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),fo.tested=!0,fo.writable=!0}catch{fo.tested=!0,fo.writable=!1}return fo.writable};function UR(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,r)=>{e[r]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const KS=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Gc(async()=>{const{default:n}=await Promise.resolve().then(()=>Jc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},BR=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",YS=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Af=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ef=async(s,e)=>{await s.removeItem(e)};function HR(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,i,r,o,a,l,u,h=0;for(s=s.replace("-","+").replace("_","/");h<s.length;)o=e.indexOf(s.charAt(h++)),a=e.indexOf(s.charAt(h++)),l=e.indexOf(s.charAt(h++)),u=e.indexOf(s.charAt(h++)),n=o<<2|a>>4,i=(a&15)<<4|l>>2,r=(l&3)<<6|u,t=t+String.fromCharCode(n),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&r!=0&&(t=t+String.fromCharCode(r));return t}class Yg{constructor(){this.promise=new Yg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yg.promiseConstructor=Promise;function p_(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(HR(n))}async function VR(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function GR(s,e){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await s(r);if(!e(r,null,o)){n(o);return}}catch(o){if(!e(r,o)){i(o);return}}})()})}function WR(s){return("0"+s.toString(16)).substr(-2)}function qR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let r=0;r<56;r++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,WR).join("")}async function XR(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}function KR(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function YR(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await XR(s);return KR(t)}async function Za(s,e,t=!1){const n=qR();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await YS(s,`${e}-code-verifier`,i);const r=await YR(n);return[r,n===r?"plain":"s256"]}const JR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QR(s){const e=s.headers.get(ry);if(!e||!e.match(JR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Ew extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ce(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class ZR extends Ew{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function eN(s){return ce(s)&&s.name==="AuthApiError"}class JS extends Ew{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ka extends Ew{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class ir extends Ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tN(s){return ce(s)&&s.name==="AuthSessionMissingError"}class Hm extends Ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kf extends Ka{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Cf extends Ka{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sN(s){return ce(s)&&s.name==="AuthImplicitGrantRedirectError"}class g_ extends Ka{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oy extends Ka{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Vm(s){return ce(s)&&s.name==="AuthRetryableFetchError"}class m_ extends Ka{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var nN=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};const mo=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),iN=[502,503,504];async function y_(s){var e;if(!BR(s))throw new oy(mo(s),0);if(iN.includes(s.status))throw new oy(mo(s),s.status);let t;try{t=await s.json()}catch(r){throw new JS(mo(r),r)}let n;const i=QR(s);if(i&&i.getTime()>=XS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new m_(mo(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ir}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new m_(mo(t),s.status,t.weak_password.reasons);throw new ZR(mo(t),s.status||500,n)}const rN=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function ye(s,e,t,n){var i;const r=Object.assign({},n==null?void 0:n.headers);r[ry]||(r[ry]=XS["2024-01-01"].name),n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await oN(s,e,t+a,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function oN(s,e,t,n,i,r){const o=rN(e,n,i,r);let a;try{a=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new oy(mo(l),0)}if(a.ok||await y_(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await y_(l)}}function rr(s){var e;let t=null;uN(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=$R(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function v_(s){const e=rr(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function fr(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function aN(s){return{data:s,error:null}}function lN(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r}=s,o=nN(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function cN(s){return s}function uN(s){return s.access_token&&s.refresh_token&&s.expires_in}var hN=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};class dN{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=KS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:fr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=hN(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lN,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ce(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fr})}catch(t){if(ce(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,r,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},h=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:cN});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fr})}catch(t){if(ce(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:fr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:fr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(ce(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}}}const fN={getItem:s=>Xu()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Xu()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Xu()&&globalThis.localStorage.removeItem(s)}};function w_(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function pN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const el={debug:!!(globalThis&&Xu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class QS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gN extends QS{}async function mN(s,e,t){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),el.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{el.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw el.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new gN(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(el.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}pN();const yN={url:jR,storageKey:DR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function b_(s,e,t){return await t()}class ph{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ph.nextInstanceID,ph.nextInstanceID+=1,this.instanceID>0&&Fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},yN),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new dN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=KS(i.fetch),this.lock=i.lock||b_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Fn()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=mN:this.lock=b_,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Xu()?this.storage=fN:(this.memoryStorage={},this.storage=w_(this.memoryStorage)):(this.memoryStorage={},this.storage=w_(this.memoryStorage)),Fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=UR(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Fn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),sN(r)){const l=(e=r.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ce(t)?{error:t}:{error:new JS("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const r=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:rr}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,i;try{let r;if("email"in e){const{email:h,password:d,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Za(this.storage,this.storageKey)),r=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:rr})}else if("phone"in e){const{phone:h,password:d,options:f}=e;r=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rr})}else throw new kf("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:o,options:a}=e;t=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:v_})}else if("phone"in e){const{phone:r,password:o,options:a}=e;t=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:v_})}else throw new kf("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Hm}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Af(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:r,error:o}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rr});if(await Ef(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Hm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(ce(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:r,nonce:o}=e,a=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:rr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Hm}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,r,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Za(this.storage,this.storageKey));const{error:d}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:h}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new kf("You must provide either an email or phone number.")}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,r;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:rr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await Za(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:aN})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ir;const{error:i}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:r}=e,{error:o}=await ye(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:r}=e,{data:o,error:a}=await ye(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new kf("You must provide either an email or phone number and a type")}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Af(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Bm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,h))})}return{data:{session:e},error:null}}const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fr}):await this._useSession(async t=>{var n,i,r;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ir}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:fr})})}catch(t){if(ce(t))return tN(t)&&(await this._removeSession(),await Ef(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new ir;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Za(this.storage,this.storageKey));const{data:u,error:h}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:fr});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return p_(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ir;const t=Date.now()/1e3;let n=t,i=!0,r=null;const o=p_(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(ce(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ir;const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Fn())throw new Cf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Cf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new g_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cf("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new g_("No code detected.");const{data:b,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!r||!a||!o||!u)throw new Cf("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let f=h+d;l&&(f=parseInt(l));const p=f-h;p*1e3<=tl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const g=f-d;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,h);const{data:y,error:_}=await this._getUser(r);if(_)throw _;const v={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Af(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return{error:r};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(eN(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ef(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=zR(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:r},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Za(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,u,h;const{data:d,error:f}=r;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Fn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ce(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:o}=t;if(o)throw o;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(ce(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await GR(async i=>(i>0&&await VR(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rr})),(i,r)=>{const o=200*Math.pow(2,i);return r&&Vm(r)&&Date.now()+o-n<tl})}catch(n){if(this._debug(t,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Fn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Af(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Bm;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Bm}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:r}=await this._callRefreshToken(n.refresh_token);r&&(console.error(r),Vm(r)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ir;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yg;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new ir;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),ce(r)){const o={session:null,error:r};return Vm(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await YS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ef(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/tl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${tl}ms, refresh threshold is ${iy} ticks`),i<=iy&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof QS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await Za(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;return r?{data:null,error:r}:await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ce(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(ce(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return{data:null,error:r};const{data:o,error:a}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(ce(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;return r?{data:null,error:r}:await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ce(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:r}=e;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}}ph.nextInstanceID=0;const vN=ph;class wN extends vN{constructor(e){super(e)}}var bN=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class _N{constructor(e,t,n){var i,r,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=MR(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:kR,realtime:TR,auth:Object.assign(Object.assign({},CR),{storageKey:l}),global:ER},h=OR(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=h.global.headers)!==null&&r!==void 0?r:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=LR(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new qP(`${a}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new SP(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new xR(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return bN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o,lock:a,debug:l},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wN({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new lR(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xN=(s,e,t)=>new _N(s,e,t),SN="https://ysojmskhzlbbguzovvye.supabase.co",AN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlzb2ptc2toemxiYmd1em92dnllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE0NjMwNzIsImV4cCI6MjA1NzAzOTA3Mn0.C7-eVxeVnQUAYU-aAp5jSQD9dkvOdQZWrSFuSF_f-Sc",Q=xN(SN,AN);var Ku={};Ku.d=(s,e)=>{for(var t in e)Ku.o(e,t)&&!Ku.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})};Ku.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e);var se=globalThis.pdfjsLib={};Ku.d(se,{AbortException:()=>io,AnnotationEditorLayer:()=>gv,AnnotationEditorParamsType:()=>ve,AnnotationEditorType:()=>oe,AnnotationEditorUIManager:()=>Ua,AnnotationLayer:()=>wI,AnnotationMode:()=>pr,ColorPicker:()=>sg,DOMSVGFactory:()=>Mw,DrawLayer:()=>vv,FeatureTest:()=>Zt,GlobalWorkerOptions:()=>Hi,ImageKind:()=>Gf,InvalidPDFException:()=>ly,MissingPDFException:()=>gh,OPS:()=>hn,OutputScale:()=>uy,PDFDataRangeTransport:()=>eE,PDFDateString:()=>Rw,PDFWorker:()=>Nl,PasswordResponses:()=>TN,PermissionFlag:()=>CN,PixelsPerInch:()=>ro,RenderingCancelledException:()=>Tw,TextLayer:()=>mh,TouchManager:()=>eg,UnexpectedResponseException:()=>Jp,Util:()=>K,VerbosityLevel:()=>Jg,XfaLayer:()=>sE,build:()=>ZL,createValidAbsoluteUrl:()=>LN,fetchData:()=>tm,getDocument:()=>VL,getFilenameFromUrl:()=>UN,getPdfFilenameFromUrl:()=>BN,getXfaPageViewport:()=>HN,isDataScheme:()=>sm,isPdfFile:()=>Pw,noContextMenu:()=>Nn,normalizeUnicode:()=>FN,setLayerDimensions:()=>za,shadow:()=>de,stopEvent:()=>Os,version:()=>QL});const Ut=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ZS=[1,0,0,1,0,0],ay=[.001,0,0,.001,0,0],EN=1e7,Gm=1.35,Ls={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},pr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},kN="pdfjs_internal_editor_",oe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},CN={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Lt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Gf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},it={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},hu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Jg={ERRORS:0,WARNINGS:1,INFOS:5},hn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},TN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Qg=Jg.WARNINGS;function PN(s){Number.isInteger(s)&&(Qg=s)}function RN(){return Qg}function Zg(s){Qg>=Jg.INFOS&&console.log(`Info: ${s}`)}function ae(s){Qg>=Jg.WARNINGS&&console.log(`Warning: ${s}`)}function Re(s){throw new Error(s)}function tt(s,e){s||Re(e)}function NN(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function LN(s,e=null,t=null){if(!s)return null;try{if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=DN(s)}catch{}}const n=e?new URL(s,e):new URL(s);if(NN(n))return n}catch{}return null}function de(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const ho=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class __ extends ho{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Wm extends ho{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ly extends ho{constructor(e){super(e,"InvalidPDFException")}}class gh extends ho{constructor(e){super(e,"MissingPDFException")}}class Jp extends ho{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class IN extends ho{constructor(e){super(e,"FormatError")}}class io extends ho{constructor(e){super(e,"AbortException")}}function eA(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Re("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function em(s){typeof s!="string"&&Re("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function MN(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function kw(s){const e=Object.create(null);for(const[t,n]of s)e[t]=n;return e}function ON(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function jN(){try{return new Function(""),!0}catch{return!1}}class Zt{static get isLittleEndian(){return de(this,"isLittleEndian",ON())}static get isEvalSupported(){return de(this,"isEvalSupported",jN())}static get isOffscreenCanvasSupported(){return de(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return de(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?de(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):de(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return de(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const qm=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var qi,Wf,cy;class K{static makeHexColor(e,t,n){return`#${qm[e]}${qm[t]}${qm[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[n,i]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[i,r]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(n+o)/2,l=Math.sqrt((n+o)**2-4*(n*o-r*i))/2,u=a+l||1,h=a-l||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[n,r,i,o]}static bezierBoundingBox(e,t,n,i,r,o,a,l,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],S(this,qi,cy).call(this,e,n,r,a,t,i,o,l,3*(-e+3*(n-r)+a),6*(e-2*n+r),3*(n-e),u),S(this,qi,cy).call(this,e,n,r,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),u),u}}qi=new WeakSet,Wf=function(e,t,n,i,r,o,a,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,g=d*(d*(d*e+3*u*t)+3*f*n)+p*i,y=d*(d*(d*r+3*u*o)+3*f*a)+p*l;h[0]=Math.min(h[0],g),h[1]=Math.min(h[1],y),h[2]=Math.max(h[2],g),h[3]=Math.max(h[3],y)},cy=function(e,t,n,i,r,o,a,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&S(this,qi,Wf).call(this,e,t,n,i,r,o,a,l,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const g=Math.sqrt(p),y=2*u;S(this,qi,Wf).call(this,e,t,n,i,r,o,a,l,(-h+g)/y,f),S(this,qi,Wf).call(this,e,t,n,i,r,o,a,l,(-h-g)/y,f)},x(K,qi);function DN(s){return decodeURIComponent(escape(s))}let Xm=null,x_=null;function FN(s){return Xm||(Xm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,x_=new Map([["ﬅ","ſt"]])),s.replaceAll(Xm,(e,t,n)=>t?t.normalize("NFKC"):x_.get(n))}function $N(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),eA(s)}const Cw="pdfjs_internal_id_";function zN(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(eA(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});const ui="http://www.w3.org/2000/svg",_o=class _o{};ee(_o,"CSS",96),ee(_o,"PDF",72),ee(_o,"PDF_TO_CSS_UNITS",_o.CSS/_o.PDF);let ro=_o;async function tm(s,e="text"){if(_u(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Qd{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=o,n*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let g,y,_,v;h===0?(g=Math.abs(u-e[1])*n+r,y=Math.abs(l-e[0])*n+o,_=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(g=Math.abs(l-e[0])*n+r,y=Math.abs(u-e[1])*n+o,_=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[h*n,d*n,f*n,p*n,g-h*n*l-f*n*u,y-d*n*l-p*n*u],this.width=_,this.height=v}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(i=>i*e);return de(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Qd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return K.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=K.applyTransform([e[0],e[1]],this.transform),n=K.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return K.applyInverseTransform([e,t],this.transform)}}class Tw extends ho{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function sm(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function Pw(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function UN(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function BN(s,e="document.pdf"){if(typeof s!="string")return e;if(sm(s))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||e}class S_{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(e){e in this.started&&ae(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ae(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-i}ms
`);return e.join("")}}function _u(s,e){try{const{protocol:t}=e?new URL(s,e):new URL(s);return t==="http:"||t==="https:"}catch{return!1}}function Nn(s){s.preventDefault()}function Os(s){s.preventDefault(),s.stopPropagation()}var wh;class Rw{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,wh)||w(this,wh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,wh).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(n,i,r,o,a,l))}}wh=new WeakMap,x(Rw,wh);function HN(s,{scale:e=1,rotation:t=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new Qd({viewBox:r,userUnit:1,scale:e,rotation:t})}function Nw(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ae(`Not a valid color format: "${s}"`),[0,0,0])}function VN(s){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Nw(n))}e.remove()}function Fe(s){const{a:e,b:t,c:n,d:i,e:r,f:o}=s.getTransform();return[e,t,n,i,r,o]}function On(s){const{a:e,b:t,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[e,t,n,i,r,o]}function za(s,e,t=!1,n=!0){if(e instanceof Qd){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=s,a=Zt.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}n&&s.setAttribute("data-main-rotation",e.rotation)}class uy{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var gr,To,dn,Po,bh,_h,ag,tA,es,sA,nA,qf,iA,dy;const gi=class gi{constructor(e){x(this,es);x(this,gr,null);x(this,To,null);x(this,dn);x(this,Po,null);x(this,bh,null);w(this,dn,e),c(gi,_h)||w(gi,_h,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=w(this,gr,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,dn)._uiManager._signal;e.addEventListener("contextmenu",Nn,{signal:t}),e.addEventListener("pointerdown",S(gi,ag,tA),{signal:t});const n=w(this,Po,document.createElement("div"));n.className="buttons",e.append(n);const i=c(this,dn).toolbarPosition;if(i){const{style:r}=e,o=c(this,dn)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,es,iA).call(this),e}get div(){return c(this,gr)}hide(){var e;c(this,gr).classList.add("hidden"),(e=c(this,To))==null||e.hideDropdown()}show(){var e;c(this,gr).classList.remove("hidden"),(e=c(this,bh))==null||e.shown()}async addAltText(e){const t=await e.render();S(this,es,qf).call(this,t),c(this,Po).prepend(t,c(this,es,dy)),w(this,bh,e)}addColorPicker(e){w(this,To,e);const t=e.renderButton();S(this,es,qf).call(this,t),c(this,Po).prepend(t,c(this,es,dy))}remove(){var e;c(this,gr).remove(),(e=c(this,To))==null||e.destroy(),w(this,To,null)}};gr=new WeakMap,To=new WeakMap,dn=new WeakMap,Po=new WeakMap,bh=new WeakMap,_h=new WeakMap,ag=new WeakSet,tA=function(e){e.stopPropagation()},es=new WeakSet,sA=function(e){c(this,dn)._focusEventsAllowed=!1,Os(e)},nA=function(e){c(this,dn)._focusEventsAllowed=!0,Os(e)},qf=function(e){const t=c(this,dn)._uiManager._signal;e.addEventListener("focusin",S(this,es,sA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",S(this,es,nA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Nn,{signal:t})},iA=function(){const{editorType:e,_uiManager:t}=c(this,dn),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(gi,_h)[e]),S(this,es,qf).call(this,n),n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),c(this,Po).append(n)},dy=function(){const e=document.createElement("div");return e.className="divider",e},x(gi,ag),x(gi,_h,null);let hy=gi;var xh,Ro,No,oo,rA,oA,aA;class GN{constructor(e){x(this,oo);x(this,xh,null);x(this,Ro,null);x(this,No);w(this,No,e)}show(e,t,n){const[i,r]=S(this,oo,oA).call(this,t,n),{style:o}=c(this,Ro)||w(this,Ro,S(this,oo,rA).call(this));e.append(c(this,Ro)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Ro).remove()}}xh=new WeakMap,Ro=new WeakMap,No=new WeakMap,oo=new WeakSet,rA=function(){const e=w(this,Ro,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Nn,{signal:c(this,No)._signal});const t=w(this,xh,document.createElement("div"));return t.className="buttons",e.append(t),S(this,oo,aA).call(this),e},oA=function(e,t){let n=0,i=0;for(const r of e){const o=r.y+r.height;if(o<n)continue;const a=r.x+(t?r.width:0);if(o>n){i=a,n=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,n]},aA=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,No)._signal;e.addEventListener("contextmenu",Nn,{signal:n}),e.addEventListener("click",()=>{c(this,No).highlightSelection("floating_button")},{signal:n}),c(this,xh).append(e)};function Qp(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var lg;class WN{constructor(){x(this,lg,0)}get id(){return`${kN}${Vt(this,lg)._++}`}}lg=new WeakMap;var Ll,Sh,Ot,Il,Xf;const zw=class zw{constructor(){x(this,Il);x(this,Ll,$N());x(this,Sh,0);x(this,Ot,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return de(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return S(this,Il,Xf).call(this,`${t}_${n}_${i}_${r}`,e)}async getFromUrl(e){return S(this,Il,Xf).call(this,e,e)}async getFromBlob(e,t){const n=await t;return S(this,Il,Xf).call(this,e,n)}async getFromId(e){c(this,Ot)||w(this,Ot,new Map);const t=c(this,Ot).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Ot)||w(this,Ot,new Map);let n=c(this,Ot).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${c(this,Ll)}_${Vt(this,Sh)._++}`,refCounter:1,isSvg:!1},c(this,Ot).set(e,n),c(this,Ot).set(n.id,n),n}getSvgUrl(e){const t=c(this,Ot).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;c(this,Ot)||w(this,Ot,new Map);const t=c(this,Ot).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Ll)}_`)}};Ll=new WeakMap,Sh=new WeakMap,Ot=new WeakMap,Il=new WeakSet,Xf=async function(e,t){c(this,Ot)||w(this,Ot,new Map);let n=c(this,Ot).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Ll)}_${Vt(this,Sh)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await tm(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=zw._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,h)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,u()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){ae(i),n=null}return c(this,Ot).set(e,n),n&&c(this,Ot).set(n.id,n),n};let fy=zw;var Ke,mr,Ah,Ue;class qN{constructor(e=128){x(this,Ke,[]);x(this,mr,!1);x(this,Ah);x(this,Ue,-1);w(this,Ah,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),c(this,mr))return;const l={cmd:e,undo:t,post:n,type:r};if(c(this,Ue)===-1){c(this,Ke).length>0&&(c(this,Ke).length=0),w(this,Ue,0),c(this,Ke).push(l);return}if(o&&c(this,Ke)[c(this,Ue)].type===r){a&&(l.undo=c(this,Ke)[c(this,Ue)].undo),c(this,Ke)[c(this,Ue)]=l;return}const u=c(this,Ue)+1;u===c(this,Ah)?c(this,Ke).splice(0,1):(w(this,Ue,u),u<c(this,Ke).length&&c(this,Ke).splice(u)),c(this,Ke).push(l)}undo(){if(c(this,Ue)===-1)return;w(this,mr,!0);const{undo:e,post:t}=c(this,Ke)[c(this,Ue)];e(),t==null||t(),w(this,mr,!1),w(this,Ue,c(this,Ue)-1)}redo(){if(c(this,Ue)<c(this,Ke).length-1){w(this,Ue,c(this,Ue)+1),w(this,mr,!0);const{cmd:e,post:t}=c(this,Ke)[c(this,Ue)];e(),t==null||t(),w(this,mr,!1)}}hasSomethingToUndo(){return c(this,Ue)!==-1}hasSomethingToRedo(){return c(this,Ue)<c(this,Ke).length-1}cleanType(e){if(c(this,Ue)!==-1){for(let t=c(this,Ue);t>=0;t--)if(c(this,Ke)[t].type!==e){c(this,Ke).splice(t+1,c(this,Ue)-t),w(this,Ue,t);return}c(this,Ke).length=0,w(this,Ue,-1)}}destroy(){w(this,Ke,null)}}Ke=new WeakMap,mr=new WeakMap,Ah=new WeakMap,Ue=new WeakMap;var cg,lA;class Zd{constructor(e){x(this,cg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Zt.platform;for(const[n,i,r={}]of e)for(const o of n){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(S(this,cg,lA).call(this,t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...o,t)(),r||Os(t))}}cg=new WeakSet,lA=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const ug=class ug{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return VN(e),de(this,"_colors",e)}convert(e){const t=Nw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((r,o)=>r===t[o]))return ug._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?K.makeHexColor(...t):e}};ee(ug,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let py=ug;var Ml,bs,ot,bt,Ol,vi,jl,Vs,yr,Lo,Dl,Io,Un,fn,Mo,Eh,kh,Fl,Ch,Bn,vr,$l,wr,Hn,hg,br,Th,_r,Oo,Ph,Rh,ht,Ee,wi,jo,Nh,Lh,xr,Vn,bi,Ih,Gs,F,Kf,gy,cA,uA,Yf,hA,dA,fA,my,pA,yy,vy,gA,Gt,hi,mA,yA,wy,vA,xu,by;const _l=class _l{constructor(e,t,n,i,r,o,a,l,u,h,d,f,p){x(this,F);x(this,Ml,new AbortController);x(this,bs,null);x(this,ot,new Map);x(this,bt,new Map);x(this,Ol,null);x(this,vi,null);x(this,jl,null);x(this,Vs,new qN);x(this,yr,null);x(this,Lo,null);x(this,Dl,0);x(this,Io,new Set);x(this,Un,null);x(this,fn,null);x(this,Mo,new Set);ee(this,"_editorUndoBar",null);x(this,Eh,!1);x(this,kh,!1);x(this,Fl,!1);x(this,Ch,null);x(this,Bn,null);x(this,vr,null);x(this,$l,null);x(this,wr,!1);x(this,Hn,null);x(this,hg,new WN);x(this,br,!1);x(this,Th,!1);x(this,_r,null);x(this,Oo,null);x(this,Ph,null);x(this,Rh,null);x(this,ht,oe.NONE);x(this,Ee,new Set);x(this,wi,null);x(this,jo,null);x(this,Nh,null);x(this,Lh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,xr,[0,0]);x(this,Vn,null);x(this,bi,null);x(this,Ih,null);x(this,Gs,null);const g=this._signal=c(this,Ml).signal;w(this,bi,e),w(this,Ih,t),w(this,Ol,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:g}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),i._on("setpreference",this.onSetPreference.bind(this),{signal:g}),i._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:g}),S(this,F,hA).call(this),S(this,F,gA).call(this),S(this,F,my).call(this),w(this,vi,r.annotationStorage),w(this,Ch,r.filterFactory),w(this,jo,o),w(this,$l,a||null),w(this,Eh,l),w(this,kh,u),w(this,Fl,h),w(this,Rh,d||null),this.viewParameters={realScale:ro.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=_l.prototype,t=o=>c(o,bi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return de(this,"_keyboardManager",new Zd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,bi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,bi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,n,i,r;(e=c(this,Gs))==null||e.resolve(),w(this,Gs,null),(t=c(this,Ml))==null||t.abort(),w(this,Ml,null),this._signal=null;for(const o of c(this,bt).values())o.destroy();c(this,bt).clear(),c(this,ot).clear(),c(this,Mo).clear(),w(this,bs,null),c(this,Ee).clear(),c(this,Vs).destroy(),(n=c(this,Ol))==null||n.destroy(),(i=c(this,Hn))==null||i.hide(),w(this,Hn,null),c(this,Bn)&&(clearTimeout(c(this,Bn)),w(this,Bn,null)),c(this,Vn)&&(clearTimeout(c(this,Vn)),w(this,Vn,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Rh)}get useNewAltTextFlow(){return c(this,kh)}get useNewAltTextWhenAddingImage(){return c(this,Fl)}get hcmFilter(){return de(this,"hcmFilter",c(this,jo)?c(this,Ch).addHCMFilter(c(this,jo).foreground,c(this,jo).background):"none")}get direction(){return de(this,"direction",getComputedStyle(c(this,bi)).direction)}get highlightColors(){return de(this,"highlightColors",c(this,$l)?new Map(c(this,$l).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return de(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,Lo,e)}setMainHighlightColorPicker(e){w(this,Ph,e)}editAltText(e,t=!1){var n;(n=c(this,Ol))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":w(this,Fl,t);break}}onPageChanging({pageNumber:e}){w(this,Dl,e-1)}focusMainContainer(){c(this,bi).focus()}findParent(e,t){for(const n of c(this,bt).values()){const{x:i,y:r,width:o,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+a)return n}return null}disableUserSelect(e=!1){c(this,Ih).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Mo).add(e)}removeShouldRescale(e){c(this,Mo).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*ro.PDF_TO_CSS_UNITS;for(const n of c(this,Mo))n.onScaleChanging();(t=c(this,Lo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t,a=t.toString(),u=S(this,F,Kf).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=S(this,F,gy).call(this,u),f=c(this,ht)===oe.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(oe.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,vi)&&!c(this,vi).has(e.id)&&c(this,vi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,wr)&&(w(this,wr,!1),S(this,F,Yf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Ee))if(t.div.contains(e)){w(this,Oo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Oo))return;const[e,t]=c(this,Oo);w(this,Oo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){S(this,F,my).call(this),S(this,F,yy).call(this)}removeEditListeners(){S(this,F,pA).call(this),S(this,F,vy).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,fn))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,fn))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,bs))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of c(this,Ee)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of c(this,fn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){ae(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of n){const u=await i.deserialize(l);if(!u)return;r.push(u)}const o=()=>{for(const l of r)S(this,F,wy).call(this,l);S(this,F,by).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){ae(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,ht)!==oe.NONE&&!this.isEditorHandlingKeyboard&&_l._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,wr)&&(w(this,wr,!1),S(this,F,Yf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(S(this,F,dA).call(this),S(this,F,yy).call(this),S(this,F,Gt).call(this,{isEditing:c(this,ht)!==oe.NONE,isEmpty:S(this,F,xu).call(this),hasSomethingToUndo:c(this,Vs).hasSomethingToUndo(),hasSomethingToRedo:c(this,Vs).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,F,fA).call(this),S(this,F,vy).call(this),S(this,F,Gt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,fn)){w(this,fn,e);for(const t of c(this,fn))S(this,F,hi).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,hg).id}get currentLayer(){return c(this,bt).get(c(this,Dl))}getLayer(e){return c(this,bt).get(e)}get currentPageIndex(){return c(this,Dl)}addLayer(e){c(this,bt).set(e.pageIndex,e),c(this,br)?e.enable():e.disable()}removeLayer(e){c(this,bt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var i;if(c(this,ht)!==e&&!(c(this,Gs)&&(await c(this,Gs).promise,!c(this,Gs)))){if(w(this,Gs,Promise.withResolvers()),w(this,ht,e),e===oe.NONE){this.setEditingState(!1),S(this,F,yA).call(this),(i=this._editorUndoBar)==null||i.hide(),c(this,Gs).resolve();return}this.setEditingState(!0),await S(this,F,mA).call(this),this.unselectAll();for(const r of c(this,bt).values())r.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),c(this,Gs).resolve();return}for(const r of c(this,ot).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();c(this,Gs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,ht)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(c(this,fn)){switch(e){case ve.CREATE:this.currentLayer.addNewEditor();return;case ve.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,Ph))==null||n.updateColor(t);break;case ve.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Nh)||w(this,Nh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of c(this,Ee))i.updateParams(e,t);for(const i of c(this,fn))i.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var r;for(const o of c(this,ot).values())o.editorType===e&&o.show(t);(((r=c(this,Nh))==null?void 0:r.get(ve.HIGHLIGHT_SHOW_ALL))??!0)!==t&&S(this,F,hi).call(this,[[ve.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Th)!==e){w(this,Th,e);for(const t of c(this,bt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of c(this,ot).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return c(this,ot).get(e)}addEditor(e){c(this,ot).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,Bn)&&clearTimeout(c(this,Bn)),w(this,Bn,setTimeout(()=>{this.focusMainContainer(),w(this,Bn,null)},0))),c(this,ot).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,Io).has(e.annotationElementId))&&((t=c(this,vi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,Io).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Io).has(e)}removeDeletedAnnotationElement(e){c(this,Io).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,bs)!==e&&(w(this,bs,e),e&&S(this,F,hi).call(this,e.propertiesToUpdate))}updateUI(e){c(this,F,vA)===e&&S(this,F,hi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){S(this,F,hi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Ee).has(e)){c(this,Ee).delete(e),e.unselect(),S(this,F,Gt).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Ee).add(e),e.select(),S(this,F,hi).call(this,e.propertiesToUpdate),S(this,F,Gt).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=c(this,Lo))==null||t.commitOrRemove();for(const n of c(this,Ee))n!==e&&n.unselect();c(this,Ee).clear(),c(this,Ee).add(e),e.select(),S(this,F,hi).call(this,e.propertiesToUpdate),S(this,F,Gt).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Ee).has(e)}get firstSelectedEditor(){return c(this,Ee).values().next().value}unselect(e){e.unselect(),c(this,Ee).delete(e),S(this,F,Gt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Ee).size!==0}get isEnterHandled(){return c(this,Ee).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,Vs).undo(),S(this,F,Gt).call(this,{hasSomethingToUndo:c(this,Vs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,F,xu).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,Vs).redo(),S(this,F,Gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Vs).hasSomethingToRedo(),isEmpty:S(this,F,xu).call(this)})}addCommands(e){c(this,Vs).add(e),S(this,F,Gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,F,xu).call(this)})}cleanUndoStack(e){c(this,Vs).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Ee)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const o of t)S(this,F,wy).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=c(this,bs))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,bs)||this.hasSelection}selectAll(){for(const e of c(this,Ee))e.commit();S(this,F,by).call(this,c(this,ot).values())}unselectAll(){var e;if(!(c(this,bs)&&(c(this,bs).commitOrRemove(),c(this,ht)!==oe.NONE))&&!((e=c(this,Lo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Ee))t.unselect();c(this,Ee).clear(),S(this,F,Gt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,xr)[0]+=e,c(this,xr)[1]+=t;const[i,r]=c(this,xr),o=[...c(this,Ee)],a=1e3;c(this,Vn)&&clearTimeout(c(this,Vn)),w(this,Vn,setTimeout(()=>{w(this,Vn,null),c(this,xr)[0]=c(this,xr)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,ot).has(l.id)&&l.translateInPage(i,r)},undo:()=>{for(const l of o)c(this,ot).has(l.id)&&l.translateInPage(-i,-r)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,Un,new Map);for(const e of c(this,Ee))c(this,Un).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Un))return!1;this.disableUserSelect(!1);const e=c(this,Un);w(this,Un,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},a]of e)a.newX=i,a.newY=r,a.newPageIndex=o,t||(t=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const n=(i,r,o,a)=>{if(c(this,ot).has(i.id)){const l=c(this,bt).get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of e)n(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of e)n(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Un))for(const n of c(this,Un).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Ee).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,bs)===e}getActive(){return c(this,bs)}getMode(){return c(this,ht)}get imageManager(){return de(this,"imageManager",new fy)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-n)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-n)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-n)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-n)/r,y:(h-i)/o,width:d/r,height:f/o});break}const l=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:g,height:y}of d.getClientRects())g===0||y===0||l.push(a(f,p,g,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,jl)||w(this,jl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,jl))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=c(this,jl))==null?void 0:i.get(e.data.id);if(!t)return;const n=c(this,vi).getRawValue(t);n&&(c(this,ht)===oe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Ml=new WeakMap,bs=new WeakMap,ot=new WeakMap,bt=new WeakMap,Ol=new WeakMap,vi=new WeakMap,jl=new WeakMap,Vs=new WeakMap,yr=new WeakMap,Lo=new WeakMap,Dl=new WeakMap,Io=new WeakMap,Un=new WeakMap,fn=new WeakMap,Mo=new WeakMap,Eh=new WeakMap,kh=new WeakMap,Fl=new WeakMap,Ch=new WeakMap,Bn=new WeakMap,vr=new WeakMap,$l=new WeakMap,wr=new WeakMap,Hn=new WeakMap,hg=new WeakMap,br=new WeakMap,Th=new WeakMap,_r=new WeakMap,Oo=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,ht=new WeakMap,Ee=new WeakMap,wi=new WeakMap,jo=new WeakMap,Nh=new WeakMap,Lh=new WeakMap,xr=new WeakMap,Vn=new WeakMap,bi=new WeakMap,Ih=new WeakMap,Gs=new WeakMap,F=new WeakSet,Kf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},gy=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,bt).values())if(n.hasTextLayer(e))return n;return null},cA=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=S(this,F,Kf).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(c(this,Hn)||w(this,Hn,new GN(this)),c(this,Hn).show(n,i,this.direction==="ltr"))},uA=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){c(this,wi)&&((r=c(this,Hn))==null||r.hide(),w(this,wi,null),S(this,F,Gt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,wi))return;const i=S(this,F,Kf).call(this,e).closest(".textLayer");if(!i){c(this,wi)&&((o=c(this,Hn))==null||o.hide(),w(this,wi,null),S(this,F,Gt).call(this,{hasSelectedText:!1}));return}if((a=c(this,Hn))==null||a.hide(),w(this,wi,t),S(this,F,Gt).call(this,{hasSelectedText:!0}),!(c(this,ht)!==oe.HIGHLIGHT&&c(this,ht)!==oe.NONE)&&(c(this,ht)===oe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,wr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,ht)===oe.HIGHLIGHT?S(this,F,gy).call(this,i):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&S(this,F,Yf).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Yf=function(e=""){c(this,ht)===oe.HIGHLIGHT?this.highlightSelection(e):c(this,Eh)&&S(this,F,cA).call(this)},hA=function(){document.addEventListener("selectionchange",S(this,F,uA).bind(this),{signal:this._signal})},dA=function(){if(c(this,vr))return;w(this,vr,new AbortController);const e=this.combinedSignal(c(this,vr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},fA=function(){var e;(e=c(this,vr))==null||e.abort(),w(this,vr,null)},my=function(){if(c(this,_r))return;w(this,_r,new AbortController);const e=this.combinedSignal(c(this,_r));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},pA=function(){var e;(e=c(this,_r))==null||e.abort(),w(this,_r,null)},yy=function(){if(c(this,yr))return;w(this,yr,new AbortController);const e=this.combinedSignal(c(this,yr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},vy=function(){var e;(e=c(this,yr))==null||e.abort(),w(this,yr,null)},gA=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Gt=function(e){Object.entries(e).some(([n,i])=>c(this,Lh)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Lh),e)}),c(this,ht)===oe.HIGHLIGHT&&e.hasSelectedEditor===!1&&S(this,F,hi).call(this,[[ve.HIGHLIGHT_FREE,!0]]))},hi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},mA=async function(){if(!c(this,br)){w(this,br,!0);const e=[];for(const t of c(this,bt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,ot).values())t.enable()}},yA=function(){if(this.unselectAll(),c(this,br)){w(this,br,!1);for(const e of c(this,bt).values())e.disable();for(const e of c(this,ot).values())e.disable()}},wy=function(e){const t=c(this,bt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},vA=function(){let e=null;for(e of c(this,Ee));return e},xu=function(){if(c(this,ot).size===0)return!0;if(c(this,ot).size===1)for(const e of c(this,ot).values())return e.isEmpty();return!1},by=function(e){for(const t of c(this,Ee))t.unselect();c(this,Ee).clear();for(const t of e)t.isEmpty()||(c(this,Ee).add(t),t.select());S(this,F,Gt).call(this,{hasSelectedEditor:this.hasSelection})},ee(_l,"TRANSLATE_SMALL",1),ee(_l,"TRANSLATE_BIG",10);let Ua=_l;var dt,Gn,pn,zl,Wn,_s,Ul,qn,ls,_i,Do,Xn,Sr,Cn,Su,Jf;const Wt=class Wt{constructor(e){x(this,Cn);x(this,dt,null);x(this,Gn,!1);x(this,pn,null);x(this,zl,null);x(this,Wn,null);x(this,_s,null);x(this,Ul,!1);x(this,qn,null);x(this,ls,null);x(this,_i,null);x(this,Do,null);x(this,Xn,!1);w(this,ls,e),w(this,Xn,e._uiManager.useNewAltTextFlow),c(Wt,Sr)||w(Wt,Sr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Wt._l10n??(Wt._l10n=e)}async render(){const e=w(this,pn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=w(this,zl,document.createElement("span"));e.append(t),c(this,Xn)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Wt,Sr).missing),t.setAttribute("data-l10n-id",c(Wt,Sr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,ls)._uiManager._signal;e.addEventListener("contextmenu",Nn,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),c(this,ls)._uiManager.editAltText(c(this,ls)),c(this,Xn)&&c(this,ls)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Cn,Su)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(w(this,Ul,!0),i(r))},{signal:n}),await S(this,Cn,Jf).call(this),e}finish(){c(this,pn)&&(c(this,pn).focus({focusVisible:c(this,Ul)}),w(this,Ul,!1))}isEmpty(){return c(this,Xn)?c(this,dt)===null:!c(this,dt)&&!c(this,Gn)}hasData(){return c(this,Xn)?c(this,dt)!==null||!!c(this,_i):this.isEmpty()}get guessedText(){return c(this,_i)}async setGuessedText(e){c(this,dt)===null&&(w(this,_i,e),w(this,Do,await Wt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),S(this,Cn,Jf).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Xn)||c(this,dt)){(t=c(this,qn))==null||t.remove(),w(this,qn,null);return}if(!c(this,qn)){const n=w(this,qn,document.createElement("div"));n.className="noAltTextBadge",c(this,ls).div.append(n)}c(this,qn).classList.toggle("hidden",!e)}serialize(e){let t=c(this,dt);return!e&&c(this,_i)===t&&(t=c(this,Do)),{altText:t,decorative:c(this,Gn),guessedText:c(this,_i),textWithDisclaimer:c(this,Do)}}get data(){return{altText:c(this,dt),decorative:c(this,Gn)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(w(this,_i,n),w(this,Do,i)),!(c(this,dt)===e&&c(this,Gn)===t)&&(r||(w(this,dt,e),w(this,Gn,t)),S(this,Cn,Jf).call(this))}toggle(e=!1){c(this,pn)&&(!e&&c(this,_s)&&(clearTimeout(c(this,_s)),w(this,_s,null)),c(this,pn).disabled=!e)}shown(){c(this,ls)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Cn,Su)}})}destroy(){var e,t;(e=c(this,pn))==null||e.remove(),w(this,pn,null),w(this,zl,null),w(this,Wn,null),(t=c(this,qn))==null||t.remove(),w(this,qn,null)}};dt=new WeakMap,Gn=new WeakMap,pn=new WeakMap,zl=new WeakMap,Wn=new WeakMap,_s=new WeakMap,Ul=new WeakMap,qn=new WeakMap,ls=new WeakMap,_i=new WeakMap,Do=new WeakMap,Xn=new WeakMap,Sr=new WeakMap,Cn=new WeakSet,Su=function(){return c(this,dt)&&"added"||c(this,dt)===null&&this.guessedText&&"review"||"missing"},Jf=async function(){var i,r,o;const e=c(this,pn);if(!e)return;if(c(this,Xn)){if(e.classList.toggle("done",!!c(this,dt)),e.setAttribute("data-l10n-id",c(Wt,Sr)[c(this,Cn,Su)]),(i=c(this,zl))==null||i.setAttribute("data-l10n-id",c(Wt,Sr)[`${c(this,Cn,Su)}-label`]),!c(this,dt)){(r=c(this,Wn))==null||r.remove();return}}else{if(!c(this,dt)&&!c(this,Gn)){e.classList.remove("done"),(o=c(this,Wn))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Wn);if(!t){w(this,Wn,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,ls).id}`;const a=100,l=c(this,ls)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,_s)),w(this,_s,null)},{once:!0}),e.addEventListener("mouseenter",()=>{w(this,_s,setTimeout(()=>{w(this,_s,null),c(this,Wn).classList.add("show"),c(this,ls)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,_s)&&(clearTimeout(c(this,_s)),w(this,_s,null)),(u=c(this,Wn))==null||u.classList.remove("show")},{signal:l})}c(this,Gn)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,dt)),t.parentNode||e.append(t);const n=c(this,ls).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},x(Wt,Sr,null),ee(Wt,"_l10n",null);let Zp=Wt;var Mh,Fo,Oh,jh,Dh,Fh,$h,Bl,xi,$o,Ar,er,wA,bA,_y;const Uw=class Uw{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){x(this,er);x(this,Mh);x(this,Fo,!1);x(this,Oh,null);x(this,jh);x(this,Dh);x(this,Fh);x(this,$h);x(this,Bl);x(this,xi,null);x(this,$o);x(this,Ar,null);w(this,Mh,e),w(this,Oh,n),w(this,jh,t),w(this,Dh,i),w(this,Fh,r),w(this,$h,o),w(this,$o,new AbortController),w(this,Bl,AbortSignal.any([a,c(this,$o).signal])),e.addEventListener("touchstart",S(this,er,wA).bind(this),{passive:!1,signal:c(this,Bl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return de(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=c(this,$o))==null||e.abort(),w(this,$o,null)}};Mh=new WeakMap,Fo=new WeakMap,Oh=new WeakMap,jh=new WeakMap,Dh=new WeakMap,Fh=new WeakMap,$h=new WeakMap,Bl=new WeakMap,xi=new WeakMap,$o=new WeakMap,Ar=new WeakMap,er=new WeakSet,wA=function(e){var i,r,o;if((i=c(this,jh))!=null&&i.call(this)||e.touches.length<2)return;if(!c(this,Ar)){w(this,Ar,new AbortController);const a=AbortSignal.any([c(this,Bl),c(this,Ar).signal]),l=c(this,Mh),u={signal:a,passive:!1};l.addEventListener("touchmove",S(this,er,bA).bind(this),u),l.addEventListener("touchend",S(this,er,_y).bind(this),u),l.addEventListener("touchcancel",S(this,er,_y).bind(this),u),(r=c(this,Dh))==null||r.call(this)}if(Os(e),e.touches.length!==2||(o=c(this,Oh))!=null&&o.call(this)){w(this,xi,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),w(this,xi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},bA=function(e){var E;if(!c(this,xi)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:a}=n,l=c(this,xi),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=l,p=d-u,g=f-h,y=o-i,_=a-r,v=Math.hypot(y,_)||1,b=Math.hypot(p,g)||1;if(!c(this,Fo)&&Math.abs(b-v)<=Uw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,e.preventDefault(),!c(this,Fo)){w(this,Fo,!0);return}const A=[(i+o)/2,(r+a)/2];(E=c(this,Fh))==null||E.call(this,A,b,v)},_y=function(e){var t;c(this,Ar).abort(),w(this,Ar,null),(t=c(this,$h))==null||t.call(this),c(this,xi)&&(e.preventDefault(),w(this,xi,null),w(this,Fo,!1))};let eg=Uw;var zo,gn,Oe,Hl,Er,zh,Uo,_t,Bo,Si,kr,Uh,Ho,xs,Bh,Vo,Ai,Kn,Vl,Gl,Ws,Go,Hh,dg,te,xy,Vh,Sy,Qf,_A,xA,Ay,Zf,Ey,SA,AA,EA,ky,kA,Cy,CA,TA,PA,Ty,Au;const le=class le{constructor(e){x(this,te);x(this,zo,null);x(this,gn,null);x(this,Oe,null);x(this,Hl,!1);x(this,Er,null);x(this,zh,"");x(this,Uo,!1);x(this,_t,null);x(this,Bo,null);x(this,Si,null);x(this,kr,null);x(this,Uh,"");x(this,Ho,!1);x(this,xs,null);x(this,Bh,!1);x(this,Vo,!1);x(this,Ai,!1);x(this,Kn,null);x(this,Vl,0);x(this,Gl,0);x(this,Ws,null);x(this,Go,null);ee(this,"_editToolbar",null);ee(this,"_initialOptions",Object.create(null));ee(this,"_initialData",null);ee(this,"_isVisible",!0);ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);x(this,Hh,!1);x(this,dg,le._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=le.prototype._resizeWithKeyboard,t=Ua.TRANSLATE_SMALL,n=Ua.TRANSLATE_BIG;return de(this,"_resizerKeyboardManager",new Zd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return de(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new XN({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(le._l10n??(le._l10n=e),le._l10nResizer||(le._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),le._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);le._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Re("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Hh)}set _isDraggable(e){var t;w(this,Hh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,dg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):S(this,te,Au).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Ho)?w(this,Ho,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/o,this.fixAndSetPosition()}translate(e,t){S(this,te,xy).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,xs)||w(this,xs,[this.x,this.y,this.width,this.height]),S(this,te,xy).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,xs)||w(this,xs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,xs)&&(c(this,xs)[0]!==this.x||c(this,xs)[1]!==this.y)}get _hasBeenResized(){return!!c(this,xs)&&(c(this,xs)[2]!==this.width||c(this,xs)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=le,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=n,l*=i,r*=n,o*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(n-a,r)),o=Math.max(0,Math.min(i-l,o));break;case 90:r=Math.max(0,Math.min(n-l,r)),o=Math.min(i,Math.max(a,o));break;case 180:r=Math.min(n,Math.max(a,r)),o=Math.min(i,Math.max(l,o));break;case 270:r=Math.min(n,Math.max(l,r)),o=Math.max(0,Math.min(i-a,o));break}this.x=r/=n,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return S(n=le,Vh,Sy).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return S(n=le,Vh,Sy).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/n).toFixed(2)}%`,c(this,Uo)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),r=!c(this,Uo)&&t.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!c(this,Uo)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Oe))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,Vo)?this._editToolbar:(this._editToolbar=new hy(this),this.div.append(this._editToolbar.render()),c(this,Oe)&&await this._editToolbar.addAltText(c(this,Oe)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,Oe))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Oe)||(Zp.initialize(le._l10n),w(this,Oe,new Zp(this)),c(this,zo)&&(c(this,Oe).data=c(this,zo),w(this,zo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,Oe))==null?void 0:e.data}set altTextData(e){c(this,Oe)&&(c(this,Oe).data=e)}get guessedAltText(){var e;return(e=c(this,Oe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Oe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Oe))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Oe)&&!c(this,Oe).isEmpty()}hasAltTextData(){var e;return((e=c(this,Oe))==null?void 0:e.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Hl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),S(this,te,Cy).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),Qp(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Go)||w(this,Go,new eg({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,te,SA).bind(this),onPinching:S(this,te,AA).bind(this),onPinchEnd:S(this,te,EA).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(e){const{isMac:t}=Zt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(w(this,Ho,!0),this._isDraggable){S(this,te,kA).call(this,e);return}S(this,te,ky).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Kn)&&clearTimeout(c(this,Kn)),w(this,Kn,setTimeout(()=>{var e;w(this,Kn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*o,p=this.width*r,g=this.height*o;switch(n){case 0:return[d+u+a,o-f-h-g+l,d+u+p+a,o-f-h+l];case 90:return[d+h+a,o-f+u+l,d+h+g+a,o-f+u+p+l];case 180:return[d-u-p+a,o-f+h+l,d-u+a,o-f+h+g+l];case 270:return[d-h-g+a,o-f-u-p+l,d-h+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,o]=e,a=r-n,l=o-i;switch(this.rotation){case 0:return[n,t-o,a,l];case 90:return[n,t-i,l,a];case 180:return[r,t-i,a,l];case 270:return[r,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){w(this,Vo,!0)}disableEditMode(){w(this,Vo,!1)}isInEditMode(){return c(this,Vo)}shouldGetKeyboardEvents(){return c(this,Ai)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&n>0}rebuild(){S(this,te,Cy).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Re("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,w(i,zo,e.accessibilityData);const[r,o]=i.pageDimensions,[a,l,u,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/r,i.y=l/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,kr))==null||e.abort(),w(this,kr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Kn)&&(clearTimeout(c(this,Kn)),w(this,Kn,null)),S(this,te,Au).call(this),this.removeEditToolbar(),c(this,Ws)){for(const n of c(this,Ws).values())clearTimeout(n);w(this,Ws,null)}this.parent=null,(t=c(this,Go))==null||t.destroy(),w(this,Go,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,te,_A).call(this),c(this,_t).classList.remove("hidden"),Qp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),w(this,Si,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,_t).children;if(!c(this,gn)){w(this,gn,Array.from(t));const o=S(this,te,CA).bind(this),a=S(this,te,TA).bind(this),l=this._uiManager._signal;for(const u of c(this,gn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",S(this,te,PA).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",le._l10nResizer[h])}}const n=c(this,gn)[0];let i=0;for(const o of t){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,gn).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)c(this,_t).append(c(this,_t).firstChild);else if(r>i)for(let a=0;a<r-i;a++)c(this,_t).firstChild.before(c(this,_t).lastChild);let o=0;for(const a of t){const u=c(this,gn)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",le._l10nResizer[u])}}S(this,te,Ty).call(this,0),w(this,Ai,!0),c(this,_t).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Ai)&&S(this,te,Ey).call(this,c(this,Uh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,te,Au).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,Oe))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,i,r;(e=c(this,_t))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=c(this,Oe))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Bh)}set isEditing(e){w(this,Bh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){w(this,Uo,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,Ws)||w(this,Ws,new Map);const{action:n}=e;let i=c(this,Ws).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),c(this,Ws).delete(n),c(this,Ws).size===0&&w(this,Ws,null)},le._telemetryTimeout),c(this,Ws).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),w(this,Hl,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,Hl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};zo=new WeakMap,gn=new WeakMap,Oe=new WeakMap,Hl=new WeakMap,Er=new WeakMap,zh=new WeakMap,Uo=new WeakMap,_t=new WeakMap,Bo=new WeakMap,Si=new WeakMap,kr=new WeakMap,Uh=new WeakMap,Ho=new WeakMap,xs=new WeakMap,Bh=new WeakMap,Vo=new WeakMap,Ai=new WeakMap,Kn=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,Ws=new WeakMap,Go=new WeakMap,Hh=new WeakMap,dg=new WeakMap,te=new WeakSet,xy=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Vh=new WeakSet,Sy=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Qf=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},_A=function(){if(c(this,_t))return;w(this,_t,document.createElement("div")),c(this,_t).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");c(this,_t).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",S(this,te,xA).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Nn,{signal:t}),i.tabIndex=-1}this.div.prepend(c(this,_t))},xA=function(e,t){var h;t.preventDefault();const{isMac:n}=Zt.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=c(this,Oe))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,w(this,Bo,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,te,Ey).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Os,{passive:!1,signal:o}),window.addEventListener("contextmenu",Nn,{signal:o}),w(this,Si,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=c(this,Oe))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,S(this,te,Zf).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Ay=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[r,o]=this.parentDimensions;this.setDims(r*n,o*i),this.fixAndSetPosition(),this._onResized()},Zf=function(){if(!c(this,Si))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=c(this,Si);w(this,Si,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===e&&o===t&&a===n&&l===i||this.addCommands({cmd:S(this,te,Ay).bind(this,r,o,a,l),undo:S(this,te,Ay).bind(this,e,t,n,i),mustExec:!0})},Ey=function(e,t){const[n,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,u=le.MIN_SIZE/n,h=le.MIN_SIZE/i,d=S(this,te,Qf).call(this,this.rotation),f=(D,G)=>[d[0]*D+d[2]*G,d[1]*D+d[3]*G],p=S(this,te,Qf).call(this,360-this.rotation),g=(D,G)=>[p[0]*D+p[2]*G,p[1]*D+p[3]*G];let y,_,v=!1,b=!1;switch(e){case"topLeft":v=!0,y=(D,G)=>[0,0],_=(D,G)=>[D,G];break;case"topMiddle":y=(D,G)=>[D/2,0],_=(D,G)=>[D/2,G];break;case"topRight":v=!0,y=(D,G)=>[D,0],_=(D,G)=>[0,G];break;case"middleRight":b=!0,y=(D,G)=>[D,G/2],_=(D,G)=>[0,G/2];break;case"bottomRight":v=!0,y=(D,G)=>[D,G],_=(D,G)=>[0,0];break;case"bottomMiddle":y=(D,G)=>[D/2,G],_=(D,G)=>[D/2,0];break;case"bottomLeft":v=!0,y=(D,G)=>[0,G],_=(D,G)=>[D,0];break;case"middleLeft":b=!0,y=(D,G)=>[0,G/2],_=(D,G)=>[D,G/2];break}const A=y(a,l),E=_(a,l);let k=f(...E);const C=le._round(r+k[0]),T=le._round(o+k[1]);let P=1,M=1,j,V;if(t.fromKeyboard)({deltaX:j,deltaY:V}=t);else{const{screenX:D,screenY:G}=t,[O,X]=c(this,Bo);[j,V]=this.screenToPageTranslation(D-O,G-X),c(this,Bo)[0]=D,c(this,Bo)[1]=G}if([j,V]=g(j/n,V/i),v){const D=Math.hypot(a,l);P=M=Math.max(Math.min(Math.hypot(E[0]-A[0]-j,E[1]-A[1]-V)/D,1/a,1/l),u/a,h/l)}else b?P=Math.max(u,Math.min(1,Math.abs(E[0]-A[0]-j)))/a:M=Math.max(h,Math.min(1,Math.abs(E[1]-A[1]-V)))/l;const N=le._round(a*P),$=le._round(l*M);k=f(..._(N,$));const Z=C-k[0],we=T-k[1];c(this,xs)||w(this,xs,[this.x,this.y,this.width,this.height]),this.width=N,this.height=$,this.x=Z,this.y=we,this.setDims(n*N,i*$),this.fixAndSetPosition(),this._onResizing()},SA=function(){var e;w(this,Si,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Oe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},AA=function(e,t,n){let r=.7*(n/t)+1-.7;if(r===1)return;const o=S(this,te,Qf).call(this,this.rotation),a=(C,T)=>[o[0]*C+o[2]*T,o[1]*C+o[3]*T],[l,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,g=le.MIN_SIZE/l,y=le.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),g/f,y/p);const _=le._round(f*r),v=le._round(p*r);if(_===f&&v===p)return;c(this,xs)||w(this,xs,[h,d,f,p]);const b=a(f/2,p/2),A=le._round(h+b[0]),E=le._round(d+b[1]),k=a(_/2,v/2);this.x=A-k[0],this.y=E-k[1],this.width=_,this.height=v,this.setDims(l*_,u*v),this.fixAndSetPosition(),this._onResizing()},EA=function(){var e;(e=c(this,Oe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),S(this,te,Zf).call(this)},ky=function(e){const{isMac:t}=Zt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},kA=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=u=>{i.abort(),w(this,Er,null),w(this,Ho,!1),this._uiManager.endDragSession()||S(this,te,ky).call(this,u),n&&this._onStopDragging()};t&&(w(this,Vl,e.clientX),w(this,Gl,e.clientY),w(this,Er,e.pointerId),w(this,zh,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==c(this,Er)){Os(u);return}const[p,g]=this.screenToPageTranslation(h-c(this,Vl),d-c(this,Gl));w(this,Vl,h),w(this,Gl,d),this._uiManager.dragSelectedEditors(p,g)},o),window.addEventListener("touchmove",Os,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,zh)&&(c(this,Go)||u.isPrimary)&&a(u),Os(u)},o));const l=u=>{if(!c(this,Er)||c(this,Er)===u.pointerId){a(u);return}Os(u)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},Cy=function(){if(c(this,kr)||!this.div)return;w(this,kr,new AbortController);const e=this._uiManager.combinedSignal(c(this,kr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},CA=function(e){le._resizerKeyboardManager.exec(this,e)},TA=function(e){var t;c(this,Ai)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,_t)&&S(this,te,Au).call(this)},PA=function(e){w(this,Uh,c(this,Ai)?e:"")},Ty=function(e){if(c(this,gn))for(const t of c(this,gn))t.tabIndex=e},Au=function(){w(this,Ai,!1),S(this,te,Ty).call(this,-1),S(this,te,Zf).call(this)},x(le,Vh),ee(le,"_l10n",null),ee(le,"_l10nResizer",null),ee(le,"_borderLineWidth",-1),ee(le,"_colorManager",new py),ee(le,"_zIndex",1),ee(le,"_telemetryTimeout",1e3);let Ve=le;class XN extends Ve{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const A_=3285377520,Hs=4294901760,jn=65535;class RA{constructor(e){this.h1=e?e&4294967295:A_,this.h2=e?e&4294967295:A_}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let y=0,_=e.length;y<_;y++){const v=e.charCodeAt(y);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&jn,g=f&jn;for(let y=0;y<i;y++)y&1?(a=o[y],a=a*d&Hs|a*p&jn,a=a<<15|a>>>17,a=a*f&Hs|a*g&jn,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[y],l=l*d&Hs|l*p&jn,l=l<<15|l>>>17,l=l*f&Hs|l*g&jn,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&Hs|a*p&jn,a=a<<15|a>>>17,a=a*f&Hs|a*g&jn,i&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Hs|e*36045&jn,t=t*4283543511&Hs|((t<<16|e>>>16)*2950163797&Hs)>>>16,e^=t>>>1,e=e*444984403&Hs|e*60499&jn,t=t*3301882366&Hs|((t<<16|e>>>16)*3120437893&Hs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Py=Object.freeze({map:null,hash:"",transfer:void 0});var Wo,qo,ft,fg,NA;class Lw{constructor(){x(this,fg);x(this,Wo,!1);x(this,qo,null);x(this,ft,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,ft).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,ft).get(e)}remove(e){if(c(this,ft).delete(e),c(this,ft).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,ft).values())if(t instanceof Ve)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,ft).get(e);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(t))n[r]!==o&&(i=!0,n[r]=o);else i=!0,c(this,ft).set(e,t);i&&S(this,fg,NA).call(this),t instanceof Ve&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,ft).has(e)}getAll(){return c(this,ft).size>0?kw(c(this,ft)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return c(this,ft).size}resetModified(){c(this,Wo)&&(w(this,Wo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new LA(this)}get serializable(){if(c(this,ft).size===0)return Py;const e=new Map,t=new RA,n=[],i=Object.create(null);let r=!1;for(const[o,a]of c(this,ft)){const l=a instanceof Ve?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Py}get editorStats(){let e=null;const t=new Map;for(const n of c(this,ft).values()){if(!(n instanceof Ve))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){w(this,qo,null)}get modifiedIds(){if(c(this,qo))return c(this,qo);const e=[];for(const t of c(this,ft).values())!(t instanceof Ve)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return w(this,qo,{ids:new Set(e),hash:e.join(",")})}}Wo=new WeakMap,qo=new WeakMap,ft=new WeakMap,fg=new WeakSet,NA=function(){c(this,Wo)||(w(this,Wo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Gh;class LA extends Lw{constructor(t){super();x(this,Gh);const{map:n,hash:i,transfer:r}=t.serializable,o=structuredClone(n,r?{transfer:r}:null);w(this,Gh,{map:o,hash:i,transfer:r})}get print(){Re("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Gh)}get modifiedIds(){return de(this,"modifiedIds",{ids:new Set,hash:""})}}Gh=new WeakMap;var Wl;class KN{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Wl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Wl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,Wl).has(e.loadedName))){if(tt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:r}=e,o=new FontFace(n,i,r);this.addNativeFontFace(o);try{await o.load(),c(this,Wl).add(n),t==null||t(e)}catch{ae(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Re("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw ae(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return de(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ut||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),de(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(tt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return de(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(E,k){return E.charCodeAt(k)<<24|E.charCodeAt(k+1)<<16|E.charCodeAt(k+2)<<8|E.charCodeAt(k+3)&255}function i(E,k,C,T){const P=E.substring(0,k),M=E.substring(k+C);return P+T+M}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function h(E,k){if(++u>30){ae("Load test font never loaded."),k();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(h.bind(null,E,k))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const g=16,y=1482184792;let _=n(f,g);for(r=0,o=d.length-3;r<o;r+=4)_=_-y+n(d,r)|0;r<d.length&&(_=_-y+n(d+"XXX",r)|0),f=i(f,g,4,MN(_));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(b);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const E of[e.loadedName,d]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=E,A.append(k)}this._document.body.append(A),h(d,()=>{A.remove(),t.complete()})}}Wl=new WeakMap;class YN{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${zN(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(o){ae(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}}const Tf={DATA:1,ERROR:2},Ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function E_(){}function os(s){if(s instanceof io||s instanceof ly||s instanceof gh||s instanceof __||s instanceof Jp||s instanceof Wm)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new io(s.message);case"InvalidPDFException":return new ly(s.message);case"MissingPDFException":return new gh(s.message);case"PasswordException":return new __(s.message,s.code);case"UnexpectedResponseException":return new Jp(s.message,s.status);case"UnknownErrorException":return new Wm(s.message,s.details)}return new Wm(s.message,s.toString())}var ql,nn,IA,MA,OA,ep;class Eu{constructor(e,t,n){x(this,nn);x(this,ql,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",S(this,nn,IA).bind(this),{signal:c(this,ql).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,l.postMessage({sourceName:o,targetName:a,stream:Ze.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{tt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Ze.CANCEL,streamId:r,reason:os(u)}),h.promise}},n)}destroy(){var e;(e=c(this,ql))==null||e.abort(),w(this,ql,null)}}ql=new WeakMap,nn=new WeakSet,IA=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){S(this,nn,OA).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Tf.DATA)i.resolve(e.data);else if(e.callback===Tf.ERROR)i.reject(os(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:n,targetName:i,callback:Tf.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:i,callback:Tf.ERROR,callbackId:e.callbackId,reason:os(o)})});return}if(e.streamId){S(this,nn,MA).call(this,e);return}t(e.data)},MA=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Ze.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ze.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){tt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ze.ERROR,streamId:t,reason:os(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ze.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ze.START_COMPLETE,streamId:t,reason:os(u)})})},OA=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Ze.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(os(e.reason));break;case Ze.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(os(e.reason));break;case Ze.PULL:if(!a){r.postMessage({sourceName:n,targetName:i,stream:Ze.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||E_).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ze.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ze.PULL_COMPLETE,streamId:t,reason:os(u)})});break;case Ze.ENQUEUE:if(tt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ze.CLOSE:if(tt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,nn,ep).call(this,o,t);break;case Ze.ERROR:tt(o,"error should have stream controller"),o.controller.error(os(e.reason)),S(this,nn,ep).call(this,o,t);break;case Ze.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(os(e.reason)),S(this,nn,ep).call(this,o,t);break;case Ze.CANCEL:if(!a)break;const l=os(e.reason);Promise.try(a.onCancel||E_,l).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ze.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ze.CANCEL_COMPLETE,streamId:t,reason:os(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},ep=async function(e,t){var n,i,r;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Wh;class jA{constructor({enableHWA:e=!1}){x(this,Wh,!1);w(this,Wh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Wh)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Re("Abstract method `_createCanvas` called.")}}Wh=new WeakMap;class JN extends jA{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class DA{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Re("Abstract method `_fetch` called.")}}class FA extends DA{async _fetch(e){const t=await tm(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):em(t)}}class $A{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(e=!1){}}var Xo,Xl,Ei,ki,jt,Ko,Yo,U,It,ku,sl,tp,nl,zA,Ry,il,Cu,Tu,Ny,Pu;class QN extends $A{constructor({docId:t,ownerDocument:n=globalThis.document}){super();x(this,U);x(this,Xo);x(this,Xl);x(this,Ei);x(this,ki);x(this,jt);x(this,Ko);x(this,Yo,0);w(this,ki,t),w(this,jt,n)}addFilter(t){if(!t)return"none";let n=c(this,U,It).get(t);if(n)return n;const[i,r,o]=S(this,U,tp).call(this,t),a=t.length===1?i:`${i}${r}${o}`;if(n=c(this,U,It).get(a),n)return c(this,U,It).set(t,n),n;const l=`g_${c(this,ki)}_transfer_map_${Vt(this,Yo)._++}`,u=S(this,U,nl).call(this,l);c(this,U,It).set(t,u),c(this,U,It).set(a,u);const h=S(this,U,il).call(this,l);return S(this,U,Tu).call(this,i,r,o,h),u}addHCMFilter(t,n){var g;const i=`${t}-${n}`,r="base";let o=c(this,U,ku).get(r);if((o==null?void 0:o.key)===i||(o?((g=o.filter)==null||g.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},c(this,U,ku).set(r,o)),!t||!n))return o.url;const a=S(this,U,Pu).call(this,t);t=K.makeHexColor(...a);const l=S(this,U,Pu).call(this,n);if(n=K.makeHexColor(...l),c(this,U,sl).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const u=new Array(256);for(let y=0;y<=255;y++){const _=y/255;u[y]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,ki)}_hcm_filter`,f=o.filter=S(this,U,il).call(this,d);S(this,U,Tu).call(this,h,h,h,f),S(this,U,Ry).call(this,f);const p=(y,_)=>{const v=a[y]/255,b=l[y]/255,A=new Array(_+1);for(let E=0;E<=_;E++)A[E]=v+E/_*(b-v);return A.join(",")};return S(this,U,Tu).call(this,p(0,5),p(1,5),p(2,5),f),o.url=S(this,U,nl).call(this,d),o.url}addAlphaFilter(t){let n=c(this,U,It).get(t);if(n)return n;const[i]=S(this,U,tp).call(this,[t]),r=`alpha_${i}`;if(n=c(this,U,It).get(r),n)return c(this,U,It).set(t,n),n;const o=`g_${c(this,ki)}_alpha_map_${Vt(this,Yo)._++}`,a=S(this,U,nl).call(this,o);c(this,U,It).set(t,a),c(this,U,It).set(r,a);const l=S(this,U,il).call(this,o);return S(this,U,Ny).call(this,i,l),a}addLuminosityFilter(t){let n=c(this,U,It).get(t||"luminosity");if(n)return n;let i,r;if(t?([i]=S(this,U,tp).call(this,[t]),r=`luminosity_${i}`):r="luminosity",n=c(this,U,It).get(r),n)return c(this,U,It).set(t,n),n;const o=`g_${c(this,ki)}_luminosity_map_${Vt(this,Yo)._++}`,a=S(this,U,nl).call(this,o);c(this,U,It).set(t,a),c(this,U,It).set(r,a);const l=S(this,U,il).call(this,o);return S(this,U,zA).call(this,l),t&&S(this,U,Ny).call(this,i,l),a}addHighlightHCMFilter(t,n,i,r,o){var b;const a=`${n}-${i}-${r}-${o}`;let l=c(this,U,ku).get(t);if((l==null?void 0:l.key)===a||(l?((b=l.filter)==null||b.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,U,ku).set(t,l)),!n||!i))return l.url;const[u,h]=[n,i].map(S(this,U,Pu).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,g]=[r,o].map(S(this,U,Pu).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),c(this,U,sl).style.color="";const y=(A,E,k)=>{const C=new Array(256),T=(f-d)/k,P=A/255,M=(E-A)/(255*k);let j=0;for(let V=0;V<=k;V++){const N=Math.round(d+V*T),$=P+V*M;for(let Z=j;Z<=N;Z++)C[Z]=$;j=N+1}for(let V=j;V<256;V++)C[V]=C[j-1];return C.join(",")},_=`g_${c(this,ki)}_hcm_${t}_filter`,v=l.filter=S(this,U,il).call(this,_);return S(this,U,Ry).call(this,v),S(this,U,Tu).call(this,y(p[0],g[0],5),y(p[1],g[1],5),y(p[2],g[2],5),v),l.url=S(this,U,nl).call(this,_),l.url}destroy(t=!1){var n,i,r,o;t&&((n=c(this,Ko))!=null&&n.size)||((i=c(this,Ei))==null||i.parentNode.parentNode.remove(),w(this,Ei,null),(r=c(this,Xl))==null||r.clear(),w(this,Xl,null),(o=c(this,Ko))==null||o.clear(),w(this,Ko,null),w(this,Yo,0))}}Xo=new WeakMap,Xl=new WeakMap,Ei=new WeakMap,ki=new WeakMap,jt=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,U=new WeakSet,It=function(){return c(this,Xl)||w(this,Xl,new Map)},ku=function(){return c(this,Ko)||w(this,Ko,new Map)},sl=function(){if(!c(this,Ei)){const t=c(this,jt).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=c(this,jt).createElementNS(ui,"svg");i.setAttribute("width",0),i.setAttribute("height",0),w(this,Ei,c(this,jt).createElementNS(ui,"defs")),t.append(i),i.append(c(this,Ei)),c(this,jt).body.append(t)}return c(this,Ei)},tp=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[n,i,r]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=n[u]/255,a[u]=i[u]/255,l[u]=r[u]/255;return[o.join(","),a.join(","),l.join(",")]},nl=function(t){if(c(this,Xo)===void 0){w(this,Xo,"");const n=c(this,jt).URL;n!==c(this,jt).baseURI&&(sm(n)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,Xo,n.split("#",1)[0]))}return`url(${c(this,Xo)}#${t})`},zA=function(t){const n=c(this,jt).createElementNS(ui,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Ry=function(t){const n=c(this,jt).createElementNS(ui,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},il=function(t){const n=c(this,jt).createElementNS(ui,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,U,sl).append(n),n},Cu=function(t,n,i){const r=c(this,jt).createElementNS(ui,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},Tu=function(t,n,i,r){const o=c(this,jt).createElementNS(ui,"feComponentTransfer");r.append(o),S(this,U,Cu).call(this,o,"feFuncR",t),S(this,U,Cu).call(this,o,"feFuncG",n),S(this,U,Cu).call(this,o,"feFuncB",i)},Ny=function(t,n){const i=c(this,jt).createElementNS(ui,"feComponentTransfer");n.append(i),S(this,U,Cu).call(this,i,"feFuncA",t)},Pu=function(t){return c(this,U,sl).style.color=t,Nw(getComputedStyle(c(this,U,sl)).getPropertyValue("color"))};class UA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Re("Abstract method `_fetch` called.")}}class BA extends UA{async _fetch(e){const t=await tm(e,"arraybuffer");return new Uint8Array(t)}}Ut&&ae("Please use the `legacy` build in Node.js environments.");async function HA(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class ZN extends $A{}class eL extends jA{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class tL extends DA{async _fetch(e){return HA(e)}}class sL extends UA{async _fetch(e){return HA(e)}}const $t={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ly(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),s.clip(i)}class Iw{getPattern(){Re("Abstract method `getPattern` called.")}}class nL extends Iw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===$t.STROKE||i===$t.FILL){const o=t.current.getClippedPathBoundingBox(i,Fe(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=K.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Ly(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else Ly(e,this._bbox),r=this._createGradient(e);return r}}function Km(s,e,t,n,i,r,o,a){const l=e.coords,u=e.colors,h=s.data,d=s.width*4;let f;l[t+1]>l[n+1]&&(f=t,t=n,n=f,f=r,r=o,o=f),l[n+1]>l[i+1]&&(f=n,n=i,i=f,f=o,o=a,a=f),l[t+1]>l[n+1]&&(f=t,t=n,n=f,f=r,r=o,o=f);const p=(l[t]+e.offsetX)*e.scaleX,g=(l[t+1]+e.offsetY)*e.scaleY,y=(l[n]+e.offsetX)*e.scaleX,_=(l[n+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,b=(l[i+1]+e.offsetY)*e.scaleY;if(g>=b)return;const A=u[r],E=u[r+1],k=u[r+2],C=u[o],T=u[o+1],P=u[o+2],M=u[a],j=u[a+1],V=u[a+2],N=Math.round(g),$=Math.round(b);let Z,we,D,G,O,X,Y,ge;for(let ue=N;ue<=$;ue++){if(ue<_){const me=ue<g?0:(g-ue)/(g-_);Z=p-(p-y)*me,we=A-(A-C)*me,D=E-(E-T)*me,G=k-(k-P)*me}else{let me;ue>b?me=1:_===b?me=0:me=(_-ue)/(_-b),Z=y-(y-v)*me,we=C-(C-M)*me,D=T-(T-j)*me,G=P-(P-V)*me}let Ae;ue<g?Ae=0:ue>b?Ae=1:Ae=(g-ue)/(g-b),O=p-(p-v)*Ae,X=A-(A-M)*Ae,Y=E-(E-j)*Ae,ge=k-(k-V)*Ae;const Pt=Math.round(Math.min(Z,O)),z=Math.round(Math.max(Z,O));let ne=d*ue+Pt*4;for(let me=Pt;me<=z;me++)Ae=(Z-me)/(Z-O),Ae<0?Ae=0:Ae>1&&(Ae=1),h[ne++]=we-(we-X)*Ae|0,h[ne++]=D-(D-Y)*Ae|0,h[ne++]=G-(G-ge)*Ae|0,h[ne++]=255}}function iL(s,e,t){const n=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(n.length/a)-1,u=a-1;for(r=0;r<l;r++){let h=r*a;for(let d=0;d<u;d++,h++)Km(s,t,n[h],n[h+1],n[h+a],i[h],i[h+1],i[h+a]),Km(s,t,n[h+a+1],n[h+1],n[h+a],i[h+a+1],i[h+1],i[h+a])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)Km(s,t,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class rL extends Iw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,g=h/f,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/g},_=d+2*2,v=f+2*2,b=n.getCanvas("mesh",_,v),A=b.context,E=A.createImageData(d,f);if(t){const C=E.data;for(let T=0,P=C.length;T<P;T+=4)C[T]=t[0],C[T+1]=t[1],C[T+2]=t[2],C[T+3]=255}for(const C of this._figures)iL(E,C,y);return A.putImageData(E,2,2),{canvas:b.canvas,offsetX:a-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}getPattern(e,t,n,i){Ly(e,this._bbox);let r;if(i===$t.SHADING)r=K.singularValueDecompose2dScale(Fe(e));else if(r=K.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=K.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,i===$t.SHADING?null:this._background,t.cachedCanvases);return i!==$t.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class oL extends Iw{getPattern(){return"hotpink"}}function aL(s){switch(s[0]){case"RadialAxial":return new nL(s);case"Mesh":return new rL(s);case"Dummy":return new oL}throw new Error(`Unknown IR type: ${s[0]}`)}const k_={COLORED:1,UNCOLORED:2},pg=class pg{constructor(e,t,n,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),Zg("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],g=f-h,y=p-d,_=K.singularValueDecompose2dScale(this.matrix),v=K.singularValueDecompose2dScale(this.baseTransform),b=_[0]*v[0],A=_[1]*v[1];let E=g,k=y,C=!1,T=!1;const P=Math.ceil(l*b),M=Math.ceil(u*A),j=Math.ceil(g*b),V=Math.ceil(y*A);P>=j?E=l:C=!0,M>=V?k=u:T=!0;const N=this.getSizeAndScale(E,this.ctx.canvas.width,b),$=this.getSizeAndScale(k,this.ctx.canvas.height,A),Z=e.cachedCanvases.getCanvas("pattern",N.size,$.size),we=Z.context,D=a.createCanvasGraphics(we);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,i,o),we.translate(-N.scale*h,-$.scale*d),D.transform(N.scale,0,0,$.scale,0,0),we.save(),this.clipBbox(D,h,d,f,p),D.baseTransform=Fe(D.ctx),D.executeOperatorList(n),D.endDrawing(),we.restore(),C||T){const G=Z.canvas;C&&(E=l),T&&(k=u);const O=this.getSizeAndScale(E,this.ctx.canvas.width,b),X=this.getSizeAndScale(k,this.ctx.canvas.height,A),Y=O.size,ge=X.size,ue=e.cachedCanvases.getCanvas("pattern-workaround",Y,ge),Ae=ue.context,Pt=C?Math.floor(g/l):0,z=T?Math.floor(y/u):0;for(let ne=0;ne<=Pt;ne++)for(let me=0;me<=z;me++)Ae.drawImage(G,Y*ne,ge*me,Y,ge,0,0,Y,ge);return{canvas:ue.canvas,scaleX:O.scale,scaleY:X.scale,offsetX:h,offsetY:d}}return{canvas:Z.canvas,scaleX:N.scale,scaleY:$.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){const i=Math.max(pg.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const o=i-t,a=r-n;e.ctx.rect(t,n,o,a),e.current.updateRectMinMax(Fe(e.ctx),[t,n,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case k_.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case k_.UNCOLORED:const a=K.makeHexColor(n[0],n[1],n[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new IN(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,i){let r=n;i!==$t.SHADING&&(r=K.transform(r,t.baseTransform),this.matrix&&(r=K.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};ee(pg,"MAX_PATTERN_SIZE",3e3);let Iy=pg;function lL({src:s,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Zt.isLittleEndian?4278190080:255,[l,u]=o?[r,a]:[a,r],h=n>>3,d=n&7,f=s.length;t=new Uint32Array(t.buffer);let p=0;for(let g=0;g<i;g++){for(const _=e+h;e<_;e++){const v=e<f?s[e]:255;t[p++]=v&128?u:l,t[p++]=v&64?u:l,t[p++]=v&32?u:l,t[p++]=v&16?u:l,t[p++]=v&8?u:l,t[p++]=v&4?u:l,t[p++]=v&2?u:l,t[p++]=v&1?u:l}if(d===0)continue;const y=e<f?s[e++]:255;for(let _=0;_<d;_++)t[p++]=y&1<<7-_?u:l}return{srcPos:e,destPos:p}}const C_=16,T_=100,cL=15,P_=10,R_=1e3,hs=16;function uL(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},s.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},s.transform=function(n,i,r,o,a,l){e.transform(n,i,r,o,a,l),this.__originalTransform(n,i,r,o,a,l)},s.setTransform=function(n,i,r,o,a,l){e.setTransform(n,i,r,o,a,l),this.__originalSetTransform(n,i,r,o,a,l)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){e.rotate(n),this.__originalRotate(n)},s.clip=function(n){e.clip(n),this.__originalClip(n)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,i,r,o,a){e.bezierCurveTo(t,n,i,r,o,a),this.__originalBezierCurveTo(t,n,i,r,o,a)},s.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class hL{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Pf(s,e,t,n,i,r,o,a,l,u){const[h,d,f,p,g,y]=Fe(s);if(d===0&&f===0){const b=o*h+g,A=Math.round(b),E=a*p+y,k=Math.round(E),C=(o+l)*h+g,T=Math.abs(Math.round(C)-A)||1,P=(a+u)*p+y,M=Math.abs(Math.round(P)-k)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(p),A,k),s.drawImage(e,t,n,i,r,0,0,T,M),s.setTransform(h,d,f,p,g,y),[T,M]}if(h===0&&p===0){const b=a*f+g,A=Math.round(b),E=o*d+y,k=Math.round(E),C=(a+u)*f+g,T=Math.abs(Math.round(C)-A)||1,P=(o+l)*d+y,M=Math.abs(Math.round(P)-k)||1;return s.setTransform(0,Math.sign(d),Math.sign(f),0,A,k),s.drawImage(e,t,n,i,r,0,0,M,T),s.setTransform(h,d,f,p,g,y),[M,T]}s.drawImage(e,t,n,i,r,o,a,l,u);const _=Math.hypot(h,d),v=Math.hypot(f,p);return[_*l,v*u]}function dL(s){const{width:e,height:t}=s;if(e>R_||t>R_)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,l,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const v of s.data){let b=128;for(;b>0;)d[f++]=v&b?0:255,b>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(o[l]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[l]=2,++p),a=1;a<t;a++){f=a*h,u=a*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let v=(d[f]?4:0)+(d[f-h]?8:0);for(l=1;l<e;l++)v=(v>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[v]&&(o[u+l]=i[v],++p),f++;if(d[f-h]!==d[f]&&(o[u+l]=d[f]?2:4,++p),p>n)return null}for(f=h*(t-1),u=a*r,d[f]!==0&&(o[u]=8,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(o[u+l]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+l]=4,++p),p>n)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),y=new Path2D;for(a=0;p&&a<=t;a++){let v=a*r;const b=v+e;for(;v<b&&!o[v];)v++;if(v===b)continue;y.moveTo(v%r,a);const A=v;let E=o[v];do{const k=g[E];do v+=k;while(!o[v]);const C=o[v];C!==5&&C!==10?(E=C,o[v]=0):(E=C&51*E>>4,o[v]&=E>>2|E<<2),y.lineTo(v%r,v/r|0),o[v]||--p}while(A!==v);--a}return d=null,o=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(y),v.beginPath(),v.restore()}}class N_{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ZS,this.textMatrixScale=1,this.fontMatrix=ay,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Lt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=K.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=K.applyTransform(t,e),i=K.applyTransform(t.slice(2),e),r=K.applyTransform([t[0],t[3]],e),o=K.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],o[1])}updateScalingPathMinMax(e,t){K.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,r,o,a,l,u,h){const d=K.bezierBoundingBox(t,n,i,r,o,a,l,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=$t.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===$t.STROKE){t||Re("Stroke bounding box must include transform.");const i=K.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const e=K.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=$t.FILL,t=null){return K.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function L_(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%hs,r=(t-i)/hs,o=i===0?r:r+1,a=s.createImageData(n,hs);let l=0,u;const h=e.data,d=a.data;let f,p,g,y;if(e.kind===Gf.GRAYSCALE_1BPP){const _=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),b=v.length,A=n+7>>3,E=4294967295,k=Zt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<r?hs:i,u=0,p=0;p<g;p++){const C=_-l;let T=0;const P=C>A?n:C*8-7,M=P&-8;let j=0,V=0;for(;T<M;T+=8)V=h[l++],v[u++]=V&128?E:k,v[u++]=V&64?E:k,v[u++]=V&32?E:k,v[u++]=V&16?E:k,v[u++]=V&8?E:k,v[u++]=V&4?E:k,v[u++]=V&2?E:k,v[u++]=V&1?E:k;for(;T<P;T++)j===0&&(V=h[l++],j=128),v[u++]=V&j?E:k,j>>=1}for(;u<b;)v[u++]=0;s.putImageData(a,0,f*hs)}}else if(e.kind===Gf.RGBA_32BPP){for(p=0,y=n*hs*4,f=0;f<r;f++)d.set(h.subarray(l,l+y)),l+=y,s.putImageData(a,0,p),p+=hs;f<o&&(y=n*i*4,d.set(h.subarray(l,l+y)),s.putImageData(a,0,p))}else if(e.kind===Gf.RGB_24BPP)for(g=hs,y=n*g,f=0;f<o;f++){for(f>=r&&(g=i,y=n*g),u=0,p=y;p--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;s.putImageData(a,0,f*hs)}else throw new Error(`bad image kind: ${e.kind}`)}function I_(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%hs,r=(t-i)/hs,o=i===0?r:r+1,a=s.createImageData(n,hs);let l=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?hs:i;({srcPos:l}=lL({src:u,srcPos:l,dest:h,width:n,height:f,nonBlackColor:0})),s.putImageData(a,0,d*hs)}}function du(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Rf(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!Ut){const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}}function M_(s,e){if(e)return!0;const t=K.singularValueDecompose2dScale(s);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ro.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const fL=["butt","round","square"],pL=["miter","round","bevel"],gL={},O_={};var Ln,My,Oy,jy;const Bw=class Bw{constructor(e,t,n,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,u){x(this,Ln);this.ctx=e,this.current=new N_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new hL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,n){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Fe(this.compositeCtx))}this.ctx.save(),Rf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Fe(this.ctx)}executeOperatorList(e,t,n,i){const r=e.argsArray,o=e.fnArray;let a=t||0;const l=r.length;if(l===a)return a;const u=l-a>P_&&typeof n=="function",h=u?Date.now()+cL:0;let d=0;const f=this.commonObjs,p=this.objs;let g;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(g=o[a],g!==hn.dependency)this[g].apply(this,r[a]);else for(const y of r[a]){const _=y.startsWith("g_")?f:p;if(!_.has(y))return _.get(y,n),a}if(a++,a===l)return a;if(u&&++d>P_){if(Date.now()>h)return n(),a;d=0}}}endDrawing(){S(this,Ln,My).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),S(this,Ln,Oy).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=n,l=i,u="prescale1",h,d;for(;r>2&&a>1||o>2&&l>1;){let f=a,p=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,l,0,0,f,p),e=h.canvas,a=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,r=this.current.fillColor,o=this.current.patternFill,a=Fe(t);let l,u,h,d;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(P),l||(l=new Map,this._cachedBitmapsMap.set(P,l));const M=l.get(u);if(M&&!o){const j=Math.round(Math.min(a[0],a[2])+a[4]),V=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:j,offsetY:V}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),I_(d.context,e));let f=K.transform(a,[1/n,0,0,-1/i,0,0]);f=K.transform(f,[1,0,0,1,0,-i]);const[p,g,y,_]=K.getAxialAlignedBoundingBox([0,0,n,i],f),v=Math.round(y-p)||1,b=Math.round(_-g)||1,A=this.cachedCanvases.getCanvas("fillCanvas",v,b),E=A.context,k=p,C=g;E.translate(-k,-C),E.transform(...f),h||(h=this._scaleImage(d.canvas,On(E)),h=h.img,l&&o&&l.set(u,h)),E.imageSmoothingEnabled=M_(Fe(E),e.interpolate),Pf(E,h,0,0,h.width,h.height,0,0,n,i),E.globalCompositeOperation="source-in";const T=K.transform(On(E),[1,0,0,1,-k,-C]);return E.fillStyle=o?r.getPattern(t,this,T,$t.FILL):r,E.fillRect(0,0,n,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,A.canvas)),{canvas:A.canvas,offsetX:Math.round(k),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=fL[e]}setLineJoin(e){this.ctx.lineJoin=pL[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Fe(this.suspendedCtx)),du(this.suspendedCtx,r),uL(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),du(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,n,a,l,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,o,a,l,u,h,d){let f=e.canvas,p=l-h,g=u-d;if(o){const _=K.makeHexColor(...o);if(p<0||g<0||p+n>f.width||g+i>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",n,i),b=v.context;b.drawImage(f,-p,-g),b.globalCompositeOperation="destination-atop",b.fillStyle=_,b.fillRect(0,0,n,i),b.globalCompositeOperation="source-over",f=v.canvas,p=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,g,n,i),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=_,e.fillRect(p,g,n,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(l,u,n,i),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,p,g,n,i,l,u,n,i),t.restore()}save(){this.inSMaskMode?(du(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),du(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,r,o){this.ctx.transform(e,t,n,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,r=this.current;let o=r.x,a=r.y,l,u;const h=Fe(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?n.slice(0):null;for(let p=0,g=0,y=e.length;p<y;p++)switch(e[p]|0){case hn.rectangle:o=t[g++],a=t[g++];const _=t[g++],v=t[g++],b=o+_,A=a+v;i.moveTo(o,a),_===0||v===0?i.lineTo(b,A):(i.lineTo(b,a),i.lineTo(b,A),i.lineTo(o,A)),d||r.updateRectMinMax(h,[o,a,b,A]),i.closePath();break;case hn.moveTo:o=t[g++],a=t[g++],i.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case hn.lineTo:o=t[g++],a=t[g++],i.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case hn.curveTo:l=o,u=a,o=t[g+4],a=t[g+5],i.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],o,a),r.updateCurvePathMinMax(h,l,u,t[g],t[g+1],t[g+2],t[g+3],o,a,f),g+=6;break;case hn.curveTo2:l=o,u=a,i.bezierCurveTo(o,a,t[g],t[g+1],t[g+2],t[g+3]),r.updateCurvePathMinMax(h,l,u,o,a,t[g],t[g+1],t[g+2],t[g+3],f),o=t[g+2],a=t[g+3],g+=4;break;case hn.curveTo3:l=o,u=a,o=t[g+2],a=t[g+3],i.bezierCurveTo(t[g],t[g+1],o,a,o,a),r.updateCurvePathMinMax(h,l,u,t[g],t[g+1],o,a,o,a,f),g+=4;break;case hn.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,On(t),$t.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=n.getPattern(t,this,On(t),$t.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=gL}eoClip(){this.pendingClip=O_}beginText(){this.current.textMatrix=ZS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:u}of e)n.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(l,-l));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||ay,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ae("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const r=n.loadedName||"sans-serif",o=((h=n.systemFontInfo)==null?void 0:h.css)||`"${r}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const l=n.italic?"italic":"normal";let u=t;t<C_?u=C_:t>T_&&(u=T_),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,r,o){this.current.textMatrix=[e,t,n,i,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,r){const o=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=u&Lt.FILL_STROKE_MASK,f=!!(u&Lt.ADD_TO_PATH_FLAG),p=a.patternFill&&!l.missingFile,g=a.patternStroke&&!l.missingFile;let y;if((l.disableFontFace||f||p||g)&&(y=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p||g){if(o.save(),o.translate(t,n),o.scale(h,-h),d===Lt.FILL||d===Lt.FILL_STROKE)if(i){const _=o.getTransform();o.setTransform(...i),o.fill(S(this,Ln,jy).call(this,y,_,i))}else o.fill(y);if(d===Lt.STROKE||d===Lt.FILL_STROKE)if(r){const _=o.getTransform();o.setTransform(...r),o.stroke(S(this,Ln,jy).call(this,y,_,r))}else o.lineWidth/=h,o.stroke(y);o.restore()}else(d===Lt.FILL||d===Lt.FILL_STROKE)&&o.fillText(e,t,n),(d===Lt.STROKE||d===Lt.FILL_STROKE)&&o.strokeText(e,t,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Fe(o),x:t,y:n,fontSize:h,path:y})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return de(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=n.vertical,p=f?1:-1,g=n.defaultVMetrics,y=i*t.fontMatrix[0],_=t.textRenderingMode===Lt.FILL&&!n.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let v,b;if(t.patternFill){r.save();const T=t.fillColor.getPattern(r,this,On(r),$t.FILL);v=Fe(r),r.restore(),r.fillStyle=T}if(t.patternStroke){r.save();const T=t.strokeColor.getPattern(r,this,On(r),$t.STROKE);b=Fe(r),r.restore(),r.strokeStyle=T}let A=t.lineWidth;const E=t.textMatrixScale;if(E===0||A===0){const T=t.textRenderingMode&Lt.FILL_STROKE_MASK;(T===Lt.STROKE||T===Lt.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=E;if(o!==1&&(r.scale(o,o),A/=o),r.lineWidth=A,n.isInvalidPDFjsFont){const T=[];let P=0;for(const M of e)T.push(M.unicode),P+=M.width;r.fillText(T.join(""),0,0),t.x+=P*y*h,r.restore(),this.compose();return}let k=0,C;for(C=0;C<d;++C){const T=e[C];if(typeof T=="number"){k+=p*T*i/1e3;continue}let P=!1;const M=(T.isSpace?l:0)+a,j=T.fontChar,V=T.accent;let N,$,Z=T.width;if(f){const D=T.vmetric||g,G=-(T.vmetric?D[1]:Z*.5)*y,O=D[2]*y;Z=D?-D[0]:Z,N=G/o,$=(k+O)/o}else N=k/o,$=0;if(n.remeasure&&Z>0){const D=r.measureText(j).width*1e3/i*o;if(Z<D&&this.isFontSubpixelAAEnabled){const G=Z/D;P=!0,r.save(),r.scale(G,1),N/=G}else Z!==D&&(N+=(Z-D)/2e3*i/o)}if(this.contentVisible&&(T.isInFont||n.missingFile)){if(_&&!V)r.fillText(j,N,$);else if(this.paintChar(j,N,$,v,b),V){const D=N+i*V.offset.x/o,G=$-i*V.offset.y/o;this.paintChar(V.fontChar,D,G,v,b)}}const we=f?Z*y-M*u:Z*y+M*u;k+=we,P&&r.restore()}f?t.y-=k:t.x+=k*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,r=n.fontSize,o=n.fontDirection,a=i.vertical?1:-1,l=n.charSpacing,u=n.wordSpacing,h=n.textHScale*o,d=n.fontMatrix||ay,f=e.length,p=n.textRenderingMode===Lt.INVISIBLE;let g,y,_,v;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(h,o),g=0;g<f;++g){if(y=e[g],typeof y=="number"){v=a*y*r/1e3,this.ctx.translate(v,0),n.x+=v*h;continue}const b=(y.isSpace?u:0)+l,A=i.charProcOperatorList[y.operatorListId];if(!A){ae(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(A),this.restore()),_=K.applyTransform([y.width,0],d)[0]*r+b,t.translate(_,0),n.x+=_*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,r,o){this.ctx.rect(n,i,r-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],i=this.baseTransform||Fe(this.ctx),r={createCanvasGraphics:o=>new Bw(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Iy(e,n,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=K.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=K.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=aL(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,On(t),$t.SHADING);const i=On(t);if(i){const{width:r,height:o}=t.canvas,[a,l,u,h]=K.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(a,l,u-a,h-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Re("Should not call beginInlineImage")}beginImageData(){Re("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Fe(this.ctx),t)){const n=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],n,i),this.current.updateRectMinMax(Fe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Zg("TODO: Support non-isolated groups."),e.knockout&&ae("Knockout groups not supported.");const n=Fe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=K.getAxialAlignedBoundingBox(e.bbox,Fe(t));const r=[0,0,t.canvas.width,t.canvas.height];i=K.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,u),f=d.context;f.translate(-o,-a),f.transform(...n),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),du(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Fe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=K.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,n,i,r){if(S(this,Ln,My).call(this),Rf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,u]=K.singularValueDecompose2dScale(Fe(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),Rf(this.ctx)}else Rf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new N_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,Ln,Oy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=dL(e)),i.compiled)){i.compiled(n);return}const r=this._createMaskCanvas(e),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,i=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=Fe(a);a.transform(t,n,i,r,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,d=o.length;h<d;h+=2){const f=K.transform(l,[t,n,i,r,o[h],o[h+1]]),[p,g]=K.applyTransform([0,0],f);a.drawImage(u.canvas,p,g)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:o,width:a,height:l,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=h.context;d.save();const f=this.getObject(o,r);I_(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,On(t),$t.FILL):n,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Pf(t,h.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ae("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let u=0,h=i.length;u<h;u+=2)l.push({transform:[t,0,0,n,i[u],i[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!Ut){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/n);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,n).context;L_(l,e),r=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(r,On(i));i.imageSmoothingEnabled=M_(Fe(i),e.interpolate),Pf(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;L_(l,e),i=this.applyTransferMapsToCanvas(l)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),Pf(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===O_?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Fe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let o,a;if(n===0&&i===0){const l=Math.abs(t),u=Math.abs(r);if(l===u)if(e===0)o=a=1/l;else{const h=l*e;o=a=h<1?1/h:1}else if(e===0)o=1/l,a=1/u;else{const h=l*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const l=Math.abs(t*r-n*i),u=Math.hypot(t,n),h=Math.hypot(i,r);if(e===0)o=h/l,a=u/l;else{const d=e*l;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=n||1,i===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,r),o.length>0){const a=Math.max(i,r);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ln=new WeakSet,My=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Oy=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},jy=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Rl=Bw;for(const s in hn)Rl.prototype[s]!==void 0&&(Rl.prototype[hn[s]]=Rl.prototype[s]);var qh,Xh;class Hi{static get workerPort(){return c(this,qh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");w(this,qh,e)}static get workerSrc(){return c(this,Xh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");w(this,Xh,e)}}qh=new WeakMap,Xh=new WeakMap,x(Hi,qh,null),x(Hi,Xh,"");var Jo,Kh;class mL{constructor({parsedData:e,rawData:t}){x(this,Jo);x(this,Kh);w(this,Jo,e),w(this,Kh,t)}getRaw(){return c(this,Kh)}get(e){return c(this,Jo).get(e)??null}getAll(){return kw(c(this,Jo))}has(e){return c(this,Jo).has(e)}}Jo=new WeakMap,Kh=new WeakMap;const rl=Symbol("INTERNAL");var Yh,Jh,Qh,Kl;class yL{constructor(e,{name:t,intent:n,usage:i,rbGroups:r}){x(this,Yh,!1);x(this,Jh,!1);x(this,Qh,!1);x(this,Kl,!0);w(this,Yh,!!(e&Ls.DISPLAY)),w(this,Jh,!!(e&Ls.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(c(this,Qh))return c(this,Kl);if(!c(this,Kl))return!1;const{print:e,view:t}=this.usage;return c(this,Yh)?(t==null?void 0:t.viewState)!=="OFF":c(this,Jh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==rl&&Re("Internal method `_setVisible` called."),w(this,Qh,n),w(this,Kl,t)}}Yh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,Kl=new WeakMap;var Cr,ke,Yl,Jl,Zh,Dy;class vL{constructor(e,t=Ls.DISPLAY){x(this,Zh);x(this,Cr,null);x(this,ke,new Map);x(this,Yl,null);x(this,Jl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,w(this,Jl,e.order);for(const n of e.groups)c(this,ke).set(n.id,new yL(t,n));if(e.baseState==="OFF")for(const n of c(this,ke).values())n._setVisible(rl,!1);for(const n of e.on)c(this,ke).get(n)._setVisible(rl,!0);for(const n of e.off)c(this,ke).get(n)._setVisible(rl,!1);w(this,Yl,this.getHash())}}isVisible(e){if(c(this,ke).size===0)return!0;if(!e)return Zg("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,ke).has(e.id)?c(this,ke).get(e.id).visible:(ae(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return S(this,Zh,Dy).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,ke).has(t))return ae(`Optional content group not found: ${t}`),!0;if(c(this,ke).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,ke).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!c(this,ke).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,ke).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!c(this,ke).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,ke).has(t))return ae(`Optional content group not found: ${t}`),!0;if(c(this,ke).get(t).visible)return!1}return!0}return ae(`Unknown optional content policy ${e.policy}.`),!0}return ae(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var r;const i=c(this,ke).get(e);if(!i){ae(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((r=c(this,ke).get(a))==null||r._setVisible(rl,!1,!0));i._setVisible(rl,!!t,!0),w(this,Cr,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=c(this,ke).get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}w(this,Cr,null)}get hasInitialVisibility(){return c(this,Yl)===null||this.getHash()===c(this,Yl)}getOrder(){return c(this,ke).size?c(this,Jl)?c(this,Jl).slice():[...c(this,ke).keys()]:null}getGroups(){return c(this,ke).size>0?kw(c(this,ke)):null}getGroup(e){return c(this,ke).get(e)||null}getHash(){if(c(this,Cr)!==null)return c(this,Cr);const e=new RA;for(const[t,n]of c(this,ke))e.update(`${t}:${n.visible}`);return w(this,Cr,e.hexdigest())}}Cr=new WeakMap,ke=new WeakMap,Yl=new WeakMap,Jl=new WeakMap,Zh=new WeakSet,Dy=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=S(this,Zh,Dy).call(this,r);else if(c(this,ke).has(r))o=c(this,ke).get(r).visible;else return ae(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class wL{constructor(e,{disableRange:t=!1,disableStream:n=!1}){tt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});tt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,r;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){tt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new bL(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new _L(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class bL{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Pw(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _L{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xL(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let h=a(t);return h=unescape(h),h=l(h),h=u(h),r(h)}if(t=o(s),t){const h=u(t);return r(h)}if(t=n("filename","i").exec(s),t){t=t[1];let h=a(t);return h=u(h),r(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=em(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,y,_,v]=f;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[_,v]}const g=[];for(let y=0;y<d.length&&y in d;++y){let[_,v]=d[y];v=a(v),_&&(v=unescape(v),y===0&&(v=l(v))),g.push(v)}return g.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),g=h.slice(d+1).replace(/^[^']*'/,"");return i(f,g)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,_){return String.fromCharCode(parseInt(_,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function VA(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function nm(s){try{return new URL(s).origin}catch{}return null}function GA({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function WA(s){const e=s.get("Content-Disposition");if(e){let t=xL(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Pw(t))return t}return null}function im(s,e){return s===404||s===0&&e.startsWith("file:")?new gh('Missing PDF "'+e+'".'):new Jp(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s)}function qA(s){return s===200||s===206}function XA(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function KA(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(ae(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class j_{constructor(e){ee(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=VA(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return tt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new SL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new AL(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class SL{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,XA(n,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=nm(r.url),!qA(r.status))throw im(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=GA({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=WA(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new io("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:KA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class AL{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const o=i.url;fetch(o,XA(r,this._withCredentials,this._abortController)).then(a=>{const l=nm(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!qA(a.status))throw im(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:KA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Ym=200,Jm=206;function EL(s){const e=s.response;return typeof e!="string"?e:em(e).buffer}class kL{constructor({url:e,httpHeaders:t,withCredentials:n}){ee(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=VA(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Jm):i.expectedStatus=Ym,t.responseType="arraybuffer",tt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||Ym;if(!(r===Ym&&n.expectedStatus===Jm)&&r!==n.expectedStatus){n.onError(i.status);return}const a=EL(i);if(r===Jm){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:a}):(ae('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class CL{constructor(e){this._source=e,this._manager=new kL(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return tt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new TL(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new PL(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class TL{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=nm(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=GA({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=WA(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=im(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PL{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=nm((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=im(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const RL=/^[a-z][a-z0-9\-+.]+:/i;function NL(s){if(RL.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class LL{constructor(e){this.source=e,this.url=NL(e.url),tt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return tt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new IL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ML(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class IL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new gh(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new io("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ML{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const OL=1e5,rs=30,jL=.8;var n1,Tr,cs,ed,td,Qo,Ci,sd,nd,Zo,Ql,Zl,Pr,ec,id,tc,ea,rd,od,ta,sa,ad,Rr,sc,tr,YA,JA,Fy,$s,sp,$y,QA,ZA;const rt=class rt{constructor({textContentSource:e,container:t,viewport:n}){x(this,tr);x(this,Tr,Promise.withResolvers());x(this,cs,null);x(this,ed,!1);x(this,td,!!((n1=globalThis.FontInspector)!=null&&n1.enabled));x(this,Qo,null);x(this,Ci,null);x(this,sd,0);x(this,nd,0);x(this,Zo,null);x(this,Ql,null);x(this,Zl,0);x(this,Pr,0);x(this,ec,Object.create(null));x(this,id,[]);x(this,tc,null);x(this,ea,[]);x(this,rd,new WeakMap);x(this,od,null);var l;if(e instanceof ReadableStream)w(this,tc,e);else if(typeof e=="object")w(this,tc,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,cs,w(this,Ql,t)),w(this,Pr,n.scale*(globalThis.devicePixelRatio||1)),w(this,Zl,n.rotation),w(this,Ci,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=n.rawDims;w(this,od,[1,0,0,-1,-o,a+r]),w(this,nd,i),w(this,sd,r),S(l=rt,$s,QA).call(l),za(t,n),c(this,Tr).promise.finally(()=>{c(rt,sc).delete(this),w(this,Ci,null),w(this,ec,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Zt.platform;return de(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Zo).read().then(({value:t,done:n})=>{if(n){c(this,Tr).resolve();return}c(this,Qo)??w(this,Qo,t.lang),Object.assign(c(this,ec),t.styles),S(this,tr,YA).call(this,t.items),e()},c(this,Tr).reject)};return w(this,Zo,c(this,tc).getReader()),c(rt,sc).add(this),e(),c(this,Tr).promise}update({viewport:e,onBefore:t=null}){var r;const n=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==c(this,Zl)&&(t==null||t(),w(this,Zl,i),za(c(this,Ql),{rotation:i})),n!==c(this,Pr)){t==null||t(),w(this,Pr,n);const o={div:null,properties:null,ctx:S(r=rt,$s,sp).call(r,c(this,Qo))};for(const a of c(this,ea))o.properties=c(this,rd).get(a),o.div=a,S(this,tr,Fy).call(this,o)}}cancel(){var t;const e=new io("TextLayer task cancelled.");(t=c(this,Zo))==null||t.cancel(e).catch(()=>{}),w(this,Zo,null),c(this,Tr).reject(e)}get textDivs(){return c(this,ea)}get textContentItemsStr(){return c(this,id)}static cleanup(){if(!(c(this,sc).size>0)){c(this,ta).clear();for(const{canvas:e}of c(this,sa).values())e.remove();c(this,sa).clear()}}};Tr=new WeakMap,cs=new WeakMap,ed=new WeakMap,td=new WeakMap,Qo=new WeakMap,Ci=new WeakMap,sd=new WeakMap,nd=new WeakMap,Zo=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,Pr=new WeakMap,ec=new WeakMap,id=new WeakMap,tc=new WeakMap,ea=new WeakMap,rd=new WeakMap,od=new WeakMap,ta=new WeakMap,sa=new WeakMap,ad=new WeakMap,Rr=new WeakMap,sc=new WeakMap,tr=new WeakSet,YA=function(e){var i,r;if(c(this,ed))return;(r=c(this,Ci)).ctx??(r.ctx=S(i=rt,$s,sp).call(i,c(this,Qo)));const t=c(this,ea),n=c(this,id);for(const o of e){if(t.length>OL){ae("Ignoring additional textDivs for performance reasons."),w(this,ed,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,cs);w(this,cs,document.createElement("span")),c(this,cs).classList.add("markedContent"),o.id!==null&&c(this,cs).setAttribute("id",`${o.id}`),a.append(c(this,cs))}else o.type==="endMarkedContent"&&w(this,cs,c(this,cs).parentNode);continue}n.push(o.str),S(this,tr,JA).call(this,o)}},JA=function(e){var y;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,ea).push(t);const i=K.transform(c(this,od),e.transform);let r=Math.atan2(i[1],i[0]);const o=c(this,ec)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=c(this,td)&&o.fontSubstitution||o.fontFamily;a=rt.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),u=l*S(y=rt,$s,ZA).call(y,a,c(this,Qo));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;c(this,cs)===c(this,Ql)?(p.left=`${(100*h/c(this,nd)).toFixed(2)}%`,p.top=`${(100*d/c(this,sd)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(c(rt,Rr)*l).toFixed(2)}px)`,p.fontFamily=a,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,td)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);_!==v&&Math.max(_,v)/Math.min(_,v)>1.5&&(g=!0)}if(g&&(n.canvasWidth=o.vertical?e.height:e.width),c(this,rd).set(t,n),c(this,Ci).div=t,c(this,Ci).properties=n,S(this,tr,Fy).call(this,c(this,Ci)),n.hasText&&c(this,cs).append(t),n.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),c(this,cs).append(_)}},Fy=function(e){var a;const{div:t,properties:n,ctx:i}=e,{style:r}=t;let o="";if(c(rt,Rr)>1&&(o=`scale(${1/c(rt,Rr)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:h}=n;S(a=rt,$s,$y).call(a,i,h*c(this,Pr),l);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${u*c(this,Pr)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},$s=new WeakSet,sp=function(e=null){let t=c(this,sa).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,sa).set(e,t),c(this,ad).set(t,{size:0,family:""})}return t},$y=function(e,t,n){const i=c(this,ad).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},QA=function(){if(c(this,Rr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),w(this,Rr,e.getBoundingClientRect().height),e.remove()},ZA=function(e,t){const n=c(this,ta).get(e);if(n)return n;const i=S(this,$s,sp).call(this,t);i.canvas.width=i.canvas.height=rs,S(this,$s,$y).call(this,i,rs,e);const r=i.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+a);return c(this,ta).set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,rs,rs),i.strokeText("g",0,0);let l=i.getImageData(0,0,rs,rs).data;a=0;for(let h=l.length-1-3;h>=0;h-=4)if(l[h]>0){a=Math.ceil(h/4/rs);break}i.clearRect(0,0,rs,rs),i.strokeText("A",0,rs),l=i.getImageData(0,0,rs,rs).data,o=0;for(let h=0,d=l.length;h<d;h+=4)if(l[h]>0){o=rs-Math.floor(h/4/rs);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+a):jL;return c(this,ta).set(e,u),u},x(rt,$s),x(rt,ta,new Map),x(rt,sa,new Map),x(rt,ad,new WeakMap),x(rt,Rr,null),x(rt,sc,new Set);let mh=rt;class yh{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(yh.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const DL=65536,FL=100,$L=5e3,zL=Ut?eL:JN,UL=Ut?tL:FA,BL=Ut?ZN:QN,HL=Ut?sL:BA;function VL(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new zy,{docId:t}=e,n=s.url?GL(s.url):null,i=s.data?WL(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,a=s.password??null,l=s.range instanceof eE?s.range:null,u=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:DL;let h=s.worker instanceof Nl?s.worker:null;const d=s.verbosity,f=typeof s.docBaseUrl=="string"&&!sm(s.docBaseUrl)?s.docBaseUrl:null,p=typeof s.cMapUrl=="string"?s.cMapUrl:null,g=s.cMapPacked!==!1,y=s.CMapReaderFactory||UL,_=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,v=s.StandardFontDataFactory||HL,b=s.stopAtErrors!==!0,A=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,E=s.isEvalSupported!==!1,k=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Ut,C=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Ut&&(Zt.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,P=typeof s.disableFontFace=="boolean"?s.disableFontFace:Ut,M=s.fontExtraProperties===!0,j=s.enableXfa===!0,V=s.ownerDocument||globalThis.document,N=s.disableRange===!0,$=s.disableStream===!0,Z=s.disableAutoFetch===!0,we=s.pdfBug===!0,D=s.CanvasFactory||zL,G=s.FilterFactory||BL,O=s.enableHWA===!0,X=l?l.length:s.length??NaN,Y=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Ut&&!P,ge=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:y===FA&&v===BA&&p&&_&&_u(p,document.baseURI)&&_u(_,document.baseURI),ue=null;PN(d);const Ae={canvasFactory:new D({ownerDocument:V,enableHWA:O}),filterFactory:new G({docId:t,ownerDocument:V}),cMapReaderFactory:ge?null:new y({baseUrl:p,isCompressed:g}),standardFontDataFactory:ge?null:new v({baseUrl:_})};if(!h){const ne={verbosity:d,port:Hi.workerPort};h=ne.port?Nl.fromPort(ne):new Nl(ne),e._worker=h}const Pt={docId:t,apiVersion:"4.10.38",data:i,password:a,disableAutoFetch:Z,rangeChunkSize:u,length:X,docBaseUrl:f,enableXfa:j,evaluatorOptions:{maxImageSize:A,disableFontFace:P,ignoreErrors:b,isEvalSupported:E,isOffscreenCanvasSupported:k,isImageDecoderSupported:C,canvasMaxAreaInBytes:T,fontExtraProperties:M,useSystemFonts:Y,cMapUrl:ge?p:null,standardFontDataUrl:ge?_:null}},z={disableFontFace:P,fontExtraProperties:M,ownerDocument:V,pdfBug:we,styleElement:ue,loadingParams:{disableAutoFetch:Z,enableXfa:j}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ne=h.messageHandler.sendWithPromise("GetDocRequest",Pt,i?[i.buffer]:null);let me;if(l)me=new wL(l,{disableRange:N,disableStream:$});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let li;if(Ut)if(_u(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");li=j_}else li=LL;else li=_u(n)?j_:CL;me=new li({url:n,length:X,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:N,disableStream:$})}return ne.then(li=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const tu=new Eu(t,li,h.port),nf=new YL(tu,e,me,z,Ae);e._transport=nf,tu.send("Ready",null)})}).catch(e._capability.reject),e}function GL(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(Ut&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function WL(s){if(Ut&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return em(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function D_(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var gg;const mg=class mg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Vt(mg,gg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};gg=new WeakMap,x(mg,gg,0);let zy=mg;class eE{constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Re("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class qL{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return de(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Nr,Ti,Zs,ol,np;class XL{constructor(e,t,n,i=!1){x(this,Zs);x(this,Nr,null);x(this,Ti,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new S_:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new tE,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new Qd({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return de(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:i=pr.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var E,k;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(n,i,h,d),{renderingIntent:p,cacheKey:g}=f;w(this,Ti,!1),S(this,Zs,np).call(this),a||(a=this._transport.getOptionalContentConfig(p));let y=this._intentStates.get(g);y||(y=Object.create(null),this._intentStates.set(g,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const _=!!(p&Ls.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(f));const v=C=>{var T;y.renderTasks.delete(b),(this._maybeCleanupAfterRender||_)&&w(this,Ti,!0),S(this,Zs,ol).call(this,!_),C?(b.capability.reject(C),this._abortOperatorList({intentState:y,reason:C instanceof Error?C:new Error(C)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new By({callback:v,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||(y.renderTasks=new Set)).add(b);const A=b.task;return Promise.all([y.displayReadyCapability.promise,a]).then(([C,T])=>{var P;if(this.destroyed){v();return}if((P=this._stats)==null||P.time("Rendering"),!(T.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:C,optionalContentConfig:T}),b.operatorListChanged()}).catch(v),A}getOperatorList({intent:e="display",annotationMode:t=pr.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,n,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>yh.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function r(){o.read().then(function({value:l,done:u}){if(u){n(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),w(this,Ti,!1),S(this,Zs,np).call(this),Promise.all(e)}cleanup(e=!1){w(this,Ti,!0);const t=S(this,Zs,ol).call(this,!1);return e&&t&&this._stats&&(this._stats=new S_),t}_startRenderPage(e,t){var i,r;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&S(this,Zs,ol).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:o}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();S(this,Zs,ol).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Tw){let i=FL;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new io(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Nr=new WeakMap,Ti=new WeakMap,Zs=new WeakSet,ol=function(e=!1){if(S(this,Zs,np).call(this),!c(this,Ti)||this.destroyed)return!1;if(e)return w(this,Nr,setTimeout(()=>{w(this,Nr,null),S(this,Zs,ol).call(this,!1)},$L)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,Ti,!1),!0},np=function(){c(this,Nr)&&(clearTimeout(c(this,Nr)),w(this,Nr,null))};var Pi,yg;class KL{constructor(){x(this,Pi,new Map);x(this,yg,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,yg).then(()=>{for(const[i]of c(this,Pi))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){ae("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}c(this,Pi).set(t,i)}removeEventListener(e,t){const n=c(this,Pi).get(t);n==null||n(),c(this,Pi).delete(t)}terminate(){for(const[,e]of c(this,Pi))e==null||e();c(this,Pi).clear()}}Pi=new WeakMap,yg=new WeakMap;var vg,na,ia,nc,ip,ic,rp;const De=class De{constructor({name:e=null,port:t=null,verbosity:n=RN()}={}){x(this,nc);var i;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=c(De,ia))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(De,ia)||w(De,ia,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Eu("main","worker",e),this._messageHandler.on("ready",function(){}),S(this,nc,ip).call(this)}_initialize(){if(c(De,na)||c(De,ic,rp)){this._setupFakeWorker();return}let{workerSrc:e}=De;try{De._isSameOrigin(window.location.href,e)||(e=De._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Eu("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=n,this._port=t,this._webWorker=t,S(this,nc,ip).call(this)}),n.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{Zg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(De,na)||(ae("Setting up fake worker."),w(De,na,!0)),De._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new KL;this._port=t;const n=`fake${Vt(De,vg)._++}`,i=new Eu(n+"_worker",n,t);e.setup(i,t),this._messageHandler=new Eu(n,n+"_worker",t),S(this,nc,ip).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=c(De,ia))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=c(this,ia))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new De(e)}static get workerSrc(){if(Hi.workerSrc)return Hi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return de(this,"_setupFakeWorkerGlobal",(async()=>c(this,ic,rp)?c(this,ic,rp):(await import(this.workerSrc)).WorkerMessageHandler)())}};vg=new WeakMap,na=new WeakMap,ia=new WeakMap,nc=new WeakSet,ip=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ic=new WeakSet,rp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(De,ic),x(De,vg,0),x(De,na,!1),x(De,ia),Ut&&(w(De,na,!0),Hi.workerSrc||(Hi.workerSrc="./pdf.worker.mjs")),De._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},De._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Nl=De;var Ri,Yn,rc,oc,Ni,ra,Ru;class YL{constructor(e,t,n,i,r){x(this,ra);x(this,Ri,new Map);x(this,Yn,new Map);x(this,rc,new Map);x(this,oc,new Map);x(this,Ni,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new tE,this.fontLoader=new KN({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return de(this,"annotationStorage",new Lw)}getRenderingIntent(e,t=pr.ENABLE,n=null,i=!1,r=!1){let o=Ls.DISPLAY,a=Py;switch(e){case"any":o=Ls.ANY;break;case"display":break;case"print":o=Ls.PRINT;break;default:ae(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Ls.PRINT&&n instanceof LA?n:this.annotationStorage;switch(t){case pr.DISABLE:o+=Ls.ANNOTATIONS_DISABLE;break;case pr.ENABLE:break;case pr.ENABLE_FORMS:o+=Ls.ANNOTATIONS_FORMS;break;case pr.ENABLE_STORAGE:o+=Ls.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ae(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Ls.IS_EDITING),r&&(o+=Ls.OPLIST);const{ids:u,hash:h}=l.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,Ni))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of c(this,Yn).values())e.push(i._destroy());c(this,Yn).clear(),c(this,rc).clear(),c(this,oc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Ri).clear(),this.filterFactory.destroy(),mh.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new io("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{tt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}tt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(n,i)=>{tt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}tt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new qL(n,this))}),e.on("DocException",n=>{t._capability.reject(os(n))}),e.on("PasswordRequest",n=>{w(this,Ni,Promise.withResolvers());try{if(!t.onPassword)throw os(n);const i=r=>{r instanceof Error?c(this,Ni).reject(r):c(this,Ni).resolve({password:r})};t.onPassword(i,n.code)}catch(i){c(this,Ni).reject(i)}return c(this,Ni).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,Yn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in r){const p=r.error;ae(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,d=new YN(r,{disableFontFace:a,fontExtraProperties:l,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=r;tt(f,"The imageRef must be defined.");for(const p of c(this,Yn).values())for(const[,g]of p.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,r,o])=>{var l;if(this.destroyed)return;const a=c(this,Yn).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":a.objs.resolve(n,o),(o==null?void 0:o.dataLen)>EN&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,rc).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,oc).set(r.refStr,e);const o=new XL(t,r,this,this._params.pdfBug);return c(this,Yn).set(t,o),o});return c(this,rc).set(t,i),i}getPageIndex(e){return D_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return S(this,ra,Ru).call(this,"GetFieldObjects")}hasJSActions(){return S(this,ra,Ru).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,ra,Ru).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return S(this,ra,Ru).call(this,"GetOptionalContentConfig").then(t=>new vL(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Ri).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new mL(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,Ri).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Yn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Ri).clear(),this.filterFactory.destroy(!0),mh.cleanup()}}cachedPageNumber(e){if(!D_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,oc).get(t)??null}}Ri=new WeakMap,Yn=new WeakMap,rc=new WeakMap,oc=new WeakMap,Ni=new WeakMap,ra=new WeakSet,Ru=function(e,t=null){const n=c(this,Ri).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return c(this,Ri).set(e,i),i};const fu=Symbol("INITIAL_DATA");var Ss,ld,Uy;class tE{constructor(){x(this,ld);x(this,Ss,Object.create(null))}get(e,t=null){if(t){const i=S(this,ld,Uy).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=c(this,Ss)[e];if(!n||n.data===fu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Ss)[e];return!!t&&t.data!==fu}delete(e){const t=c(this,Ss)[e];return!t||t.data===fu?!1:(delete c(this,Ss)[e],!0)}resolve(e,t=null){const n=S(this,ld,Uy).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Ss)){const{data:n}=c(this,Ss)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}w(this,Ss,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Ss)){const{data:t}=c(this,Ss)[e];t!==fu&&(yield[e,t])}}}Ss=new WeakMap,ld=new WeakSet,Uy=function(e){var t;return(t=c(this,Ss))[e]||(t[e]={...Promise.withResolvers(),data:fu})};var Lr;class JL{constructor(e){x(this,Lr,null);w(this,Lr,e),this.onContinue=null}get promise(){return c(this,Lr).capability.promise}cancel(e=0){c(this,Lr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,Lr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,Lr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Lr=new WeakMap;var Ir,oa;const xo=class xo{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){x(this,Ir,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new JL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(c(xo,oa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(xo,oa).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:o}=this.params;this.gfx=new Rl(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,Ir)&&(window.cancelAnimationFrame(c(this,Ir)),w(this,Ir,null)),c(xo,oa).delete(this._canvas),this.callback(e||new Tw(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,Ir,window.requestAnimationFrame(()=>{w(this,Ir,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(xo,oa).delete(this._canvas),this.callback())))}};Ir=new WeakMap,oa=new WeakMap,x(xo,oa,new WeakSet);let By=xo;const QL="4.10.38",ZL="f9bea397f";function F_(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function pu(s){return Math.max(0,Math.min(255,255*s))}class $_{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=pu(e),[e,e,e]}static G_HTML([e]){const t=F_(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(pu)}static RGB_HTML(e){return`#${e.map(F_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[pu(1-Math.min(1,e+i)),pu(1-Math.min(1,n+i)),pu(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,r=1-t,o=1-n,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class eI{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Re("Abstract method `_createSVG` called.")}}class Mw extends eI{_createSVG(e){return document.createElementNS(ui,e)}}class sE{static setupStorage(e,t,n,i,r){const o=i.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&r.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var d,f;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const a=r!=="richText",l=e.div;if(l.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&yh.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,g,y]=h.at(-1);if(g+1===p.children.length){h.pop();continue}const _=p.children[++h.at(-1)[1]];if(_===null)continue;const{name:v}=_;if(v==="#text"){const A=document.createTextNode(_.value);u.push(A),y.append(A);continue}const b=(d=_==null?void 0:_.attributes)!=null&&d.xmlns?document.createElementNS(_.attributes.xmlns,v):document.createElement(v);if(y.append(b),_.attributes&&this.setAttributes({html:b,element:_,storage:t,intent:r,linkService:n}),((f=_.children)==null?void 0:f.length)>0)h.push([_,-1,b]);else if(_.value){const A=document.createTextNode(_.value);a&&yh.shouldBuildText(v)&&u.push(A),b.append(A)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ef=1e3,tI=9,Ba=new WeakSet;function to(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class sI{static create(e){switch(e.data.annotationType){case it.LINK:return new nE(e);case it.TEXT:return new nI(e);case it.WIDGET:switch(e.data.fieldType){case"Tx":return new iI(e);case"Btn":return e.data.radioButton?new oE(e):e.data.checkBox?new oI(e):new aI(e);case"Ch":return new lI(e);case"Sig":return new rI(e)}return new Ya(e);case it.POPUP:return new Vy(e);case it.FREETEXT:return new hE(e);case it.LINE:return new uI(e);case it.SQUARE:return new hI(e);case it.CIRCLE:return new dI(e);case it.POLYLINE:return new dE(e);case it.CARET:return new pI(e);case it.INK:return new Ow(e);case it.POLYGON:return new fI(e);case it.HIGHLIGHT:return new fE(e);case it.UNDERLINE:return new gI(e);case it.SQUIGGLY:return new mI(e);case it.STRIKEOUT:return new yI(e);case it.STAMP:return new pE(e);case it.FILEATTACHMENT:return new vI(e);default:return new Qe(e)}}}var aa,ac,lc,cd,Hy;const Hw=class Hw{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){x(this,cd);x(this,aa,null);x(this,ac,!1);x(this,lc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Hw._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;c(this,aa)||w(this,aa,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&S(this,cd,Hy).call(this,t),(n=c(this,lc))==null||n.popup.updateEdited(e)}resetEdited(){var e;c(this,aa)&&(S(this,cd,Hy).call(this,c(this,aa).rect),(e=c(this,lc))==null||e.popup.resetEdited(),w(this,aa,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Ya||(r.tabIndex=ef);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Vy){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,r),r}const{width:a,height:l}=to(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(y>0||_>0){const b=`calc(${y}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;o.borderRadius=b}else if(this instanceof oE){const b=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case hu.SOLID:o.borderStyle="solid";break;case hu.DASHED:o.borderStyle="dashed";break;case hu.BEVELED:ae("Unimplemented border style: beveled");break;case hu.INSET:ae("Unimplemented border style: inset");break;case hu.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(w(this,ac,!0),o.borderColor=K.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=K.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(o.width=`${100*a/h}%`,o.height=`${100*l/d}%`):this.setRotation(g,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=to(this.data.rect);let a,l;e%180===0?(a=100*r/n,l=100*o/i):(a=100*o/n,l=100*r/i),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const r=i.detail[t],o=r[0],a=r.slice(1);i.target.style[n]=$_[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:$_[`${o}_rgb`](a)})};return de(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||n[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const o=n[i];if(o){const a={detail:{[i]:r},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,_,v,b]=e.subarray(2,6);if(i===y&&r===_&&t===v&&n===b)return}const{style:o}=this.container;let a;if(c(this,ac)){const{borderColor:y,borderWidth:_}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const l=i-t,u=r-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,_=e.length;y<_;y+=8){const v=e[y],b=e[y+1],A=e[y+2],E=e[y+3],k=h.createElement("rect"),C=(A-t)/l,T=(r-b)/u,P=(v-A)/l,M=(b-E)/u;k.setAttribute("x",C),k.setAttribute("y",T),k.setAttribute("width",P),k.setAttribute("height",M),p.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${T}" width="${P}" height="${M}"/>`)}c(this,ac)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:e}=this,t=w(this,lc,new Vy({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Re("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===t)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Ba.has(u)){ae(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:l,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&Ba.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};aa=new WeakMap,ac=new WeakMap,lc=new WeakMap,cd=new WeakSet,Hy=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;n==null||n.splice(0,4,...e);const{width:u,height:h}=to(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*u/r}%`,t.height=`${100*h/o}%`):this.setRotation(i)};let Qe=Hw;var Ms,yo,iE,rE;class nE extends Qe{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});x(this,Ms);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(S(this,Ms,iE).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(S(this,Ms,rE).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&S(this,Ms,yo).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),S(this,Ms,yo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=i.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),S(this,Ms,yo).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),S(this,Ms,yo).call(this),!this._fieldObjects){ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:a}=n,l=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:y}of g)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===a&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!Ba.has(g)){ae(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Ms=new WeakSet,yo=function(){this.container.setAttribute("data-internal-link","")},iE=function(t,n,i=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,i),!1},S(this,Ms,yo).call(this)},rE=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),S(this,Ms,yo).call(this)};class nI extends Qe{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ya extends Qe{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Zt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var a;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,n,i){var r,o,a;for(const[l,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":K.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||tI,r=e.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(Gm*i))||1,d=u/h;o=Math.min(i,l(d/Gm))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(u/Gm))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=K.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class iI extends Ya{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),r.setValue(o.id,{[i]:n})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",u??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ba.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=ef,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var y;if(h.focused)return;const{target:g}=p;h.userValue&&(g.value=h.userValue),h.lastCommittedValue=g.value,h.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const g={value(y){h.userValue=y.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),y.target.value=h.userValue},formattedValue(y){const{formattedValue:_}=y.detail;h.formattedValue=_,_!=null&&y.target!==document.activeElement&&(y.target.value=_),e.setValue(t,{formattedValue:_})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var A;const{charLimit:_}=y.detail,{target:v}=y;if(_===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",_);let b=h.userValue;!b||b.length<=_||(b=b.slice(0,_),v.value=h.userValue=b,e.setValue(t,{value:b}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(g,p)}),n.addEventListener("keydown",p=>{var _;h.commitKey=1;let g=-1;if(p.key==="Escape"?g=0:p.key==="Enter"&&!this.data.multiLine?g=2:p.key==="Tab"&&(h.commitKey=3),g===-1)return;const{value:y}=p.target;h.lastCommittedValue!==y&&(h.lastCommittedValue=y,h.userValue=y,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:g,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var y,_;if(!h.focused||!p.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(h.focused=!1);const{value:g}=p.target;h.userValue=g,h.lastCommittedValue!==g&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",p=>{var k;h.lastCommittedValue=null;const{data:g,target:y}=p,{value:_,selectionStart:v,selectionEnd:b}=y;let A=v,E=b;switch(p.inputType){case"deleteWordBackward":{const C=_.substring(0,v).match(/\w*[^\w]*$/);C&&(A-=C[0].length);break}case"deleteWordForward":{const C=_.substring(v).match(/^[^\w]*\w*/);C&&(E+=C[0].length);break}case"deleteContentBackward":v===b&&(A-=1);break;case"deleteContentForward":v===b&&(E+=1);break}p.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:g||"",willCommit:!1,selStart:A,selEnd:E}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class rI extends Ya{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class oI extends Ya{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ba.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=ef,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,n)){const h=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(n,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class oE extends Ya{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Ba.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=ef,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class aI extends nE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class lI extends Ya{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Ba.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=ef;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const y of i.options)y.selected=g.has(y.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,g=f.detail.remove;p[g].selected=!1,i.remove(g),p.length>0&&Array.prototype.findIndex.call(p,_=>_.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:g,exportValue:y}=f.detail.insert,_=i.children[p],v=document.createElement("option");v.textContent=g,v.value=y,_?_.before(v):i.append(v),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of p){const{displayValue:y,exportValue:_}=g,v=document.createElement("option");v.textContent=y,v.value=_,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Vy extends Qe{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Qe._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new cI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Cw}${n}`).join(",")),this.container}}var cc,wg,bg,uc,la,qe,Li,hc,ud,hd,dc,Ii,mn,Mi,dd,Oi,fd,ca,ua,Pe,op,Gy,aE,lE,cE,uE,ap,lp,Wy;class cI{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:u,parentRect:h,open:d}){x(this,Pe);x(this,cc,S(this,Pe,cE).bind(this));x(this,wg,S(this,Pe,Wy).bind(this));x(this,bg,S(this,Pe,lp).bind(this));x(this,uc,S(this,Pe,ap).bind(this));x(this,la,null);x(this,qe,null);x(this,Li,null);x(this,hc,null);x(this,ud,null);x(this,hd,null);x(this,dc,null);x(this,Ii,!1);x(this,mn,null);x(this,Mi,null);x(this,dd,null);x(this,Oi,null);x(this,fd,null);x(this,ca,null);x(this,ua,!1);var f;w(this,qe,e),w(this,fd,i),w(this,Li,o),w(this,Oi,a),w(this,hd,l),w(this,la,t),w(this,dd,u),w(this,dc,h),w(this,ud,n),w(this,hc,Rw.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,uc)),p.addEventListener("mouseenter",c(this,bg)),p.addEventListener("mouseleave",c(this,wg)),p.classList.add("popupTriggerArea");for(const p of n)(f=p.container)==null||f.addEventListener("keydown",c(this,cc));c(this,qe).hidden=!0,d&&S(this,Pe,ap).call(this)}render(){if(c(this,mn))return;const e=w(this,mn,document.createElement("div"));if(e.className="popup",c(this,la)){const r=e.style.outlineColor=K.makeHexColor(...c(this,la));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=K.makeHexColor(...c(this,la).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=c(this,fd),e.append(t),c(this,hc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,hc).valueOf()})),t.append(r)}const i=c(this,Pe,op);if(i)sE.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,Li));e.append(r)}c(this,qe).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];n.append(document.createTextNode(a)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;c(this,ca)||w(this,ca,{contentsObj:c(this,Li),richText:c(this,Oi)}),e&&w(this,Mi,null),t&&(w(this,Oi,S(this,Pe,lE).call(this,t)),w(this,Li,null)),(n=c(this,mn))==null||n.remove(),w(this,mn,null)}resetEdited(){var e;c(this,ca)&&({contentsObj:Vt(this,Li)._,richText:Vt(this,Oi)._}=c(this,ca),w(this,ca,null),(e=c(this,mn))==null||e.remove(),w(this,mn,null),w(this,Mi,null))}forceHide(){w(this,ua,this.isVisible),c(this,ua)&&(c(this,qe).hidden=!0)}maybeShow(){c(this,ua)&&(c(this,mn)||S(this,Pe,lp).call(this),w(this,ua,!1),c(this,qe).hidden=!1)}get isVisible(){return c(this,qe).hidden===!1}}cc=new WeakMap,wg=new WeakMap,bg=new WeakMap,uc=new WeakMap,la=new WeakMap,qe=new WeakMap,Li=new WeakMap,hc=new WeakMap,ud=new WeakMap,hd=new WeakMap,dc=new WeakMap,Ii=new WeakMap,mn=new WeakMap,Mi=new WeakMap,dd=new WeakMap,Oi=new WeakMap,fd=new WeakMap,ca=new WeakMap,ua=new WeakMap,Pe=new WeakSet,op=function(){const e=c(this,Oi),t=c(this,Li);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Oi).html||null},Gy=function(){var e,t,n;return((n=(t=(e=c(this,Pe,op))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},aE=function(){var e,t,n;return((n=(t=(e=c(this,Pe,op))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},lE=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:c(this,Pe,aE),fontSize:c(this,Pe,Gy)?`calc(${c(this,Pe,Gy)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return n},cE=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Ii))&&S(this,Pe,ap).call(this)},uE=function(){if(c(this,Mi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=c(this,hd);let o=!!c(this,dc),a=o?c(this,dc):c(this,dd);for(const g of c(this,ud))if(!a||K.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=K.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=l[0]+h,f=l[1];w(this,Mi,[100*(d-i)/t,100*(f-r)/n]);const{style:p}=c(this,qe);p.left=`${c(this,Mi)[0]}%`,p.top=`${c(this,Mi)[1]}%`},ap=function(){w(this,Ii,!c(this,Ii)),c(this,Ii)?(S(this,Pe,lp).call(this),c(this,qe).addEventListener("click",c(this,uc)),c(this,qe).addEventListener("keydown",c(this,cc))):(S(this,Pe,Wy).call(this),c(this,qe).removeEventListener("click",c(this,uc)),c(this,qe).removeEventListener("keydown",c(this,cc)))},lp=function(){c(this,mn)||this.render(),this.isVisible?c(this,Ii)&&c(this,qe).classList.add("focused"):(S(this,Pe,uE).call(this),c(this,qe).hidden=!1,c(this,qe).style.zIndex=parseInt(c(this,qe).style.zIndex)+1e3)},Wy=function(){c(this,qe).classList.remove("focused"),!(c(this,Ii)||!this.isVisible)&&(c(this,qe).hidden=!0,c(this,qe).style.zIndex=parseInt(c(this,qe).style.zIndex)-1e3)};class hE extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=oe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pd;class uI extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,pd,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:i}=to(t.rect),r=this.svgFactory.create(n,i,!0),o=w(this,pd,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,pd)}addHighlightArea(){this.container.classList.add("highlightArea")}}pd=new WeakMap;var gd;class hI extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,gd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:i}=to(t.rect),r=this.svgFactory.create(n,i,!0),o=t.borderStyle.width,a=w(this,gd,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,gd)}addHighlightArea(){this.container.classList.add("highlightArea")}}gd=new WeakMap;var md;class dI extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,md,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:i}=to(t.rect),r=this.svgFactory.create(n,i,!0),o=t.borderStyle.width,a=w(this,md,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,md)}addHighlightArea(){this.container.classList.add("highlightArea")}}md=new WeakMap;var yd;class dE extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,yd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:r}}=this;if(!n)return this.container;const{width:o,height:a}=to(t),l=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-t[0],g=t[3]-n[d+1];u.push(`${p},${g}`)}u=u.join(" ");const h=w(this,yd,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,yd)}addHighlightArea(){this.container.classList.add("highlightArea")}}yd=new WeakMap;class fI extends dE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pI extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var vd,ha,wd,qy;class Ow extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,wd);x(this,vd,null);x(this,ha,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?oe.HIGHLIGHT:oe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:u}=S(this,wd,qy).call(this,n,t),h=this.svgFactory.create(l,u,!0),d=w(this,vd,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);c(this,ha).push(g),g.setAttribute("points",i[f].join(",")),d.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:r}=t,o=c(this,vd);if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let a=0,l=c(this,ha).length;a<l;a++)c(this,ha)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:u}=S(this,wd,qy).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return c(this,ha)}addHighlightArea(){this.container.classList.add("highlightArea")}}vd=new WeakMap,ha=new WeakMap,wd=new WeakSet,qy=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class fE extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=oe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class gI extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mI extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class yI extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class pE extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=oe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bd,_d,Xy;class vI extends Qe{constructor(t){var i;super(t,{isRenderable:!0});x(this,_d);x(this,bd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",S(this,_d,Xy).bind(this)),w(this,bd,i);const{isMac:r}=Zt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&S(this,_d,Xy).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return c(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap,_d=new WeakSet,Xy=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var xd,da,fa,Sd,Va,gE,Ky;class wI{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){x(this,Va);x(this,xd,null);x(this,da,null);x(this,fa,new Map);x(this,Sd,null);this.div=e,w(this,xd,t),w(this,da,n),w(this,Sd,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return c(this,fa).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;za(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Mw,annotationStorage:e.annotationStorage||new Lw,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===it.POPUP;if(l){const d=i.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=to(a.rect);if(d<=0||f<=0)continue}r.data=a;const u=sI.create(r);if(!u.isRenderable)continue;if(!l&&a.popupRef){const d=i.get(a.popupRef);d?d.push(u):i.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await S(this,Va,gE).call(this,h,a.id),u._isEditable&&(c(this,fa).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}S(this,Va,Ky).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,za(t,{rotation:e.rotation}),S(this,Va,Ky).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,fa).values())}getEditableAnnotation(e){return c(this,fa).get(e)}}xd=new WeakMap,da=new WeakMap,fa=new WeakMap,Sd=new WeakMap,Va=new WeakSet,gE=async function(e,t){var o,a;const n=e.firstChild||e,i=n.id=`${Cw}${t}`,r=await((o=c(this,Sd))==null?void 0:o.getAriaAttributes(i));if(r)for(const[l,u]of r)n.setAttribute(l,u);this.div.append(e),(a=c(this,xd))==null||a.moveElementInDOM(this.div,e,n,!1)},Ky=function(){if(!c(this,da))return;const e=this.div;for(const[t,n]of c(this,da)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}c(this,da).clear()};const Nf=/\r\n?|\n/g;var yn,As,Ad,pa,Es,st,mE,yE,vE,cp,Xi,up,hp,wE,Jy,bE;const Le=class Le extends Ve{constructor(t){super({...t,name:"freeTextEditor"});x(this,st);x(this,yn);x(this,As,"");x(this,Ad,`${this.id}-editor`);x(this,pa,null);x(this,Es);w(this,yn,t.color||Le._defaultColor||Ve._defaultLineColor),w(this,Es,t.fontSize||Le._defaultFontSize)}static get _keyboardManager(){const t=Le.prototype,n=o=>o.isEmpty(),i=Ua.TRANSLATE_SMALL,r=Ua.TRANSLATE_BIG;return de(this,"_keyboardManager",new Zd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(t,n){Ve.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case ve.FREETEXT_SIZE:Le._defaultFontSize=n;break;case ve.FREETEXT_COLOR:Le._defaultColor=n;break}}updateParams(t,n){switch(t){case ve.FREETEXT_SIZE:S(this,st,mE).call(this,n);break;case ve.FREETEXT_COLOR:S(this,st,yE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ve.FREETEXT_SIZE,Le._defaultFontSize],[ve.FREETEXT_COLOR,Le._defaultColor||Ve._defaultLineColor]]}get propertiesToUpdate(){return[[ve.FREETEXT_SIZE,c(this,Es)],[ve.FREETEXT_COLOR,c(this,yn)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Le._internalPadding*t,-(Le._internalPadding+c(this,Es))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(oe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,pa,new AbortController);const t=this._uiManager.combinedSignal(c(this,pa));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Ad)),this._isDraggable=!0,(t=c(this,pa))==null||t.abort(),w(this,pa,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,As),n=w(this,As,S(this,st,vE).call(this).trimEnd());if(t===n)return;const i=r=>{if(w(this,As,r),!r){this.remove();return}S(this,st,hp).call(this),this._uiManager.rebuild(this),S(this,st,cp).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),S(this,st,cp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Le._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Ad)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${c(this,Es)}px * var(--scale-factor))`,i.color=c(this,yn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Qp(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,y;switch(this.rotation){case 0:g=t+(a[0]-f)/h,y=n+this.height-(a[1]-p)/d;break;case 90:g=t+(a[0]-f)/h,y=n-(a[1]-p)/d,[l,u]=[u,-l];break;case 180:g=t-this.width+(a[0]-f)/h,y=n-(a[1]-p)/d,[l,u]=[-l,-u];break;case 270:g=t+(a[0]-f-this.height*d)/h,y=n+(a[1]-p-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(g*r,y*o,l,u)}else this.setAt(t*r,n*o,this.width*r,this.height*o);S(this,st,hp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,y,_;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=S(g=Le,Xi,Jy).call(g,n.getData("text")||"").replaceAll(Nf,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(Nf,"")),v!==this.editorDiv){let b=h;for(const A of this.editorDiv.childNodes){if(A===v){b=d;continue}b.push(S(y=Le,Xi,up).call(y,A))}}h.push(l.nodeValue.slice(0,u).replaceAll(Nf,""))}else if(l===this.editorDiv){let v=h,b=0;for(const A of this.editorDiv.childNodes)b++===u&&(v=d),v.push(S(_=Le,Xi,up).call(_,A))}w(this,As,`${h.join(`
`)}${r}${d.join(`
`)}`),S(this,st,hp).call(this);const f=new Range;let p=h.reduce((v,b)=>v+b.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(p<=b){f.setStart(v,p),f.setEnd(v,p);break}p-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,i){var a;let r=null;if(t instanceof hE){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:g,textPosition:y,parent:{page:{pageNumber:_}}}=t;if(!g||g.length===0)return null;r=t={annotationType:oe.FREETEXT,color:Array.from(u),fontSize:l,value:g.join(`
`),position:y,pageIndex:_-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,n,i);return w(o,Es,t.fontSize),w(o,yn,K.makeHexColor(...t.color)),w(o,As,S(a=Le,Xi,Jy).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Le._internalPadding*this.parentScale,i=this.getRect(n,n),r=Ve._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,yn)),o={annotationType:oe.FREETEXT,color:r,fontSize:c(this,Es),value:S(this,st,wE).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!S(this,st,bE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${c(this,Es)}px * var(--scale-factor))`,i.color=c(this,yn),n.replaceChildren();for(const o of c(this,As).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const r=Le._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:c(this,As)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};yn=new WeakMap,As=new WeakMap,Ad=new WeakMap,pa=new WeakMap,Es=new WeakMap,st=new WeakSet,mE=function(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-c(this,Es))*this.parentScale),w(this,Es,r),S(this,st,cp).call(this)},i=c(this,Es);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},yE=function(t){const n=r=>{w(this,yn,this.editorDiv.style.color=r)},i=c(this,yn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},vE=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(S(i=Le,Xi,up).call(i,r)),n=r);return t.join(`
`)},cp=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},Xi=new WeakSet,up=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Nf,"")},hp=function(){if(this.editorDiv.replaceChildren(),!!c(this,As))for(const t of c(this,As).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},wE=function(){return c(this,As).replaceAll(" "," ")},Jy=function(t){return t.replaceAll(" "," ")},bE=function(t){const{value:n,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((a,l)=>a!==r[l])||t.pageIndex!==o},x(Le,Xi),ee(Le,"_freeTextDefaultContent",""),ee(Le,"_internalPadding",0),ee(Le,"_defaultColor",null),ee(Le,"_defaultFontSize",10),ee(Le,"_type","freetext"),ee(Le,"_editorType",oe.FREETEXT);let Yy=Le;class B{toSVGPath(){Re("Abstract method `toSVGPath` must be implemented.")}get box(){Re("Abstract getter `box` must be implemented.")}serialize(e,t){Re("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=n+e[a+1]*r;return o}static _rescaleAndSwap(e,t,n,i,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=n+e[a]*r;return o}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=n+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,r){switch(r){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,r,o){return[(e+5*n)/6,(t+5*i)/6,(5*n+r)/6,(5*i+o)/6,(n+r)/2,(i+o)/2]}}ee(B,"PRECISION",1e-4);var ks,vn,fc,pc,Jn,he,ga,ma,Ed,kd,gc,mc,Mr,Cd,_g,xg,ut,Nu,_E,xE,SE,AE,EE,kE;const mi=class mi{constructor({x:e,y:t},n,i,r,o,a=0){x(this,ut);x(this,ks);x(this,vn,[]);x(this,fc);x(this,pc);x(this,Jn,[]);x(this,he,new Float32Array(18));x(this,ga);x(this,ma);x(this,Ed);x(this,kd);x(this,gc);x(this,mc);x(this,Mr,[]);w(this,ks,n),w(this,mc,r*i),w(this,pc,o),c(this,he).set([NaN,NaN,NaN,NaN,e,t],6),w(this,fc,a),w(this,kd,c(mi,Cd)*i),w(this,Ed,c(mi,xg)*i),w(this,gc,i),c(this,Mr).push(e,t)}isEmpty(){return isNaN(c(this,he)[8])}add({x:e,y:t}){var M;w(this,ga,e),w(this,ma,t);const[n,i,r,o]=c(this,ks);let[a,l,u,h]=c(this,he).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<c(this,Ed))return!1;const g=p-c(this,kd),y=g/p,_=y*d,v=y*f;let b=a,A=l;a=u,l=h,u+=_,h+=v,(M=c(this,Mr))==null||M.push(e,t);const E=-v/g,k=_/g,C=E*c(this,mc),T=k*c(this,mc);return c(this,he).set(c(this,he).subarray(2,8),0),c(this,he).set([u+C,h+T],4),c(this,he).set(c(this,he).subarray(14,18),12),c(this,he).set([u-C,h-T],16),isNaN(c(this,he)[6])?(c(this,Jn).length===0&&(c(this,he).set([a+C,l+T],2),c(this,Jn).push(NaN,NaN,NaN,NaN,(a+C-n)/r,(l+T-i)/o),c(this,he).set([a-C,l-T],14),c(this,vn).push(NaN,NaN,NaN,NaN,(a-C-n)/r,(l-T-i)/o)),c(this,he).set([b,A,a,l,u,h],6),!this.isEmpty()):(c(this,he).set([b,A,a,l,u,h],6),Math.abs(Math.atan2(A-l,b-a)-Math.atan2(v,_))<Math.PI/2?([a,l,u,h]=c(this,he).subarray(2,6),c(this,Jn).push(NaN,NaN,NaN,NaN,((a+u)/2-n)/r,((l+h)/2-i)/o),[a,l,b,A]=c(this,he).subarray(14,18),c(this,vn).push(NaN,NaN,NaN,NaN,((b+a)/2-n)/r,((A+l)/2-i)/o),!0):([b,A,a,l,u,h]=c(this,he).subarray(0,6),c(this,Jn).push(((b+5*a)/6-n)/r,((A+5*l)/6-i)/o,((5*a+u)/6-n)/r,((5*l+h)/6-i)/o,((a+u)/2-n)/r,((l+h)/2-i)/o),[u,h,a,l,b,A]=c(this,he).subarray(12,18),c(this,vn).push(((b+5*a)/6-n)/r,((A+5*l)/6-i)/o,((5*a+u)/6-n)/r,((5*l+h)/6-i)/o,((a+u)/2-n)/r,((l+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Jn),t=c(this,vn);if(isNaN(c(this,he)[6])&&!this.isEmpty())return S(this,ut,_E).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);S(this,ut,SE).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return S(this,ut,xE).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,r,o){return new CE(e,t,n,i,r,o)}getOutlines(){var d;const e=c(this,Jn),t=c(this,vn),n=c(this,he),[i,r,o,a]=c(this,ks),l=new Float32Array((((d=c(this,Mr))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,Mr)[f]-i)/o,l[f+1]=(c(this,Mr)[f+1]-r)/a;if(l[l.length-2]=(c(this,ga)-i)/o,l[l.length-1]=(c(this,ma)-r)/a,isNaN(n[6])&&!this.isEmpty())return S(this,ut,AE).call(this,l);const u=new Float32Array(c(this,Jn).length+24+c(this,vn).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=S(this,ut,kE).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return S(this,ut,EE).call(this,u,h),this.newFreeDrawOutline(u,l,c(this,ks),c(this,gc),c(this,fc),c(this,pc))}};ks=new WeakMap,vn=new WeakMap,fc=new WeakMap,pc=new WeakMap,Jn=new WeakMap,he=new WeakMap,ga=new WeakMap,ma=new WeakMap,Ed=new WeakMap,kd=new WeakMap,gc=new WeakMap,mc=new WeakMap,Mr=new WeakMap,Cd=new WeakMap,_g=new WeakMap,xg=new WeakMap,ut=new WeakSet,Nu=function(){const e=c(this,he).subarray(4,6),t=c(this,he).subarray(16,18),[n,i,r,o]=c(this,ks);return[(c(this,ga)+(e[0]-t[0])/2-n)/r,(c(this,ma)+(e[1]-t[1])/2-i)/o,(c(this,ga)+(t[0]-e[0])/2-n)/r,(c(this,ma)+(t[1]-e[1])/2-i)/o]},_E=function(){const[e,t,n,i]=c(this,ks),[r,o,a,l]=S(this,ut,Nu).call(this);return`M${(c(this,he)[2]-e)/n} ${(c(this,he)[3]-t)/i} L${(c(this,he)[4]-e)/n} ${(c(this,he)[5]-t)/i} L${r} ${o} L${a} ${l} L${(c(this,he)[16]-e)/n} ${(c(this,he)[17]-t)/i} L${(c(this,he)[14]-e)/n} ${(c(this,he)[15]-t)/i} Z`},xE=function(e){const t=c(this,vn);e.push(`L${t[4]} ${t[5]} Z`)},SE=function(e){const[t,n,i,r]=c(this,ks),o=c(this,he).subarray(4,6),a=c(this,he).subarray(16,18),[l,u,h,d]=S(this,ut,Nu).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-n)/r} L${l} ${u} L${h} ${d} L${(a[0]-t)/i} ${(a[1]-n)/r}`)},AE=function(e){const t=c(this,he),[n,i,r,o]=c(this,ks),[a,l,u,h]=S(this,ut,Nu).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,c(this,ks),c(this,gc),c(this,fc),c(this,pc))},EE=function(e,t){const n=c(this,vn);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},kE=function(e,t){const n=c(this,he).subarray(4,6),i=c(this,he).subarray(16,18),[r,o,a,l]=c(this,ks),[u,h,d,f]=S(this,ut,Nu).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],t),t+=24},x(mi,Cd,8),x(mi,_g,2),x(mi,xg,c(mi,Cd)+c(mi,_g));let tg=mi;var yc,ya,ji,Td,Cs,Pd,Ye,Sg,TE;class CE extends B{constructor(t,n,i,r,o,a){super();x(this,Sg);x(this,yc);x(this,ya,new Float32Array(4));x(this,ji);x(this,Td);x(this,Cs);x(this,Pd);x(this,Ye);w(this,Ye,t),w(this,Cs,n),w(this,yc,i),w(this,Pd,r),w(this,ji,o),w(this,Td,a),this.lastPoint=[NaN,NaN],S(this,Sg,TE).call(this,a);const[l,u,h,d]=c(this,ya);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-l)/h,n[f+1]=(n[f+1]-u)/d}toSVGPath(){const t=[`M${c(this,Ye)[4]} ${c(this,Ye)[5]}`];for(let n=6,i=c(this,Ye).length;n<i;n+=6){if(isNaN(c(this,Ye)[n])){t.push(`L${c(this,Ye)[n+4]} ${c(this,Ye)[n+5]}`);continue}t.push(`C${c(this,Ye)[n]} ${c(this,Ye)[n+1]} ${c(this,Ye)[n+2]} ${c(this,Ye)[n+3]} ${c(this,Ye)[n+4]} ${c(this,Ye)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,r],o){const a=i-t,l=r-n;let u,h;switch(o){case 0:u=B._rescale(c(this,Ye),t,r,a,-l),h=B._rescale(c(this,Cs),t,r,a,-l);break;case 90:u=B._rescaleAndSwap(c(this,Ye),t,n,a,l),h=B._rescaleAndSwap(c(this,Cs),t,n,a,l);break;case 180:u=B._rescale(c(this,Ye),i,n,-a,l),h=B._rescale(c(this,Cs),i,n,-a,l);break;case 270:u=B._rescaleAndSwap(c(this,Ye),i,r,-a,-l),h=B._rescaleAndSwap(c(this,Cs),i,r,-a,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,ya)}newOutliner(t,n,i,r,o,a=0){return new tg(t,n,i,r,o,a)}getNewOutline(t,n){const[i,r,o,a]=c(this,ya),[l,u,h,d]=c(this,yc),f=o*h,p=a*d,g=i*h+l,y=r*d+u,_=this.newOutliner({x:c(this,Cs)[0]*f+g,y:c(this,Cs)[1]*p+y},c(this,yc),c(this,Pd),t,c(this,Td),n??c(this,ji));for(let v=2;v<c(this,Cs).length;v+=2)_.add({x:c(this,Cs)[v]*f+g,y:c(this,Cs)[v+1]*p+y});return _.getOutlines()}}yc=new WeakMap,ya=new WeakMap,ji=new WeakMap,Td=new WeakMap,Cs=new WeakMap,Pd=new WeakMap,Ye=new WeakMap,Sg=new WeakSet,TE=function(t){const n=c(this,Ye);let i=n[4],r=n[5],o=i,a=r,l=i,u=r,h=i,d=r;const f=t?Math.max:Math.min;for(let g=6,y=n.length;g<y;g+=6){if(isNaN(n[g]))o=Math.min(o,n[g+4]),a=Math.min(a,n[g+5]),l=Math.max(l,n[g+4]),u=Math.max(u,n[g+5]),d<n[g+5]?(h=n[g+4],d=n[g+5]):d===n[g+5]&&(h=f(h,n[g+4]));else{const _=K.bezierBoundingBox(i,r,...n.slice(g,g+6));o=Math.min(o,_[0]),a=Math.min(a,_[1]),l=Math.max(l,_[2]),u=Math.max(u,_[3]),d<_[3]?(h=_[2],d=_[3]):d===_[3]&&(h=f(h,_[2]))}i=n[g+4],r=n[g+5]}const p=c(this,ya);p[0]=o-c(this,ji),p[1]=a-c(this,ji),p[2]=l-o+2*c(this,ji),p[3]=u-a+2*c(this,ji),this.lastPoint=[h,d]};var Rd,Nd,Or,wn,ts,PE,dp,RE,NE,Zy;class Qy{constructor(e,t=0,n=0,i=!0){x(this,ts);x(this,Rd);x(this,Nd);x(this,Or,[]);x(this,wn,[]);let r=1/0,o=-1/0,a=1/0,l=-1/0;const h=10**-4;for(const{x:v,y:b,width:A,height:E}of e){const k=Math.floor((v-t)/h)*h,C=Math.ceil((v+A+t)/h)*h,T=Math.floor((b-t)/h)*h,P=Math.ceil((b+E+t)/h)*h,M=[k,T,P,!0],j=[C,T,P,!1];c(this,Or).push(M,j),r=Math.min(r,k),o=Math.max(o,C),a=Math.min(a,T),l=Math.max(l,P)}const d=o-r+2*n,f=l-a+2*n,p=r-n,g=a-n,y=c(this,Or).at(i?-1:-2),_=[y[0],y[2]];for(const v of c(this,Or)){const[b,A,E]=v;v[0]=(b-p)/d,v[1]=(A-g)/f,v[2]=(E-g)/f}w(this,Rd,new Float32Array([p,g,d,f])),w(this,Nd,_)}getOutlines(){c(this,Or).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,Or))t[3]?(e.push(...S(this,ts,Zy).call(this,t)),S(this,ts,RE).call(this,t)):(S(this,ts,NE).call(this,t),e.push(...S(this,ts,Zy).call(this,t)));return S(this,ts,PE).call(this,e)}}Rd=new WeakMap,Nd=new WeakMap,Or=new WeakMap,wn=new WeakMap,ts=new WeakSet,PE=function(e){const t=[],n=new Set;for(const o of e){const[a,l,u]=o;t.push([a,l,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],u=t[o+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const i=[];let r;for(;n.size>0;){const o=n.values().next().value;let[a,l,u,h,d]=o;n.delete(o);let f=a,p=l;for(r=[a,u],i.push(r);;){let g;if(n.has(h))g=h;else if(n.has(d))g=d;else break;n.delete(g),[a,l,u,h,d]=g,f!==a&&(r.push(f,p,a,p===l?l:u),f=a),p=p===l?u:l}r.push(f,p)}return new bI(i,c(this,Rd),c(this,Nd))},dp=function(e){const t=c(this,wn);let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,o=t[r][0];if(o===e)return r;o<e?n=r+1:i=r-1}return i+1},RE=function([,e,t]){const n=S(this,ts,dp).call(this,e);c(this,wn).splice(n,0,[e,t])},NE=function([,e,t]){const n=S(this,ts,dp).call(this,e);for(let i=n;i<c(this,wn).length;i++){const[r,o]=c(this,wn)[i];if(r!==e)break;if(r===e&&o===t){c(this,wn).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,o]=c(this,wn)[i];if(r!==e)break;if(r===e&&o===t){c(this,wn).splice(i,1);return}}},Zy=function(e){const[t,n,i]=e,r=[[t,n,i]],o=S(this,ts,dp).call(this,i);for(let a=0;a<o;a++){const[l,u]=c(this,wn)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=l)){if(f>=l){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=l,p>u&&r.push([t,u,p])}}}return r};var Ld,vc;class bI extends B{constructor(t,n,i){super();x(this,Ld);x(this,vc);w(this,vc,t),w(this,Ld,n),this.lastPoint=i}toSVGPath(){const t=[];for(const n of c(this,vc)){let[i,r]=n;t.push(`M${i} ${r}`);for(let o=2;o<n.length;o+=2){const a=n[o],l=n[o+1];a===i?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,n,i,r],o){const a=[],l=i-t,u=r-n;for(const h of c(this,vc)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*l,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return c(this,Ld)}get classNamesForOutlining(){return["highlightOutline"]}}Ld=new WeakMap,vc=new WeakMap;class ev extends tg{newFreeDrawOutline(e,t,n,i,r,o){return new _I(e,t,n,i,r,o)}}class _I extends CE{newOutliner(e,t,n,i,r,o=0){return new ev(e,t,n,i,r,o)}}var bn,va,wc,at,Id,bc,Md,Od,jr,_n,_c,jd,Te,tv,sv,nv,vo,LE,or;const as=class as{constructor({editor:e=null,uiManager:t=null}){x(this,Te);x(this,bn,null);x(this,va,null);x(this,wc);x(this,at,null);x(this,Id,!1);x(this,bc,!1);x(this,Md,null);x(this,Od);x(this,jr,null);x(this,_n,null);x(this,_c);var n;e?(w(this,bc,!1),w(this,_c,ve.HIGHLIGHT_COLOR),w(this,Md,e)):(w(this,bc,!0),w(this,_c,ve.HIGHLIGHT_DEFAULT_COLOR)),w(this,_n,(e==null?void 0:e._uiManager)||t),w(this,Od,c(this,_n)._eventBus),w(this,wc,(e==null?void 0:e.color)||((n=c(this,_n))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(as,jd)||w(as,jd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return de(this,"_keyboardManager",new Zd([[["Escape","mac+Escape"],as.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],as.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],as.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],as.prototype._moveToPrevious],[["Home","mac+Home"],as.prototype._moveToBeginning],[["End","mac+End"],as.prototype._moveToEnd]]))}renderButton(){const e=w(this,bn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,_n)._signal;e.addEventListener("click",S(this,Te,vo).bind(this),{signal:t}),e.addEventListener("keydown",S(this,Te,nv).bind(this),{signal:t});const n=w(this,va,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,wc),e.append(n),e}renderMainDropdown(){const e=w(this,at,S(this,Te,tv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,bn)){S(this,Te,vo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&S(this,Te,sv).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,Te,or)){S(this,Te,vo).call(this,e);return}if(e.target===c(this,bn)){(t=c(this,at).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,at))==null?void 0:t.firstChild)||e.target===c(this,bn)){c(this,Te,or)&&this._hideDropdownFromKeyboard();return}c(this,Te,or)||S(this,Te,vo).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,Te,or)){S(this,Te,vo).call(this,e);return}(t=c(this,at).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Te,or)){S(this,Te,vo).call(this,e);return}(t=c(this,at).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,at))==null||e.classList.add("hidden"),(t=c(this,jr))==null||t.abort(),w(this,jr,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,bc)){if(!c(this,Te,or)){(e=c(this,Md))==null||e.unselect();return}this.hideDropdown(),c(this,bn).focus({preventScroll:!0,focusVisible:c(this,Id)})}}updateColor(e){if(c(this,va)&&(c(this,va).style.backgroundColor=e),!c(this,at))return;const t=c(this,_n).highlightColors.values();for(const n of c(this,at).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,bn))==null||e.remove(),w(this,bn,null),w(this,va,null),(t=c(this,at))==null||t.remove(),w(this,at,null)}};bn=new WeakMap,va=new WeakMap,wc=new WeakMap,at=new WeakMap,Id=new WeakMap,bc=new WeakMap,Md=new WeakMap,Od=new WeakMap,jr=new WeakMap,_n=new WeakMap,_c=new WeakMap,jd=new WeakMap,Te=new WeakSet,tv=function(){const e=document.createElement("div"),t=c(this,_n)._signal;e.addEventListener("contextmenu",Nn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of c(this,_n).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",c(as,jd)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===c(this,wc)),r.addEventListener("click",S(this,Te,sv).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",S(this,Te,nv).bind(this),{signal:t}),e},sv=function(e,t){t.stopPropagation(),c(this,Od).dispatch("switchannotationeditorparams",{source:this,type:c(this,_c),value:e})},nv=function(e){as._keyboardManager.exec(this,e)},vo=function(e){if(c(this,Te,or)){this.hideDropdown();return}if(w(this,Id,e.detail===0),c(this,jr)||(w(this,jr,new AbortController),window.addEventListener("pointerdown",S(this,Te,LE).bind(this),{signal:c(this,_n).combinedSignal(c(this,jr))})),c(this,at)){c(this,at).classList.remove("hidden");return}const t=w(this,at,S(this,Te,tv).call(this));c(this,bn).append(t)},LE=function(e){var t;(t=c(this,at))!=null&&t.contains(e.target)||this.hideDropdown()},or=function(){return c(this,at)&&!c(this,at).classList.contains("hidden")},x(as,jd,null);let sg=as;var xc,Dd,Di,wa,Sc,us,Fd,$d,ba,qs,Ts,xt,Ac,Fi,Dt,Ec,Xs,zd,re,iv,fp,IE,ME,OE,rv,wo,en,al,jE,pp,Lu,DE,FE,$E,zE,UE;const Se=class Se extends Ve{constructor(t){super({...t,name:"highlightEditor"});x(this,re);x(this,xc,null);x(this,Dd,0);x(this,Di);x(this,wa,null);x(this,Sc,null);x(this,us,null);x(this,Fd,null);x(this,$d,0);x(this,ba,null);x(this,qs,null);x(this,Ts,null);x(this,xt,!1);x(this,Ac,null);x(this,Fi);x(this,Dt,null);x(this,Ec,"");x(this,Xs);x(this,zd,"");this.color=t.color||Se._defaultColor,w(this,Xs,t.thickness||Se._defaultThickness),w(this,Fi,t.opacity||Se._defaultOpacity),w(this,Di,t.boxes||null),w(this,zd,t.methodOfCreation||""),w(this,Ec,t.text||""),this._isDraggable=!1,t.highlightId>-1?(w(this,xt,!0),S(this,re,fp).call(this,t),S(this,re,wo).call(this)):c(this,Di)&&(w(this,xc,t.anchorNode),w(this,Dd,t.anchorOffset),w(this,Fd,t.focusNode),w(this,$d,t.focusOffset),S(this,re,iv).call(this),S(this,re,wo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Se.prototype;return de(this,"_keyboardManager",new Zd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,xt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Xs),methodOfCreation:c(this,zd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;Ve.initialize(t,n),Se._defaultColor||(Se._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case ve.HIGHLIGHT_DEFAULT_COLOR:Se._defaultColor=n;break;case ve.HIGHLIGHT_THICKNESS:Se._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,Ac)}updateParams(t,n){switch(t){case ve.HIGHLIGHT_COLOR:S(this,re,IE).call(this,n);break;case ve.HIGHLIGHT_THICKNESS:S(this,re,ME).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ve.HIGHLIGHT_DEFAULT_COLOR,Se._defaultColor],[ve.HIGHLIGHT_THICKNESS,Se._defaultThickness]]}get propertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,this.color||Se._defaultColor],[ve.HIGHLIGHT_THICKNESS,c(this,Xs)||Se._defaultThickness],[ve.HIGHLIGHT_FREE,c(this,xt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(w(this,Sc,new sg({editor:this})),t.addColorPicker(c(this,Sc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,re,Lu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,S(this,re,Lu).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){S(this,re,rv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,re,wo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?S(this,re,rv).call(this):t&&(S(this,re,wo).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var r,o,a;const{drawLayer:n}=this.parent;let i;c(this,xt)?(t=(t-this.rotation+360)%360,i=S(r=Se,en,al).call(r,c(this,qs).box,t)):i=S(o=Se,en,al).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,Ts),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(c(this,Dt),{bbox:S(a=Se,en,al).call(a,c(this,us).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Ec)&&(t.setAttribute("aria-label",c(this,Ec)),t.setAttribute("role","mark")),c(this,xt)?t.classList.add("free"):this.div.addEventListener("keydown",S(this,re,jE).bind(this),{signal:this._uiManager._signal});const n=w(this,ba,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,wa);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Qp(this,c(this,ba),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Dt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Dt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:S(this,re,pp).call(this,!0);break;case 1:case 3:S(this,re,pp).call(this,!1);break}}select(){var t;super.select(),c(this,Dt)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Dt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Dt)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Dt),{rootClass:{selected:!1}}),c(this,xt)||S(this,re,pp).call(this,!1))}get _mustFixPosition(){return!c(this,xt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Ts),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Dt),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:r,y:o}){const{x:a,y:l,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=g=>{d.abort(),S(this,en,zE).call(this,t,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Os,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Nn,{signal:f}),i.addEventListener("pointermove",S(this,en,$E).bind(this,t),{signal:f}),this._freeHighlight=new ev({x:r,y:o},[a,l,u,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var y,_,v,b;let r=null;if(t instanceof fE){const{data:{quadPoints:A,rect:E,rotation:k,id:C,color:T,opacity:P,popupRef:M},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:oe.HIGHLIGHT,color:Array.from(T),opacity:P,quadPoints:A,boxes:null,pageIndex:j-1,rect:E.slice(0),rotation:k,id:C,deleted:!1,popupRef:M}}else if(t instanceof Ow){const{data:{inkLists:A,rect:E,rotation:k,id:C,color:T,borderStyle:{rawWidth:P},popupRef:M},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:oe.HIGHLIGHT,color:Array.from(T),thickness:P,inkLists:A,boxes:null,pageIndex:j-1,rect:E.slice(0),rotation:k,id:C,deleted:!1,popupRef:M}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=t,h=await super.deserialize(t,n,i);h.color=K.makeHexColor(...o),w(h,Fi,u||1),l&&w(h,Xs,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,g]=h.pageTranslation;if(a){const A=w(h,Di,[]);for(let E=0;E<a.length;E+=8)A.push({x:(a[E]-p)/d,y:1-(a[E+1]-g)/f,width:(a[E+2]-a[E])/d,height:(a[E+1]-a[E+5])/f});S(y=h,re,iv).call(y),S(_=h,re,wo).call(_),h.rotate(h.rotation)}else if(l){w(h,xt,!0);const A=l[0],E={x:A[0]-p,y:f-(A[1]-g)},k=new ev(E,[0,0,d,f],1,c(h,Xs)/2,!0,.001);for(let P=0,M=A.length;P<M;P+=2)E.x=A[P]-p,E.y=f-(A[P+1]-g),k.add(E);const{id:C,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);S(v=h,re,fp).call(v,{highlightOutlines:k.getOutlines(),highlightId:C,clipPathId:T}),S(b=h,re,wo).call(b)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=Ve._colorManager.convert(this.color),r={annotationType:oe.HIGHLIGHT,color:i,opacity:c(this,Fi),thickness:c(this,Xs),quadPoints:S(this,re,DE).call(this),outlines:S(this,re,FE).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:S(this,re,Lu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!S(this,re,UE).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};xc=new WeakMap,Dd=new WeakMap,Di=new WeakMap,wa=new WeakMap,Sc=new WeakMap,us=new WeakMap,Fd=new WeakMap,$d=new WeakMap,ba=new WeakMap,qs=new WeakMap,Ts=new WeakMap,xt=new WeakMap,Ac=new WeakMap,Fi=new WeakMap,Dt=new WeakMap,Ec=new WeakMap,Xs=new WeakMap,zd=new WeakMap,re=new WeakSet,iv=function(){const t=new Qy(c(this,Di),.001);w(this,qs,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,qs).box;const n=new Qy(c(this,Di),.0025,.001,this._uiManager.direction==="ltr");w(this,us,n.getOutlines());const{lastPoint:i}=c(this,us);w(this,Ac,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},fp=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,f;if(w(this,qs,t),w(this,us,t.getNewOutline(c(this,Xs)/2+1.5,.0025)),n>=0)w(this,Ts,n),w(this,wa,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),w(this,Dt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,us).box,path:{d:c(this,us).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Ts),{bbox:S(d=Se,en,al).call(d,c(this,qs).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Dt),{bbox:S(f=Se,en,al).call(f,c(this,us).box,p),path:{d:c(this,us).toSVGPath()}})}const[o,a,l,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/p,this.height=u*p/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/p,this.height=u*p/g;break}}const{lastPoint:h}=c(this,us);w(this,Ac,[(h[0]-o)/l,(h[1]-a)/u])},IE=function(t){const n=(o,a)=>{var l,u;this.color=o,w(this,Fi,a),(l=this.parent)==null||l.drawLayer.updateProperties(c(this,Ts),{root:{fill:o,"fill-opacity":a}}),(u=c(this,Sc))==null||u.updateColor(o)},i=this.color,r=c(this,Fi);this.addCommands({cmd:n.bind(this,t,Se._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},ME=function(t){const n=c(this,Xs),i=r=>{w(this,Xs,r),S(this,re,OE).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},OE=function(t){if(!c(this,xt))return;S(this,re,fp).call(this,{highlightOutlines:c(this,qs).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},rv=function(){c(this,Ts)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Ts)),w(this,Ts,null),this.parent.drawLayer.remove(c(this,Dt)),w(this,Dt,null))},wo=function(t=this.parent){c(this,Ts)===null&&({id:Vt(this,Ts)._,clipPathId:Vt(this,wa)._}=t.drawLayer.draw({bbox:c(this,qs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,Fi)},rootClass:{highlight:!0,free:c(this,xt)},path:{d:c(this,qs).toSVGPath()}},!1,!0),w(this,Dt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,xt)},bbox:c(this,us).box,path:{d:c(this,us).toSVGPath()}},c(this,xt))),c(this,ba)&&(c(this,ba).style.clipPath=c(this,wa)))},en=new WeakSet,al=function([t,n,i,r],o){switch(o){case 90:return[1-n-r,t,r,i];case 180:return[1-t-i,1-n-r,i,r];case 270:return[n,1-t-i,r,i]}return[t,n,i,r]},jE=function(t){Se._keyboardManager.exec(this,t)},pp=function(t){if(!c(this,xc))return;const n=window.getSelection();t?n.setPosition(c(this,xc),c(this,Dd)):n.setPosition(c(this,Fd),c(this,$d))},Lu=function(){return c(this,xt)?this.rotation:0},DE=function(){if(c(this,xt))return null;const[t,n]=this.pageDimensions,[i,r]=this.pageTranslation,o=c(this,Di),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*t+i,g=(1-h)*n+r;a[l]=a[l+4]=p,a[l+1]=a[l+3]=g,a[l+2]=a[l+6]=p+d*t,a[l+5]=a[l+7]=g-f*n,l+=8}return a},FE=function(t){return c(this,qs).serialize(t,S(this,re,Lu).call(this))},$E=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},zE=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},UE=function(t){const{color:n}=this._initialData;return t.color.some((i,r)=>i!==n[r])},x(Se,en),ee(Se,"_defaultColor",null),ee(Se,"_defaultOpacity",1),ee(Se,"_defaultThickness",12),ee(Se,"_type","highlight"),ee(Se,"_editorType",oe.HIGHLIGHT),ee(Se,"_freeHighlightId",-1),ee(Se,"_freeHighlight",null),ee(Se,"_freeHighlightClipId","");let ng=Se;var _a;class xI{constructor(){x(this,_a,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,_a)[e]=t}toSVGProperties(){const e=c(this,_a);return w(this,_a,Object.create(null)),{root:e}}reset(){w(this,_a,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Re("Not implemented")}}_a=new WeakMap;var Ps,kc,pt,xa,Sa,Dr,Fr,$r,Aa,_e,av,lv,cv,Iu,BE,gp,Mu,ll;const W=class W extends Ve{constructor(t){super(t);x(this,_e);x(this,Ps,null);x(this,kc);ee(this,"_drawId",null);w(this,kc,t.mustBeCommitted||!1),t.drawOutlines&&(S(this,_e,av).call(this,t),S(this,_e,Iu).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[r,o]of Object.entries(n))i.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Re("Not implemented")}static get typesMap(){Re("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(c(W,pt).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,n[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,n[r]]);return t}_updateProperty(t,n,i){const r=this._drawingOptions,o=r[n],a=l=>{var h;r.updateProperty(n,l);const u=c(this,Ps).updateProperty(n,l);u&&S(this,_e,Mu).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties(c(this,Ps).getPathResizingSVGProperties(S(this,_e,gp).call(this)),{bbox:S(this,_e,ll).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties(c(this,Ps).getPathResizedSVGProperties(S(this,_e,gp).call(this)),{bbox:S(this,_e,ll).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:S(this,_e,ll).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties(c(this,Ps).getPathTranslatedSVGProperties(S(this,_e,gp).call(this),this.parentDimensions),{bbox:S(this,_e,ll).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,kc)&&(w(this,kc,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){S(this,_e,cv).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,_e,Iu).call(this),S(this,_e,Mu).call(this,c(this,Ps).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),S(this,_e,cv).call(this)):t&&(this._uiManager.addShouldRescale(this),S(this,_e,Iu).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties({bbox:S(this,_e,ll).call(this)},c(this,Ps).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,_e,Mu).call(this,c(this,Ps).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,i,r,o){Re("Not implemented")}static startDrawing(t,n,i,r){var _;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:h}=r;if(c(W,Fr)&&c(W,Fr)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:p}=o.getBoundingClientRect(),g=w(W,xa,new AbortController),y=t.combinedSignal(g);if(c(W,Dr)||w(W,Dr,u),c(W,Fr)??w(W,Fr,h),window.addEventListener("pointerup",v=>{var b;c(W,Dr)===v.pointerId?this._endDraw(v):(b=c(W,$r))==null||b.delete(v.pointerId)},{signal:y}),window.addEventListener("pointercancel",v=>{var b;c(W,Dr)===v.pointerId?this._currentParent.endDrawingSession():(b=c(W,$r))==null||b.delete(v.pointerId)},{signal:y}),window.addEventListener("pointerdown",v=>{c(W,Fr)===v.pointerType&&((c(W,$r)||w(W,$r,new Set)).add(v.pointerId),c(W,pt).isCancellable()&&(c(W,pt).removeLastElement(),c(W,pt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Nn,{signal:y}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),o.addEventListener("touchmove",v=>{v.timeStamp===c(W,Aa)&&Os(v)},{signal:y}),t.toggleDrawing(),(_=n._editorUndoBar)==null||_.hide(),c(W,pt)){t.drawLayer.updateProperties(this._currentDrawId,c(W,pt).startNew(a,l,f,p,d));return}n.updateUIForDefaultProperties(this),w(W,pt,this.createDrawerInstance(a,l,f,p,d)),w(W,Sa,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(W,Sa).toSVGProperties(),c(W,pt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(w(W,Aa,-1),!c(W,pt))return;const{offsetX:n,offsetY:i,pointerId:r}=t;if(c(W,Dr)===r){if(((o=c(W,$r))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(W,pt).add(n,i)),w(W,Aa,t.timeStamp),Os(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,w(W,pt,null),w(W,Sa,null),w(W,Fr,null),w(W,Aa,NaN)),c(W,xa)&&(c(W,xa).abort(),w(W,xa,null),w(W,Dr,NaN),w(W,$r,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,c(W,pt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=c(W,pt),r=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:ve.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(ve.DRAW_STEP),!c(W,pt).isEmpty()){const{pageDimensions:[i,r],scale:o}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(W,pt).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:c(W,Sa),mustBeCommitted:!t});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,r,o,a){Re("Not implemented")}static async deserialize(t,n,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=n.viewport,u=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,t),h=await super.deserialize(t,n,i);return h.createDrawingOptions(t),S(d=h,_e,av).call(d,{drawOutlines:u}),S(f=h,_e,Iu).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,i]=this.pageTranslation,[r,o]=this.pageDimensions;return c(this,Ps).serialize([n,i,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ps=new WeakMap,kc=new WeakMap,pt=new WeakMap,xa=new WeakMap,Sa=new WeakMap,Dr=new WeakMap,Fr=new WeakMap,$r=new WeakMap,Aa=new WeakMap,_e=new WeakSet,av=function({drawOutlines:t,drawId:n,drawingOptions:i}){w(this,Ps,t),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=S(this,_e,lv).call(this,t,this.parent),S(this,_e,Mu).call(this,t.box)},lv=function(t,n){const{id:i}=n.drawLayer.draw(W._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},cv=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Iu=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,_e,lv).call(this,c(this,Ps),t)}},BE=function([t,n,i,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[n,1-t,i*(a/o),r*(o/a)];case 180:return[1-t,1-n,i,r];case 270:return[1-n,t,i*(a/o),r*(o/a)];default:return[t,n,i,r]}},gp=function(){const{x:t,y:n,width:i,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-n,t,i*(o/a),r*(a/o)];case 180:return[1-t,1-n,i,r];case 270:return[n,1-t,i*(o/a),r*(a/o)];default:return[t,n,i,r]}},Mu=function(t){if([this.x,this.y,this.width,this.height]=S(this,_e,BE).call(this,t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},ll=function(){const{x:t,y:n,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-n-r,t,r,i];case 2:return[1-t-i,1-n-r,i,r];case 3:return[n,1-t-i,r,i];case 4:return[t,n-i*(l/u),r*(u/l),i*(l/u)];case 5:return[1-n,t,i*(l/u),r*(u/l)];case 6:return[1-t-r*(u/l),1-n,r*(u/l),i*(l/u)];case 7:return[n-i*(l/u),1-t-r*(u/l),i*(l/u),r*(u/l)];case 8:return[t-i,n-r,i,r];case 9:return[1-n,t-i,r,i];case 10:return[1-t,1-n,i,r];case 11:return[n-r,1-t,r,i];case 12:return[t-r*(u/l),n,r*(u/l),i*(l/u)];case 13:return[1-n-i*(l/u),t-r*(u/l),i*(l/u),r*(u/l)];case 14:return[1-t,1-n-i*(l/u),r*(u/l),i*(l/u)];case 15:return[n,1-t,i*(l/u),r*(u/l)];default:return[t,n,i,r]}},ee(W,"_currentDrawId",-1),ee(W,"_currentParent",null),x(W,pt,null),x(W,xa,null),x(W,Sa,null),x(W,Dr,NaN),x(W,Fr,null),x(W,$r,null),x(W,Aa,NaN),ee(W,"_INNER_MARGIN",3);let ov=W;var Qn,gt,mt,Ea,Cc,qt,St,Ks,ka,Ca,Ta,Tc,mp;class SI{constructor(e,t,n,i,r,o){x(this,Tc);x(this,Qn,new Float64Array(6));x(this,gt);x(this,mt);x(this,Ea);x(this,Cc);x(this,qt);x(this,St,"");x(this,Ks,0);x(this,ka,new ig);x(this,Ca);x(this,Ta);w(this,Ca,n),w(this,Ta,i),w(this,Ea,r),w(this,Cc,o),[e,t]=S(this,Tc,mp).call(this,e,t);const a=w(this,gt,[NaN,NaN,NaN,NaN,e,t]);w(this,qt,[e,t]),w(this,mt,[{line:a,points:c(this,qt)}]),c(this,Qn).set(a,0)}updateProperty(e,t){e==="stroke-width"&&w(this,Cc,t)}isEmpty(){return!c(this,mt)||c(this,mt).length===0}isCancellable(){return c(this,qt).length<=10}add(e,t){[e,t]=S(this,Tc,mp).call(this,e,t);const[n,i,r,o]=c(this,Qn).subarray(2,6),a=e-r,l=t-o;return Math.hypot(c(this,Ca)*a,c(this,Ta)*l)<=2?null:(c(this,qt).push(e,t),isNaN(n)?(c(this,Qn).set([r,o,e,t],2),c(this,gt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Qn)[0])&&c(this,gt).splice(6,6),c(this,Qn).set([n,i,r,o,e,t],0),c(this,gt).push(...B.createBezierPoints(n,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,qt).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,r){w(this,Ca,n),w(this,Ta,i),w(this,Ea,r),[e,t]=S(this,Tc,mp).call(this,e,t);const o=w(this,gt,[NaN,NaN,NaN,NaN,e,t]);w(this,qt,[e,t]);const a=c(this,mt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(this,mt).push({line:o,points:c(this,qt)}),c(this,Qn).set(o,0),w(this,Ks,0),this.toSVGPath(),null}getLastElement(){return c(this,mt).at(-1)}setLastElement(e){return c(this,mt)?(c(this,mt).push(e),w(this,gt,e.line),w(this,qt,e.points),w(this,Ks,0),{path:{d:this.toSVGPath()}}):c(this,ka).setLastElement(e)}removeLastElement(){if(!c(this,mt))return c(this,ka).removeLastElement();c(this,mt).pop(),w(this,St,"");for(let e=0,t=c(this,mt).length;e<t;e++){const{line:n,points:i}=c(this,mt)[e];w(this,gt,n),w(this,qt,i),w(this,Ks,0),this.toSVGPath()}return{path:{d:c(this,St)}}}toSVGPath(){const e=B.svgRound(c(this,gt)[4]),t=B.svgRound(c(this,gt)[5]);if(c(this,qt).length===2)return w(this,St,`${c(this,St)} M ${e} ${t} Z`),c(this,St);if(c(this,qt).length<=6){const i=c(this,St).lastIndexOf("M");w(this,St,`${c(this,St).slice(0,i)} M ${e} ${t}`),w(this,Ks,6)}if(c(this,qt).length===4){const i=B.svgRound(c(this,gt)[10]),r=B.svgRound(c(this,gt)[11]);return w(this,St,`${c(this,St)} L ${i} ${r}`),w(this,Ks,12),c(this,St)}const n=[];c(this,Ks)===0&&(n.push(`M ${e} ${t}`),w(this,Ks,6));for(let i=c(this,Ks),r=c(this,gt).length;i<r;i+=6){const[o,a,l,u,h,d]=c(this,gt).slice(i,i+6).map(B.svgRound);n.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}return w(this,St,c(this,St)+n.join(" ")),w(this,Ks,c(this,gt).length),c(this,St)}getOutlines(e,t,n,i){const r=c(this,mt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,ka).build(c(this,mt),e,t,n,c(this,Ea),c(this,Cc),i),w(this,Qn,null),w(this,gt,null),w(this,mt,null),w(this,St,null),c(this,ka)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Qn=new WeakMap,gt=new WeakMap,mt=new WeakMap,Ea=new WeakMap,Cc=new WeakMap,qt=new WeakMap,St=new WeakMap,Ks=new WeakMap,ka=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,Tc=new WeakSet,mp=function(e,t){return B._normalizePoint(e,t,c(this,Ca),c(this,Ta),c(this,Ea))};var Xt,Ud,Bd,Rs,Zn,ei,Pc,Rc,Nc,kt,di,HE,VE,GE;const Vw=class Vw extends B{constructor(){super(...arguments);x(this,kt);x(this,Xt);x(this,Ud,0);x(this,Bd);x(this,Rs);x(this,Zn);x(this,ei);x(this,Pc);x(this,Rc);x(this,Nc)}build(t,n,i,r,o,a,l){w(this,Zn,n),w(this,ei,i),w(this,Pc,r),w(this,Rc,o),w(this,Nc,a),w(this,Bd,l??0),w(this,Rs,t),S(this,kt,VE).call(this)}setLastElement(t){return c(this,Rs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Rs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,Rs)){if(t.push(`M${B.svgRound(n[4])} ${B.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${B.svgRound(n[10])} ${B.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[o,a,l,u,h,d]=n.subarray(i,i+6).map(B.svgRound);t.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,n,i,r],o){const a=[],l=[],[u,h,d,f]=S(this,kt,HE).call(this);let p,g,y,_,v,b,A,E,k;switch(c(this,Rc)){case 0:k=B._rescale,p=t,g=n+r,y=i,_=-r,v=t+u*i,b=n+(1-h-f)*r,A=t+(u+d)*i,E=n+(1-h)*r;break;case 90:k=B._rescaleAndSwap,p=t,g=n,y=i,_=r,v=t+h*i,b=n+u*r,A=t+(h+f)*i,E=n+(u+d)*r;break;case 180:k=B._rescale,p=t+i,g=n,y=-i,_=r,v=t+(1-u-d)*i,b=n+h*r,A=t+(1-u)*i,E=n+(h+f)*r;break;case 270:k=B._rescaleAndSwap,p=t+i,g=n+r,y=-i,_=-r,v=t+(1-h-f)*i,b=n+(1-u-d)*r,A=t+(1-h)*i,E=n+(1-u)*r;break}for(const{line:C,points:T}of c(this,Rs))a.push(k(C,p,g,y,_,o?new Array(C.length):null)),l.push(k(T,p,g,y,_,o?new Array(T.length):null));return{lines:a,points:l,rect:[v,b,A,E]}}static deserialize(t,n,i,r,o,{paths:{lines:a,points:l},rotation:u,thickness:h}){const d=[];let f,p,g,y,_;switch(u){case 0:_=B._rescale,f=-t/i,p=n/r+1,g=1/i,y=-1/r;break;case 90:_=B._rescaleAndSwap,f=-n/r,p=-t/i,g=1/r,y=1/i;break;case 180:_=B._rescale,f=t/i+1,p=-n/r,g=-1/i,y=1/r;break;case 270:_=B._rescaleAndSwap,f=n/r+1,p=t/i+1,g=-1/r,y=-1/i;break}if(!a){a=[];for(const b of l){const A=b.length;if(A===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(A===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(A-2));a.push(E);let[k,C,T,P]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,k,C],0);for(let M=4;M<A;M+=2){const j=b[M],V=b[M+1];E.set(B.createBezierPoints(k,C,T,P,j,V),(M-2)*3),[k,C,T,P]=[T,P,j,V]}}}for(let b=0,A=a.length;b<A;b++)d.push({line:_(a[b].map(E=>E??NaN),f,p,g,y),points:_(l[b].map(E=>E??NaN),f,p,g,y)});const v=new Vw;return v.build(d,i,r,1,u,h,o),v}get box(){return c(this,Xt)}updateProperty(t,n){return t==="stroke-width"?S(this,kt,GE).call(this,n):null}updateParentDimensions([t,n],i){const[r,o]=S(this,kt,di).call(this);w(this,Zn,t),w(this,ei,n),w(this,Pc,i);const[a,l]=S(this,kt,di).call(this),u=a-r,h=l-o,d=c(this,Xt);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return w(this,Ud,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Xt).map(B.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,Xt);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,Xt);let i=0,r=0,o=0,a=0,l=0,u=0;switch(c(this,Ud)){case 90:r=n/t,o=-t/n,l=t;break;case 180:i=-1,a=-1,l=t,u=n;break;case 270:r=-n/t,o=t/n,u=n;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${B.svgRound(l)} ${B.svgRound(u)})`}getPathResizingSVGProperties([t,n,i,r]){const[o,a]=S(this,kt,di).call(this),[l,u,h,d]=c(this,Xt);if(Math.abs(h-o)<=B.PRECISION||Math.abs(d-a)<=B.PRECISION){const _=t+i/2-(l+h/2),v=n+r/2-(u+d/2);return{path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(n)}`,transform:`${this.rotationTransform} translate(${_} ${v})`}}}const f=(i-2*o)/(h-2*o),p=(r-2*a)/(d-2*a),g=h/i,y=d/r;return{path:{"transform-origin":`${B.svgRound(l)} ${B.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${y}) translate(${B.svgRound(o)} ${B.svgRound(a)}) scale(${f} ${p}) translate(${B.svgRound(-o)} ${B.svgRound(-a)})`}}}getPathResizedSVGProperties([t,n,i,r]){const[o,a]=S(this,kt,di).call(this),l=c(this,Xt),[u,h,d,f]=l;if(l[0]=t,l[1]=n,l[2]=i,l[3]=r,Math.abs(d-o)<=B.PRECISION||Math.abs(f-a)<=B.PRECISION){const v=t+i/2-(u+d/2),b=n+r/2-(h+f/2);for(const{line:A,points:E}of c(this,Rs))B._translate(A,v,b,A),B._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(d-2*o),g=(r-2*a)/(f-2*a),y=-p*(u+o)+t+o,_=-g*(h+a)+n+a;if(p!==1||g!==1||y!==0||_!==0)for(const{line:v,points:b}of c(this,Rs))B._rescale(v,y,_,p,g,v),B._rescale(b,y,_,p,g,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[r,o]=i,a=c(this,Xt),l=t-a[0],u=n-a[1];if(c(this,Zn)===r&&c(this,ei)===o)for(const{line:h,points:d}of c(this,Rs))B._translate(h,l,u,h),B._translate(d,l,u,d);else{const h=c(this,Zn)/r,d=c(this,ei)/o;w(this,Zn,r),w(this,ei,o);for(const{line:f,points:p}of c(this,Rs))B._rescale(f,l,u,h,d,f),B._rescale(p,l,u,h,d,p);a[2]*=h,a[3]*=d}return a[0]=t,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(t)} ${B.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,Xt);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(t[0])} ${B.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Xt=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,Rs=new WeakMap,Zn=new WeakMap,ei=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,Nc=new WeakMap,kt=new WeakSet,di=function(t=c(this,Nc)){const n=c(this,Bd)+t/2*c(this,Pc);return c(this,Rc)%180===0?[n/c(this,Zn),n/c(this,ei)]:[n/c(this,ei),n/c(this,Zn)]},HE=function(){const[t,n,i,r]=c(this,Xt),[o,a]=S(this,kt,di).call(this,0);return[t+o,n+a,i-2*o,r-2*a]},VE=function(){const t=w(this,Xt,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,Rs)){if(r.length<=12){for(let l=4,u=r.length;l<u;l+=6){const[h,d]=r.subarray(l,l+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],d),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],d)}continue}let o=r[4],a=r[5];for(let l=6,u=r.length;l<u;l+=6){const[h,d,f,p,g,y]=r.subarray(l,l+6);K.bezierBoundingBox(o,a,h,d,f,p,g,y,t),o=g,a=y}}const[n,i]=S(this,kt,di).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},GE=function(t){const[n,i]=S(this,kt,di).call(this);w(this,Nc,t);const[r,o]=S(this,kt,di).call(this),[a,l]=[r-n,o-i],u=c(this,Xt);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};let ig=Vw;var Lc;const Gw=class Gw extends xI{constructor(t){super();x(this,Lc);w(this,Lc,t),super.updateProperties({fill:"none",stroke:Ve._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=c(this,Lc).realScale),super.updateSVGProperty(t,n)}clone(){const t=new Gw(c(this,Lc));return t.updateAll(this),t}};Lc=new WeakMap;let uv=Gw;var Ag,WE;const xl=class xl extends ov{constructor(t){super({...t,name:"inkEditor"});x(this,Ag);this._willKeepAspectRatio=!0}static initialize(t,n){Ve.initialize(t,n),this._defaultDrawingOptions=new uv(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return de(this,"typesMap",new Map([[ve.INK_THICKNESS,"stroke-width"],[ve.INK_COLOR,"stroke"],[ve.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,r,o){return new SI(t,n,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,r,o,a){return ig.deserialize(t,n,i,r,o,a)}static async deserialize(t,n,i){let r=null;if(t instanceof Ow){const{data:{inkLists:a,rect:l,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:g},parent:{page:{pageNumber:y}}}=t;r=t={annotationType:oe.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:y-1,rect:l.slice(0),rotation:u,id:h,deleted:!1,popupRef:g}}const o=await super.deserialize(t,n,i);return o.annotationElementId=t.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=xl.getDefaultDrawingOptions({stroke:K.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,u={annotationType:oe.INK,color:Ve._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!S(this,Ag,WE).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Ag=new WeakSet,WE=function(t){const{color:n,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==n[l])||t.thickness!==i||t.opacity!==r||t.pageIndex!==o},ee(xl,"_type","ink"),ee(xl,"_editorType",oe.INK),ee(xl,"_defaultDrawingOptions",null);let hv=xl;var Be,At,zr,$i,Ur,Ic,ti,si,Ns,Mc,xe,Ou,ju,yp,fv,vp,pv,wp,qE;const Yu=class Yu extends Ve{constructor(t){super({...t,name:"stampEditor"});x(this,xe);x(this,Be,null);x(this,At,null);x(this,zr,null);x(this,$i,null);x(this,Ur,null);x(this,Ic,"");x(this,ti,null);x(this,si,null);x(this,Ns,!1);x(this,Mc,!1);w(this,$i,t.bitmapUrl),w(this,Ur,t.bitmapFile)}static initialize(t,n){Ve.initialize(t,n)}static get supportedTypes(){return de(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return de(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(oe.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;c(this,At)&&(w(this,Be,null),this._uiManager.imageManager.deleteId(c(this,At)),(t=c(this,ti))==null||t.remove(),w(this,ti,null),c(this,si)&&(clearTimeout(c(this,si)),w(this,si,null))),super.remove()}rebuild(){if(!this.parent){c(this,At)&&S(this,xe,yp).call(this);return}super.rebuild(),this.div!==null&&(c(this,At)&&c(this,ti)===null&&S(this,xe,yp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,zr)||c(this,Be)||c(this,$i)||c(this,Ur)||c(this,At))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,Be)?S(this,xe,fv).call(this):S(this,xe,yp).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,n*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,si)!==null&&clearTimeout(c(this,si)),w(this,si,setTimeout(()=>{w(this,si,null),S(this,xe,pv).call(this)},200))}copyCanvas(t,n,i=!1){var p;t||(t=224);const{width:r,height:o}=c(this,Be),a=new uy;let l=c(this,Be),u=r,h=o,d=null;if(n){if(r>n||o>n){const P=Math.min(n/r,n/o);u=Math.floor(r*P),h=Math.floor(o*P)}d=document.createElement("canvas");const g=d.width=Math.ceil(u*a.sx),y=d.height=Math.ceil(h*a.sy);c(this,Ns)||(l=S(this,xe,vp).call(this,g,y));const _=d.getContext("2d");_.filter=this._uiManager.hcmFilter;let v="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",b="#42414d");const A=15,E=A*a.sx,k=A*a.sy,C=new OffscreenCanvas(E*2,k*2),T=C.getContext("2d");T.fillStyle=v,T.fillRect(0,0,E*2,k*2),T.fillStyle=b,T.fillRect(0,0,E,k),T.fillRect(E,k,E,k),_.fillStyle=_.createPattern(C,"repeat"),_.fillRect(0,0,g,y),_.drawImage(l,0,0,l.width,l.height,0,0,g,y)}let f=null;if(i){let g,y;if(a.symmetric&&l.width<t&&l.height<t)g=l.width,y=l.height;else if(l=c(this,Be),r>t||o>t){const b=Math.min(t/r,t/o);g=Math.floor(r*b),y=Math.floor(o*b),c(this,Ns)||(l=S(this,xe,vp).call(this,g,y))}const v=new OffscreenCanvas(g,y).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,g,y),f={width:g,height:y,data:v.getImageData(0,0,g,y).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return c(this,ti)}static async deserialize(t,n,i){var y;let r=null;if(t instanceof pE){const{data:{rect:_,rotation:v,id:b,structParent:A,popupRef:E},container:k,parent:{page:{pageNumber:C}}}=t,T=k.querySelector("canvas"),P=i.imageManager.getFromCanvas(k.id,T);T.remove();const M=((y=await n._structTree.getAriaAttributes(`${Cw}${b}`))==null?void 0:y.get("aria-label"))||"";r=t={annotationType:oe.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:C-1,rect:_.slice(0),rotation:v,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:A,popupRef:E}}const o=await super.deserialize(t,n,i),{rect:a,bitmap:l,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&i.imageManager.isValidId(h)?(w(o,At,h),l&&w(o,Be,l)):w(o,$i,u),w(o,Ns,d);const[p,g]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/g,o.annotationElementId=t.id||null,f&&(o.altTextData=f),o._initialData=r,w(o,Mc,!!r),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:oe.STAMP,bitmapId:c(this,At),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Ns),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=S(this,xe,wp).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=S(this,xe,qE).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const a=c(this,Ns)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(c(this,At)))n.stamps.set(c(this,At),{area:a,serialized:i}),i.bitmap=S(this,xe,wp).call(this,!1);else if(c(this,Ns)){const l=n.stamps.get(c(this,At));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=S(this,xe,wp).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Be=new WeakMap,At=new WeakMap,zr=new WeakMap,$i=new WeakMap,Ur=new WeakMap,Ic=new WeakMap,ti=new WeakMap,si=new WeakMap,Ns=new WeakMap,Mc=new WeakMap,xe=new WeakSet,Ou=function(t,n=!1){if(!t){this.remove();return}w(this,Be,t.bitmap),n||(w(this,At,t.id),w(this,Ns,t.isSvg)),t.file&&w(this,Ic,t.file.name),S(this,xe,fv).call(this)},ju=function(){if(w(this,zr,null),this._uiManager.enableWaiting(!1),!!c(this,ti)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Be)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Be)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},yp=function(){if(c(this,At)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,At)).then(i=>S(this,xe,Ou).call(this,i,!0)).finally(()=>S(this,xe,ju).call(this));return}if(c(this,$i)){const i=c(this,$i);w(this,$i,null),this._uiManager.enableWaiting(!0),w(this,zr,this._uiManager.imageManager.getFromUrl(i).then(r=>S(this,xe,Ou).call(this,r)).finally(()=>S(this,xe,ju).call(this)));return}if(c(this,Ur)){const i=c(this,Ur);w(this,Ur,null),this._uiManager.enableWaiting(!0),w(this,zr,this._uiManager.imageManager.getFromFile(i).then(r=>S(this,xe,Ou).call(this,r)).finally(()=>S(this,xe,ju).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Yu.supportedTypesStr;const n=this._uiManager._signal;w(this,zr,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,xe,Ou).call(this,r)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>S(this,xe,ju).call(this))),t.click()},fv=function(){var d;const{div:t}=this;let{width:n,height:i}=c(this,Be);const[r,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*o;else if(n>a*r||i>a*o){const f=Math.min(a*r/n,a*o/i);n*=f,i*=f}const[l,u]=this.parentDimensions;this.setDims(n*l/r,i*u/o),this._uiManager.enableWaiting(!1);const h=w(this,ti,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/r,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),S(this,xe,pv).call(this),c(this,Mc)||(this.parent.addUndoableEditor(this),w(this,Mc,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Ic)&&h.setAttribute("aria-label",c(this,Ic))},vp=function(t,n){const{width:i,height:r}=c(this,Be);let o=i,a=r,l=c(this,Be);for(;o>2*t||a>2*n;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,u,h,0,0,o,a),l=d.transferToImageBitmap()}return l},pv=function(){const[t,n]=this.parentDimensions,{width:i,height:r}=this,o=new uy,a=Math.ceil(i*t*o.sx),l=Math.ceil(r*n*o.sy),u=c(this,ti);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const h=c(this,Ns)?c(this,Be):S(this,xe,vp).call(this,a,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,a,l)},wp=function(t){if(t){if(c(this,Ns)){const r=this._uiManager.imageManager.getSvgUrl(c(this,At));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,Be),n.getContext("2d").drawImage(c(this,Be),0,0),n.toDataURL()}if(c(this,Ns)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*ro.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*ro.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(c(this,Be),0,0,c(this,Be).width,c(this,Be).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(c(this,Be))},qE=function(t){var a;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===n,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},ee(Yu,"_type","stamp"),ee(Yu,"_editorType",oe.STAMP);let dv=Yu;var Pa,Oc,ni,Br,zi,Ys,Hr,jc,Ra,xn,Ui,Ft,Bi,q,Vr,$e,XE,$n,mv,yv,bp;const cn=class cn{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:h}){x(this,$e);x(this,Pa);x(this,Oc,!1);x(this,ni,null);x(this,Br,null);x(this,zi,null);x(this,Ys,new Map);x(this,Hr,!1);x(this,jc,!1);x(this,Ra,!1);x(this,xn,null);x(this,Ui,null);x(this,Ft,null);x(this,Bi,null);x(this,q);const d=[...c(cn,Vr).values()];if(!cn._initialized){cn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),w(this,q,e),this.pageIndex=t,this.div=n,w(this,Pa,r),w(this,ni,o),this.viewport=u,w(this,Ft,l),this.drawLayer=a,this._structTree=i,c(this,q).addLayer(this)}get isEmpty(){return c(this,Ys).size===0}get isInvisible(){return this.isEmpty&&c(this,q).getMode()===oe.NONE}updateToolbar(e){c(this,q).updateToolbar(e)}updateMode(e=c(this,q).getMode()){switch(S(this,$e,bp).call(this),e){case oe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case oe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case oe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of c(cn,Vr).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Ft))==null?void 0:t.div)}setEditingState(e){c(this,q).setEditingState(e)}addCommands(e){c(this,q).addCommands(e)}cleanUndoStack(e){c(this,q).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,ni))==null||t.div.classList.toggle("disabled",!e)}async enable(){w(this,Ra,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of c(this,Ys).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,q).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!c(this,ni)){w(this,Ra,!1);return}const t=c(this,ni).getEditableAnnotations();for(const n of t){if(n.hide(),c(this,q).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}w(this,Ra,!1)}disable(){var i;w(this,jc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of c(this,Ys).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(c(this,ni)){const r=c(this,ni).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(c(this,q).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(c(this,q).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}S(this,$e,bp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of c(cn,Vr).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,jc,!1)}getEditableAnnotation(e){var t;return((t=c(this,ni))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,q).getActive()!==e&&c(this,q).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Ft))!=null&&e.div&&!c(this,Bi)){w(this,Bi,new AbortController);const t=c(this,q).combinedSignal(c(this,Bi));c(this,Ft).div.addEventListener("pointerdown",S(this,$e,XE).bind(this),{signal:t}),c(this,Ft).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Ft))!=null&&e.div&&c(this,Bi)&&(c(this,Bi).abort(),w(this,Bi,null),c(this,Ft).div.classList.remove("highlighting"))}enableClick(){if(c(this,Br))return;w(this,Br,new AbortController);const e=c(this,q).combinedSignal(c(this,Br));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,Br))==null||e.abort(),w(this,Br,null)}attach(e){c(this,Ys).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,q).isDeletedAnnotationElement(t)&&c(this,q).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Ys).delete(e.id),(t=c(this,Pa))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,jc)&&e.annotationElementId&&c(this,q).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,q).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,q).addDeletedAnnotationElement(e.annotationElementId),Ve.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,q).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,Ra)),c(this,q).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,zi)&&(e._focusEventsAllowed=!1,w(this,zi,setTimeout(()=>{w(this,zi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,q)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,Pa))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return c(this,q).getId()}combinedSignal(e){return c(this,q).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,$e,$n))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,q).updateToolbar(e),c(this,q).updateMode(e);const{offsetX:n,offsetY:i}=S(this,$e,yv).call(this),r=this.getNextId(),o=S(this,$e,mv).call(this,{parent:this,id:r,x:n,y:i,uiManager:c(this,q),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(cn,Vr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,q)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),r=S(this,$e,mv).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:c(this,q),isCentered:t,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(S(this,$e,yv).call(this),!0)}setSelected(e){c(this,q).setSelected(e)}toggleSelected(e){c(this,q).toggleSelected(e)}unselect(e){c(this,q).unselect(e)}pointerup(e){var n;const{isMac:t}=Zt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,Hr)&&(w(this,Hr,!1),!((n=c(this,$e,$n))!=null&&n.isDrawer&&c(this,$e,$n).supportMultipleDrawings))){if(!c(this,Oc)){w(this,Oc,!0);return}if(c(this,q).getMode()===oe.STAMP){c(this,q).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(c(this,q).getMode()===oe.HIGHLIGHT&&this.enableTextSelection(),c(this,Hr)){w(this,Hr,!1);return}const{isMac:t}=Zt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(w(this,Hr,!0),(i=c(this,$e,$n))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=c(this,q).getActive();w(this,Oc,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),c(this,xn)){c(this,$e,$n).startDrawing(this,c(this,q),!1,e);return}c(this,q).setCurrentDrawingSession(this),w(this,xn,new AbortController);const t=c(this,q).combinedSignal(c(this,xn));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(w(this,Ui,null),this.commitOrRemove())},{signal:t}),c(this,$e,$n).startDrawing(this,c(this,q),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&w(this,Ui,t);return}c(this,Ui)&&setTimeout(()=>{var t;(t=c(this,Ui))==null||t.focus(),w(this,Ui,null)},0)}endDrawingSession(e=!1){return c(this,xn)?(c(this,q).setCurrentDrawingSession(null),c(this,xn).abort(),w(this,xn,null),w(this,Ui,null),c(this,$e,$n).endDrawing(e)):null}findNewParent(e,t,n){const i=c(this,q).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return c(this,xn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,xn)&&c(this,$e,$n).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,q).getActive())==null?void 0:e.parent)===this&&(c(this,q).commitOrRemove(),c(this,q).setActiveEditor(null)),c(this,zi)&&(clearTimeout(c(this,zi)),w(this,zi,null));for(const n of c(this,Ys).values())(t=c(this,Pa))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Ys).clear(),c(this,q).removeLayer(this)}render({viewport:e}){this.viewport=e,za(this.div,e);for(const t of c(this,q).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,q).commitOrRemove(),S(this,$e,bp).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,za(this.div,{rotation:n}),t!==n)for(const i of c(this,Ys).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,q).viewParameters.realScale}};Pa=new WeakMap,Oc=new WeakMap,ni=new WeakMap,Br=new WeakMap,zi=new WeakMap,Ys=new WeakMap,Hr=new WeakMap,jc=new WeakMap,Ra=new WeakMap,xn=new WeakMap,Ui=new WeakMap,Ft=new WeakMap,Bi=new WeakMap,q=new WeakMap,Vr=new WeakMap,$e=new WeakSet,XE=function(e){c(this,q).unselectAll();const{target:t}=e;if(t===c(this,Ft).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Ft).div.contains(t)){const{isMac:n}=Zt.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,q).showAllEditors("highlight",!0,!0),c(this,Ft).div.classList.add("free"),this.toggleDrawing(),ng.startHighlighting(this,c(this,q).direction==="ltr",{target:c(this,Ft).div,x:e.x,y:e.y}),c(this,Ft).div.addEventListener("pointerup",()=>{c(this,Ft).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,q)._signal}),e.preventDefault()}},$n=function(){return c(cn,Vr).get(c(this,q).getMode())},mv=function(e){const t=c(this,$e,$n);return t?new t.prototype.constructor(e):null},yv=function(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+i),u=(r+a)/2-e,h=(o+l)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},bp=function(){for(const e of c(this,Ys).values())e.isEmpty()&&e.remove()},ee(cn,"_initialized",!1),x(cn,Vr,new Map([Yy,hv,dv,ng].map(e=>[e._editorType,e])));let gv=cn;var Sn,Hd,Kt,Na,Eg,KE,ai,wv,YE,bv;const Mt=class Mt{constructor({pageIndex:e}){x(this,ai);x(this,Sn,null);x(this,Hd,0);x(this,Kt,new Map);x(this,Na,new Map);this.pageIndex=e}setParent(e){if(!c(this,Sn)){w(this,Sn,e);return}if(c(this,Sn)!==e){if(c(this,Kt).size>0)for(const t of c(this,Kt).values())t.remove(),e.append(t);w(this,Sn,e)}}static get _svgFactory(){return de(this,"_svgFactory",new Mw)}draw(e,t=!1,n=!1){const i=Vt(this,Hd)._++,r=S(this,ai,wv).call(this),o=Mt._svgFactory.createElement("defs");r.append(o);const a=Mt._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,Na).set(i,a);const u=n?S(this,ai,YE).call(this,o,l):null,h=Mt._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(r,e),c(this,Kt).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const n=Vt(this,Hd)._++,i=S(this,ai,wv).call(this),r=Mt._svgFactory.createElement("defs");i.append(r);const o=Mt._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const d=Mt._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=Mt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Mt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Mt._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),c(this,Kt).set(n,i),n}finalizeDraw(e,t){c(this,Na).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:n,bbox:i,rootClass:r,path:o}=t,a=typeof e=="number"?c(this,Kt).get(e):e;if(a){if(n&&S(this,ai,bv).call(this,a,n),i&&S(l=Mt,Eg,KE).call(l,a,i),r){const{classList:u}=a;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=a.firstChild.firstChild;S(this,ai,bv).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const n=c(this,Kt).get(e);n&&(c(t,Sn).append(n),c(this,Kt).delete(e),c(t,Kt).set(e,n))}remove(e){c(this,Na).delete(e),c(this,Sn)!==null&&(c(this,Kt).get(e).remove(),c(this,Kt).delete(e))}destroy(){w(this,Sn,null);for(const e of c(this,Kt).values())e.remove();c(this,Kt).clear(),c(this,Na).clear()}};Sn=new WeakMap,Hd=new WeakMap,Kt=new WeakMap,Na=new WeakMap,Eg=new WeakSet,KE=function(e,[t,n,i,r]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},ai=new WeakSet,wv=function(){const e=Mt._svgFactory.create(1,1,!0);return c(this,Sn).append(e),e.setAttribute("aria-hidden",!0),e},YE=function(e,t){const n=Mt._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Mt._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},bv=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},x(Mt,Eg);let vv=Mt;globalThis.pdfjsTestingUtils={HighlightOutliner:Qy};se.AbortException;se.AnnotationEditorLayer;se.AnnotationEditorParamsType;se.AnnotationEditorType;se.AnnotationEditorUIManager;se.AnnotationLayer;se.AnnotationMode;se.ColorPicker;se.DOMSVGFactory;se.DrawLayer;se.FeatureTest;var AI=se.GlobalWorkerOptions;se.ImageKind;se.InvalidPDFException;se.MissingPDFException;se.OPS;se.OutputScale;se.PDFDataRangeTransport;se.PDFDateString;se.PDFWorker;se.PasswordResponses;se.PermissionFlag;se.PixelsPerInch;se.RenderingCancelledException;se.TextLayer;se.TouchManager;se.UnexpectedResponseException;se.Util;se.VerbosityLevel;se.XfaLayer;se.build;se.createValidAbsoluteUrl;se.fetchData;var EI=se.getDocument;se.getFilenameFromUrl;se.getPdfFilenameFromUrl;se.getXfaPageViewport;se.isDataScheme;se.isPdfFile;se.noContextMenu;se.normalizeUnicode;se.setLayerDimensions;se.shadow;se.stopEvent;var kI=se.version;AI.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${kI}/pdf.worker.min.js`;function CI({manga:s,user:e,chapterNumber:t,onBack:n}){const[i,r]=L.useState(!1),[o,a]=L.useState(1),[l,u]=L.useState(!1),[h,d]=L.useState([]),[f,p]=L.useState(""),[g,y]=L.useState([]),[_,v]=L.useState(0),[b,A]=L.useState(!0),[E,k]=L.useState("cascade"),[C,T]=L.useState(!1),[P,M]=L.useState(!1),[j,V]=L.useState("unreadable"),[N,$]=L.useState(""),Z=L.useRef(null),we=L.useRef();L.useEffect(()=>{D(),Y(),e&&(O(),X());const z=ne=>{if(!(ne.target instanceof HTMLInputElement||ne.target instanceof HTMLTextAreaElement))switch(ne.key){case"ArrowLeft":E==="paginated"&&Ae("prev");break;case"ArrowRight":E==="paginated"&&Ae("next");break;case" ":ne.preventDefault(),E==="cascade"&&r(me=>!me);break;case"Escape":P?M(!1):l&&u(!1);break}};return window.addEventListener("keydown",z),()=>{window.removeEventListener("keydown",z),Q.removeAllChannels(),we.current&&window.clearInterval(we.current)}},[s.id,t,e,E,P,l]),L.useEffect(()=>{if(i&&E==="cascade"&&Z.current){const z=o*.5;return we.current=window.setInterval(()=>{window.scrollBy({top:z,behavior:"smooth"}),window.innerHeight+window.pageYOffset>=document.documentElement.scrollHeight-50&&(r(!1),we.current&&window.clearInterval(we.current))},16),()=>{we.current&&window.clearInterval(we.current)}}},[i,o,E]);const D=async()=>{try{const{data:z,error:ne}=await Q.from("chapters").select("pages").eq("manga_id",s.id).eq("number",t).single();if(ne)throw ne;if(!z||!z.pages||!Array.isArray(z.pages))throw new Error("Invalid chapter data");const me=await Promise.all(z.pages.map(async li=>{const tu=`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/pages/${li}`;if(li.endsWith(".pdf")){const nf=await EI(tu).promise,Ek=Array.from({length:nf.numPages},async(zO,kk)=>{const Ww=await nf.getPage(kk+1),dm=Ww.getViewport({scale:2}),rf=document.createElement("canvas");rf.width=dm.width,rf.height=dm.height;const Ck=rf.getContext("2d");return await Ww.render({canvasContext:Ck,viewport:dm}).promise,rf.toDataURL("image/jpeg")});return Promise.all(Ek)}return tu}));y(me.flat())}catch(z){console.error("Error loading chapter:",z),J.error("Failed to load chapter")}finally{A(!1)}},G=async()=>{if(!e){J.error("Please login to report issues");return}try{const{error:z}=await Q.from("manga_reports").insert({manga_id:s.id,chapter:t,user_id:e.id,issue_type:j,description:N});if(z)throw z;J.success("Report submitted successfully"),M(!1),$("")}catch(z){console.error("Error submitting report:",z),J.error("Failed to submit report")}},O=async()=>{if(e)try{const{data:z,error:ne}=await Q.from("comment_subscriptions").select("*").eq("manga_id",s.id).eq("chapter",t).eq("user_id",e.id).maybeSingle();if(ne)throw ne;T(!!z)}catch(z){console.error("Error checking subscription:",z)}},X=()=>{const z=Q.channel(`comments:${s.id}:${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments",filter:`manga_id=eq.${s.id},chapter=eq.${t}`},ne=>{d(me=>[ne.new,...me])}).subscribe();return()=>{Q.removeChannel(z)}},Y=async()=>{try{const{data:z,error:ne}=await Q.from("comments").select("id, user_email, content, created_at").eq("manga_id",s.id).eq("chapter",t).order("created_at",{ascending:!1});if(ne)throw ne;d(z||[])}catch(z){console.error("Error loading comments:",z),J.error("Failed to load comments")}},ge=async()=>{if(!e){J.error("Please login to comment");return}if(!f.trim()){J.error("Please enter a comment");return}try{const{error:z}=await Q.from("comments").insert({manga_id:s.id,chapter:t,user_id:e.id,user_email:e.email,content:f.trim()});if(z)throw z;p(""),J.success("Comment added successfully")}catch(z){console.error("Error adding comment:",z),J.error("Failed to add comment")}},ue=async()=>{if(!e){J.error("Please login to subscribe to comments");return}try{if(C){const{error:z}=await Q.from("comment_subscriptions").delete().eq("manga_id",s.id).eq("chapter",t).eq("user_id",e.id);if(z)throw z;T(!1),J.success("Unsubscribed from comments")}else{const{error:z}=await Q.from("comment_subscriptions").insert({manga_id:s.id,chapter:t,user_id:e.id});if(z)throw z;T(!0),J.success("Subscribed to comments")}}catch(z){console.error("Error toggling subscription:",z),J.error("Failed to update subscription")}},Ae=z=>{v(ne=>z==="prev"?Math.max(0,ne-1):Math.min(g.length-1,ne+1))},Pt=()=>{k(z=>z==="paginated"?"cascade":"paginated"),v(0),r(!1),we.current&&window.clearInterval(we.current)};return b?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):m.jsxs("div",{className:"min-h-screen bg-gray-900",children:[m.jsx("div",{className:"fixed top-0 left-0 right-0 bg-gray-800 shadow-lg z-50",children:m.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[m.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[m.jsx(wS,{size:20}),m.jsx("span",{children:"Back to Manga"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("button",{onClick:Pt,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors",title:`Switch to ${E==="paginated"?"cascade":"paginated"} mode`,children:[m.jsx(c2,{size:20}),m.jsx("span",{children:E==="paginated"?"Cascade":"Paginated"})]}),E==="cascade"&&m.jsx("button",{onClick:()=>r(!i),className:`p-2 rounded-lg hover:bg-gray-700 transition-colors ${i?"text-blue-500":""}`,title:`${i?"Pause":"Auto-scroll"} (Space)`,children:i?m.jsx(w2,{size:20}):m.jsx(b2,{size:20})}),m.jsx("button",{onClick:()=>u(!l),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors",title:"Comments",children:m.jsx(y2,{size:20})}),e&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:ue,className:`p-2 rounded-lg hover:bg-gray-700 transition-colors ${C?"text-blue-500":"text-gray-400"}`,title:C?"Unsubscribe from comments":"Subscribe to comments",children:C?m.jsx(i_,{size:20}):m.jsx(n_,{size:20})}),m.jsx("button",{onClick:()=>M(!0),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors text-yellow-500",title:"Report an issue",children:m.jsx(vS,{size:20})})]})]})]})}),m.jsx("div",{className:"pt-16 pb-16",children:E==="cascade"?m.jsx("div",{ref:Z,className:"container mx-auto px-4 max-w-4xl space-y-4",children:g.map((z,ne)=>m.jsx("img",{src:z,alt:`${s.title} - Chapter ${t} - Page ${ne+1}`,className:"w-full rounded-lg shadow-2xl",loading:"lazy"},ne))}):m.jsx("div",{className:"container mx-auto px-4 max-w-4xl",children:m.jsx("img",{src:g[_],alt:`${s.title} - Chapter ${t} - Page ${_+1}`,className:"w-full rounded-lg shadow-2xl"})})}),E==="cascade"&&i&&m.jsxs("div",{className:"fixed top-24 right-4 bg-gray-800 rounded-lg shadow-lg p-4 z-40",children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Scroll Speed"}),m.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:z=>a(Number(z.target.value)),className:"w-24"})]}),l&&m.jsxs("div",{className:"fixed right-4 top-24 w-80 bg-gray-800 rounded-lg shadow-lg p-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"font-bold",children:"Comments"}),e&&m.jsx("button",{onClick:ue,className:`p-2 rounded-lg hover:bg-gray-700 transition-colors ${C?"text-blue-500":"text-gray-400"}`,title:C?"Unsubscribe from comments":"Subscribe to comments",children:C?m.jsx(i_,{size:20}):m.jsx(n_,{size:20})})]}),e?m.jsxs("div",{className:"mb-4",children:[m.jsx("textarea",{value:f,onChange:z=>p(z.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Add a comment...",rows:3}),m.jsx("button",{onClick:ge,className:"mt-2 px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors text-sm",disabled:!f.trim(),children:"Post"})]}):m.jsx("p",{className:"text-gray-400 mb-4",children:"Please login to comment"}),m.jsxs("div",{className:"space-y-4",children:[h.map(z=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("span",{className:"text-sm font-medium",children:z.user_email}),m.jsx("span",{className:"text-xs text-gray-400",children:new Date(z.created_at).toLocaleDateString()})]}),m.jsx("p",{className:"text-sm text-gray-300",children:z.content})]},z.id)),h.length===0&&m.jsx("p",{className:"text-center text-gray-400",children:"No comments yet"})]})]}),P&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Report Issue"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Issue Type"}),m.jsxs("select",{value:j,onChange:z=>V(z.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"unreadable",children:"Content Unreadable"}),m.jsx("option",{value:"missing",children:"Missing Pages"}),m.jsx("option",{value:"wrong_order",children:"Wrong Page Order"}),m.jsx("option",{value:"other",children:"Other"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),m.jsx("textarea",{value:N,onChange:z=>$(z.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",placeholder:"Please describe the issue..."})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:G,className:"flex-1 px-4 py-2 bg-yellow-500 rounded-lg hover:bg-yellow-600 transition-colors font-medium",children:"Submit Report"}),m.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),E==="paginated"&&m.jsx("div",{className:"fixed bottom-0 w-full bg-gray-800 shadow-lg",children:m.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[m.jsx("button",{onClick:()=>Ae("prev"),disabled:_===0,className:"p-2 rounded-full hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page (Left Arrow)",children:m.jsx(a2,{size:24})}),m.jsxs("span",{className:"text-sm",children:["Page ",_+1," of ",g.length]}),m.jsx("button",{onClick:()=>Ae("next"),disabled:_===g.length-1,className:"p-2 rounded-full hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page (Right Arrow)",children:m.jsx(l2,{size:24})})]})})]})}function TI({onMangaSelect:s}){const[e,t]=L.useState([]),[n,i]=L.useState(!0),[r,o]=L.useState([]),[a,l]=L.useState("all"),[u,h]=L.useState("Latest"),[d,f]=L.useState([]);L.useEffect(()=>{p(),g()},[r,a,u]);const p=async()=>{try{const{data:_,error:v}=await Q.from("genres").select("name").order("name");if(v)throw v;f(_.map(b=>b.name))}catch(_){console.error("Error loading genres:",_),J.error("Failed to load genres")}},g=async()=>{try{i(!0);let _=Q.from("mangas").select(`
          *,
          manga_genres (
            genres (name)
          )
        `);switch(a!=="all"&&(_=_.eq("status",a)),u){case"Latest":_=_.order("created_at",{ascending:!1});break;case"Title A-Z":_=_.order("title",{ascending:!0});break;case"Title Z-A":_=_.order("title",{ascending:!1});break;case"Rating":_=_.order("rating",{ascending:!1});break}const{data:v,error:b}=await _;if(b)throw b;let A=v;r.length>0&&(A=v.filter(k=>k.manga_genres.some(C=>r.includes(C.genres.name))));const E=A.map(k=>({id:k.id,title:k.title,cover:k.cover_url?`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/covers/${k.cover_url}`:"",genres:k.manga_genres.map(C=>C.genres.name),author:k.author,status:k.status,rating:k.rating||0,chapters:0,description:k.description}));t(E)}catch(_){console.error("Error loading mangas:",_),J.error("Failed to load mangas")}finally{i(!1)}},y=["Latest","Rating","Title A-Z","Title Z-A"];return m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[m.jsxs("aside",{className:"w-full md:w-64 bg-gray-800 p-6 rounded-lg h-fit",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsx(u2,{size:20}),m.jsx("h2",{className:"text-xl font-bold",children:"Filters"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Status"}),m.jsx("div",{className:"flex flex-col gap-2",children:["all","ongoing","completed"].map(_=>m.jsxs("label",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"radio",name:"status",checked:a===_,onChange:()=>l(_),className:"text-blue-500"}),m.jsx("span",{className:"capitalize",children:_})]},_))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Genres"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(_=>m.jsx("button",{onClick:()=>o(v=>v.includes(_)?v.filter(b=>b!==_):[...v,_]),className:`px-3 py-1 rounded-full text-sm transition-colors ${r.includes(_)?"bg-blue-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:_},_))})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Sort By"}),m.jsx("select",{value:u,onChange:_=>h(_.target.value),className:"w-full bg-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(_=>m.jsx("option",{value:_,children:_},_))})]})]}),m.jsx("div",{className:"flex-1",children:n?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx(Y0,{className:"animate-spin",size:32})}):e.length===0?m.jsx("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:m.jsx("p",{className:"text-gray-400",children:"No manga found matching your filters"})}):m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(_=>m.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:transform hover:scale-105 transition-transform cursor-pointer",onClick:()=>s(_),children:[m.jsx("img",{src:_.cover||"https://via.placeholder.com/300x400",alt:_.title,className:"w-full h-56 object-cover"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold mb-2 line-clamp-1",children:_.title}),m.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[m.jsx(Vc,{className:"text-yellow-500",size:16}),m.jsx("span",{children:_.rating.toFixed(1)})]}),m.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.genres.slice(0,2).map(v=>m.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded-full text-xs",children:v},v)),_.genres.length>2&&m.jsxs("span",{className:"px-2 py-1 bg-gray-700 rounded-full text-xs",children:["+",_.genres.length-2]})]})]})]},_.id))})})]})})}function PI({onMangaSelect:s}){const[e,t]=L.useState([]),[n,i]=L.useState([]),[r,o]=L.useState([]),[a,l]=L.useState(!0);L.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:h,error:d}=await Q.from("mangas").select(`
          *,
          manga_genres (
            genres (name)
          ),
          chapters (id)
        `).order("rating",{ascending:!1}).limit(3);if(d)throw d;const f=new Date;f.setDate(f.getDate()-7);const{data:p,error:g}=await Q.from("mangas").select(`
          *,
          manga_genres (
            genres (name)
          ),
          chapters!inner (id)
        `).gte("chapters.created_at",f.toISOString()).order("created_at",{ascending:!1}).limit(6);if(g)throw g;const{data:y,error:_}=await Q.from("mangas").select(`
          *,
          manga_genres (
            genres (name)
          ),
          chapters (id)
        `).order("updated_at",{ascending:!1}).limit(3);if(_)throw _;const v=b=>{var A;return{id:b.id,title:b.title,cover:b.cover_url?`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/covers/${b.cover_url}`:"https://images.unsplash.com/photo-1560415755-bd80d06eda60?w=500",genres:b.manga_genres.map(E=>E.genres.name),author:b.author||"Unknown",status:b.status||"ongoing",rating:b.rating||0,chapters:((A=b.chapters)==null?void 0:A.length)||0,description:b.description||"No description available"}};t((h==null?void 0:h.map(v))||[]),i((p==null?void 0:p.map(v))||[]),o((y==null?void 0:y.map(v))||[])}catch(h){console.error("Error loading manga:",h),J.error("Failed to load manga")}finally{l(!1)}};return a?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"animate-pulse space-y-8",children:[m.jsx("div",{className:"h-64 bg-gray-800 rounded-lg"}),m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx("div",{className:"h-48 bg-gray-800 rounded-lg"}),m.jsx("div",{className:"h-48 bg-gray-800 rounded-lg"}),m.jsx("div",{className:"h-48 bg-gray-800 rounded-lg"})]})]})}):m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("section",{className:"mb-12",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Featured Manga"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(h=>m.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:transform hover:scale-105 transition-transform cursor-pointer",onClick:()=>s(h),children:[m.jsx("img",{src:h.cover,alt:h.title,className:"w-full h-64 object-cover"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:h.title}),m.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[m.jsx(Vc,{className:"text-yellow-500",size:16}),m.jsx("span",{children:h.rating.toFixed(1)}),m.jsx("span",{children:"•"}),m.jsxs("span",{children:[h.chapters," chapters"]})]}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:h.genres.map(d=>m.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded-full text-sm",children:d},d))}),m.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:h.description})]})]},h.id))})]}),m.jsxs("section",{className:"mb-12",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsx(A2,{className:"text-red-500",size:24}),m.jsx("h2",{className:"text-2xl font-bold",children:"Trending Now"})]}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:n.map(h=>m.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(h),children:[m.jsx("img",{src:h.cover,alt:h.title,className:"w-full h-40 object-cover"}),m.jsxs("div",{className:"p-2",children:[m.jsx("h3",{className:"font-medium text-sm line-clamp-1",children:h.title}),m.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs",children:[m.jsx(Vc,{className:"text-yellow-500",size:12}),m.jsx("span",{children:h.rating.toFixed(1)})]})]})]},h.id))})]}),m.jsxs("section",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsx(Xp,{className:"text-blue-500",size:24}),m.jsx("h2",{className:"text-2xl font-bold",children:"Recently Updated"})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(h=>m.jsxs("div",{className:"flex bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(h),children:[m.jsx("img",{src:h.cover,alt:h.title,className:"w-24 h-32 object-cover"}),m.jsxs("div",{className:"p-4 flex-1",children:[m.jsx("h3",{className:"font-semibold mb-2",children:h.title}),m.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[m.jsxs("span",{className:"px-2 py-1 bg-gray-700 rounded-full",children:["Ch. ",h.chapters]}),m.jsx("span",{className:"text-green-500",children:"New"})]}),m.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:h.description})]})]},h.id))})]})]})}function RI({onClose:s}){const[e,t]=L.useState(!0),[n,i]=L.useState(""),[r,o]=L.useState(""),[a,l]=L.useState(""),[u,h]=L.useState(!1),[d,f]=L.useState(!1),p=async g=>{g.preventDefault(),f(!0);try{if(u){const{error:y}=await Q.auth.resetPasswordForEmail(n,{redirectTo:window.location.origin});if(y)throw y;J.success("Password reset instructions sent to your email"),h(!1);return}if(e){const{error:y}=await Q.auth.signInWithPassword({email:n,password:r});if(y){if(y.message==="Invalid login credentials")J.error("Invalid email or password");else throw y;return}J.success("Welcome back!"),s()}else{const{data:y,error:_}=await Q.auth.signUp({email:n,password:r});if(_)throw _;if(y.user){const{error:v}=await Q.from("profiles").insert({user_id:y.user.id,username:a||n.split("@")[0],is_admin:!1});if(v)throw v}J.success("Account created successfully!"),s()}}catch(y){console.error("Auth error:",y),J.error(y.message||"An error occurred")}finally{f(!1)}};return m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md relative",children:[m.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:m.jsx(Bg,{size:20})}),m.jsx("h2",{className:"text-2xl font-bold mb-6",children:u?"Reset Password":e?"Login":"Sign Up"}),m.jsxs("form",{onSubmit:p,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),m.jsx("input",{type:"email",value:n,onChange:g=>i(g.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),!e&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),m.jsx("input",{type:"text",value:a,onChange:g=>l(g.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),!u&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),m.jsx("input",{type:"password",value:r,onChange:g=>o(g.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6}),!e&&m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Password must be at least 6 characters long"})]}),m.jsx("button",{type:"submit",disabled:d,className:"w-full px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):m.jsxs(m.Fragment,{children:[u&&m.jsx(m2,{size:20}),u?"Send Reset Instructions":e?"Login":"Sign Up"]})})]}),m.jsx("div",{className:"mt-4 text-center text-sm text-gray-400",children:u?m.jsx("button",{onClick:()=>h(!1),className:"text-blue-400 hover:text-blue-300",children:"Back to login"}):m.jsxs(m.Fragment,{children:[e?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>h(!0),className:"text-blue-400 hover:text-blue-300",children:"Forgot password?"}),m.jsx("span",{className:"mx-2",children:"•"})]}):null,m.jsx("button",{onClick:()=>t(!e),className:"text-blue-400 hover:text-blue-300",children:e?"Create an account":"Already have an account?"})]})})]})})}function NI({userId:s,onMangaSelect:e}){const[t,n]=L.useState("reading"),[i,r]=L.useState([]),[o,a]=L.useState(!0);L.useEffect(()=>{l()},[t]);const l=async()=>{try{a(!0);const{data:d,error:f}=await Q.from("user_library_view").select("*").eq("user_id",s).eq("status",t);if(f)throw f;r(d||[])}catch(d){console.error("Error loading library:",d),J.error("Failed to load library")}finally{a(!1)}},u=[{id:"reading",label:"Reading",icon:m.jsx(r_,{size:20})},{id:"completed",label:"Completed",icon:m.jsx(o2,{size:20})},{id:"planned",label:"Plan to Read",icon:m.jsx(Xp,{size:20})},{id:"on-hold",label:"On Hold",icon:m.jsx(p2,{size:20})}],h=d=>{const f=i.find(p=>p.manga_id===d);if(f){const p={id:f.manga_id,title:f.manga_title,cover:f.cover_url,author:f.author,rating:f.rating,status:"ongoing",genres:[],chapters:f.current_chapter,description:""};e(p)}};return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"My Library"}),m.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:u.map(d=>m.jsxs("button",{onClick:()=>n(d.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${t===d.id?"bg-blue-500 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:[d.icon,m.jsx("span",{children:d.label})]},d.id))}),o&&m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-400",children:"Loading your library..."})]}),!o&&i.length===0&&m.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[m.jsx("div",{className:"mb-4",children:m.jsx(r_,{size:48,className:"mx-auto text-gray-400"})}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No manga in this category"}),m.jsxs("p",{className:"text-gray-400",children:["Start adding manga to your ",t," list!"]})]}),!o&&i.length>0&&m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:i.map(d=>m.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:transform hover:scale-105 transition-transform cursor-pointer",onClick:()=>h(d.manga_id),children:[m.jsx("img",{src:d.cover_url,alt:d.manga_title,className:"w-full h-48 object-cover"}),m.jsxs("div",{className:"p-3",children:[m.jsx("h3",{className:"font-medium text-sm line-clamp-1",children:d.manga_title}),m.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-400",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Vc,{className:"text-yellow-500",size:14}),m.jsx("span",{children:d.rating})]}),m.jsxs("span",{className:"px-2 py-1 bg-gray-700 rounded-full text-xs",children:["Ch. ",d.current_chapter]})]})]})]},d.manga_id))})]})}function LI({user:s,onClose:e,onUpdate:t}){const[n,i]=L.useState(s.username||s.email.split("@")[0]),[r,o]=L.useState(""),[a,l]=L.useState(""),[u,h]=L.useState(""),[d,f]=L.useState(null),[p,g]=L.useState(s.avatar_url?`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/avatars/${s.avatar_url}`:null),y=L.useRef(null),_=E=>{if(E.target.files&&E.target.files[0]){const k=E.target.files[0];f(k),g(URL.createObjectURL(k))}},v=async()=>{try{const{error:E}=await Q.from("profiles").update({username:n}).eq("user_id",s.id);if(E)throw E;t({...s,username:n}),J.success("Username updated successfully")}catch{J.error("Failed to update username")}},b=async()=>{if(a!==u){J.error("New passwords do not match");return}try{const{error:E}=await Q.auth.updateUser({password:a});if(E)throw E;o(""),l(""),h(""),J.success("Password updated successfully")}catch{J.error("Failed to update password")}},A=async()=>{if(d)try{const E=d.name.split(".").pop(),k=`${s.id}/${Math.random()}.${E}`,{error:C,data:T}=await Q.storage.from("avatars").upload(k,d,{upsert:!0,cacheControl:"3600"});if(C)throw C;const{error:P}=await Q.from("profiles").update({avatar_url:k}).eq("user_id",s.id);if(P)throw P;const M=`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/avatars/${k}`;t({...s,avatar_url:k}),g(M),f(null),J.success("Avatar updated successfully")}catch(E){console.error("Avatar upload error:",E),J.error("Failed to update avatar")}};return m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md relative",children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:m.jsx(Bg,{size:20})}),m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Settings"}),m.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-700",children:p?m.jsx("img",{src:p,alt:"Avatar",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx(o_,{size:32,className:"text-gray-400"})})}),m.jsx("button",{onClick:()=>{var E;return(E=y.current)==null?void 0:E.click()},className:"absolute bottom-0 right-0 p-2 bg-blue-500 rounded-full hover:bg-blue-600 transition-colors",children:m.jsx(o_,{size:16})}),m.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:_,className:"hidden"})]}),d&&m.jsxs("button",{onClick:A,className:"mt-4 px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors text-sm flex items-center gap-2",children:[m.jsx(xS,{size:16}),"Save Avatar"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:n,onChange:E=>i(E.target.value),className:"flex-1 px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors",children:"Save"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:"Change Password"}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Password"}),m.jsx("input",{type:"password",value:r,onChange:E=>o(E.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"New Password"}),m.jsx("input",{type:"password",value:a,onChange:E=>l(E.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm New Password"}),m.jsx("input",{type:"password",value:u,onChange:E=>h(E.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m.jsx("button",{onClick:b,className:"w-full px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors",children:"Update Password"})]})]})})}function II({manga:s,user:e,onBack:t,onReadChapter:n}){const[i,r]=L.useState([]),[o,a]=L.useState(!0),[l,u]=L.useState(null);L.useEffect(()=>{h(),e&&d()},[s.id,e]);const h=async()=>{try{if(!s.id||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s.id))throw new Error("Invalid manga ID");const{data:p,error:g}=await Q.from("chapters").select("id, number, title, created_at").eq("manga_id",s.id).order("number");if(g)throw g;r(p||[])}catch(p){console.error("Error loading chapters:",p),J.error("Failed to load chapters")}finally{a(!1)}},d=async()=>{if(!(!e||!s.id||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s.id)))try{const{data:p,error:g}=await Q.from("user_library").select("status, current_chapter").eq("manga_id",s.id).eq("user_id",e.id).maybeSingle();if(g&&g.code!=="PGRST116")throw g;u(p||null)}catch(p){console.error("Error loading library status:",p),u(null)}},f=async p=>{if(!e){J.error("Please login to add manga to your library");return}if(!s.id||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s.id)){J.error("Invalid manga ID");return}try{const{error:g}=await Q.from("user_library").upsert({user_id:e.id,manga_id:s.id,status:p,current_chapter:(l==null?void 0:l.current_chapter)||1});if(g)throw g;u({status:p,current_chapter:(l==null?void 0:l.current_chapter)||1}),J.success("Added to library")}catch(g){console.error("Error updating library:",g),J.error("Failed to update library")}};return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors",children:[m.jsx(wS,{size:20}),m.jsx("span",{children:"Back to Directory"})]}),m.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:m.jsxs("div",{className:"md:flex",children:[m.jsx("div",{className:"md:w-1/3 lg:w-1/4",children:m.jsx("img",{src:s.cover||"https://via.placeholder.com/300x400",alt:s.title,className:"w-full h-[400px] object-cover"})}),m.jsxs("div",{className:"p-6 md:flex-1",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4",children:s.title}),m.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Vc,{className:"text-yellow-500",size:20}),m.jsx("span",{children:s.rating.toFixed(1)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(K0,{size:20}),m.jsxs("span",{children:[i.length," Chapters"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Xp,{size:20}),m.jsx("span",{className:"capitalize",children:s.status})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Genres"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:s.genres.map(p=>m.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded-full text-sm",children:p},p))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),m.jsx("p",{className:"text-gray-300",children:s.description})]}),e&&m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsxs("button",{onClick:()=>f("reading"),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${(l==null?void 0:l.status)==="reading"?"bg-blue-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[m.jsx(bS,{size:20}),m.jsx("span",{children:"Reading"})]}),m.jsxs("button",{onClick:()=>f("planned"),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${(l==null?void 0:l.status)==="planned"?"bg-blue-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[m.jsx(Xp,{size:20}),m.jsx("span",{children:"Plan to Read"})]}),m.jsxs("button",{onClick:()=>f("completed"),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${(l==null?void 0:l.status)==="completed"?"bg-blue-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[m.jsx(Vc,{size:20}),m.jsx("span",{children:"Completed"})]})]})]})]})}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Chapters"}),o?m.jsx("div",{className:"text-center py-8",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"})}):i.length===0?m.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[m.jsx(K0,{size:48,className:"mx-auto text-gray-400 mb-4"}),m.jsx("p",{className:"text-gray-400",children:"No chapters available yet"})]}):m.jsx("div",{className:"grid gap-4",children:i.map(p=>m.jsxs("button",{onClick:()=>n(s.id,p.number),className:"flex items-center justify-between bg-gray-800 p-4 rounded-lg hover:bg-gray-700 transition-colors text-left",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"font-medium",children:["Chapter ",p.number]}),p.title&&m.jsx("p",{className:"text-sm text-gray-400",children:p.title})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("span",{className:"text-sm text-gray-400",children:new Date(p.created_at).toLocaleDateString()}),m.jsx(_S,{size:20,className:"text-blue-500"})]})]},p.id))})]})]})}function JE(s,e){return function(){return s.apply(e,arguments)}}const{toString:MI}=Object.prototype,{getPrototypeOf:jw}=Object,rm=(s=>e=>{const t=MI.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),In=s=>(s=s.toLowerCase(),e=>rm(e)===s),om=s=>e=>typeof e===s,{isArray:Zc}=Array,vh=om("undefined");function OI(s){return s!==null&&!vh(s)&&s.constructor!==null&&!vh(s.constructor)&&Fs(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const QE=In("ArrayBuffer");function jI(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&QE(s.buffer),e}const DI=om("string"),Fs=om("function"),ZE=om("number"),am=s=>s!==null&&typeof s=="object",FI=s=>s===!0||s===!1,_p=s=>{if(rm(s)!=="object")return!1;const e=jw(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},$I=In("Date"),zI=In("File"),UI=In("Blob"),BI=In("FileList"),HI=s=>am(s)&&Fs(s.pipe),VI=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||Fs(s.append)&&((e=rm(s))==="formdata"||e==="object"&&Fs(s.toString)&&s.toString()==="[object FormData]"))},GI=In("URLSearchParams"),[WI,qI,XI,KI]=["ReadableStream","Request","Response","Headers"].map(In),YI=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tf(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let n,i;if(typeof s!="object"&&(s=[s]),Zc(s))for(n=0,i=s.length;n<i;n++)e.call(null,s[n],n,s);else{const r=t?Object.getOwnPropertyNames(s):Object.keys(s),o=r.length;let a;for(n=0;n<o;n++)a=r[n],e.call(null,s[a],a,s)}}function ek(s,e){e=e.toLowerCase();const t=Object.keys(s);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Co=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tk=s=>!vh(s)&&s!==Co;function _v(){const{caseless:s}=tk(this)&&this||{},e={},t=(n,i)=>{const r=s&&ek(e,i)||i;_p(e[r])&&_p(n)?e[r]=_v(e[r],n):_p(n)?e[r]=_v({},n):Zc(n)?e[r]=n.slice():e[r]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&tf(arguments[n],t);return e}const JI=(s,e,t,{allOwnKeys:n}={})=>(tf(e,(i,r)=>{t&&Fs(i)?s[r]=JE(i,t):s[r]=i},{allOwnKeys:n}),s),QI=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),ZI=(s,e,t,n)=>{s.prototype=Object.create(e.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},eM=(s,e,t,n)=>{let i,r,o;const a={};if(e=e||{},s==null)return e;do{for(i=Object.getOwnPropertyNames(s),r=i.length;r-- >0;)o=i[r],(!n||n(o,s,e))&&!a[o]&&(e[o]=s[o],a[o]=!0);s=t!==!1&&jw(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},tM=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const n=s.indexOf(e,t);return n!==-1&&n===t},sM=s=>{if(!s)return null;if(Zc(s))return s;let e=s.length;if(!ZE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},nM=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&jw(Uint8Array)),iM=(s,e)=>{const n=(s&&s[Symbol.iterator]).call(s);let i;for(;(i=n.next())&&!i.done;){const r=i.value;e.call(s,r[0],r[1])}},rM=(s,e)=>{let t;const n=[];for(;(t=s.exec(e))!==null;)n.push(t);return n},oM=In("HTMLFormElement"),aM=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),z_=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),lM=In("RegExp"),sk=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),n={};tf(t,(i,r)=>{let o;(o=e(i,r,s))!==!1&&(n[r]=o||i)}),Object.defineProperties(s,n)},cM=s=>{sk(s,(e,t)=>{if(Fs(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=s[t];if(Fs(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},uM=(s,e)=>{const t={},n=i=>{i.forEach(r=>{t[r]=!0})};return Zc(s)?n(s):n(String(s).split(e)),t},hM=()=>{},dM=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e;function fM(s){return!!(s&&Fs(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const pM=s=>{const e=new Array(10),t=(n,i)=>{if(am(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const r=Zc(n)?[]:{};return tf(n,(o,a)=>{const l=t(o,i+1);!vh(l)&&(r[a]=l)}),e[i]=void 0,r}}return n};return t(s,0)},gM=In("AsyncFunction"),mM=s=>s&&(am(s)||Fs(s))&&Fs(s.then)&&Fs(s.catch),nk=((s,e)=>s?setImmediate:e?((t,n)=>(Co.addEventListener("message",({source:i,data:r})=>{i===Co&&r===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Co.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Fs(Co.postMessage)),yM=typeof queueMicrotask<"u"?queueMicrotask.bind(Co):typeof process<"u"&&process.nextTick||nk,R={isArray:Zc,isArrayBuffer:QE,isBuffer:OI,isFormData:VI,isArrayBufferView:jI,isString:DI,isNumber:ZE,isBoolean:FI,isObject:am,isPlainObject:_p,isReadableStream:WI,isRequest:qI,isResponse:XI,isHeaders:KI,isUndefined:vh,isDate:$I,isFile:zI,isBlob:UI,isRegExp:lM,isFunction:Fs,isStream:HI,isURLSearchParams:GI,isTypedArray:nM,isFileList:BI,forEach:tf,merge:_v,extend:JI,trim:YI,stripBOM:QI,inherits:ZI,toFlatObject:eM,kindOf:rm,kindOfTest:In,endsWith:tM,toArray:sM,forEachEntry:iM,matchAll:rM,isHTMLForm:oM,hasOwnProperty:z_,hasOwnProp:z_,reduceDescriptors:sk,freezeMethods:cM,toObjectSet:uM,toCamelCase:aM,noop:hM,toFiniteNumber:dM,findKey:ek,global:Co,isContextDefined:tk,isSpecCompliantForm:fM,toJSONObject:pM,isAsyncFn:gM,isThenable:mM,setImmediate:nk,asap:yM};function ie(s,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}R.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const ik=ie.prototype,rk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{rk[s]={value:s}});Object.defineProperties(ie,rk);Object.defineProperty(ik,"isAxiosError",{value:!0});ie.from=(s,e,t,n,i,r)=>{const o=Object.create(ik);return R.toFlatObject(s,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ie.call(o,s.message,e,t,n,i),o.cause=s,o.name=s.name,r&&Object.assign(o,r),o};const vM=null;function xv(s){return R.isPlainObject(s)||R.isArray(s)}function ok(s){return R.endsWith(s,"[]")?s.slice(0,-2):s}function U_(s,e,t){return s?s.concat(e).map(function(i,r){return i=ok(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function wM(s){return R.isArray(s)&&!s.some(xv)}const bM=R.toFlatObject(R,{},null,function(e){return/^is[A-Z]/.test(e)});function lm(s,e,t){if(!R.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=R.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!R.isUndefined(_[y])});const n=t.metaTokens,i=t.visitor||h,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(e);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(R.isDate(g))return g.toISOString();if(!l&&R.isBlob(g))throw new ie("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(g)||R.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,y,_){let v=g;if(g&&!_&&typeof g=="object"){if(R.endsWith(y,"{}"))y=n?y:y.slice(0,-2),g=JSON.stringify(g);else if(R.isArray(g)&&wM(g)||(R.isFileList(g)||R.endsWith(y,"[]"))&&(v=R.toArray(g)))return y=ok(y),v.forEach(function(A,E){!(R.isUndefined(A)||A===null)&&e.append(o===!0?U_([y],E,r):o===null?y:y+"[]",u(A))}),!1}return xv(g)?!0:(e.append(U_(_,y,r),u(g)),!1)}const d=[],f=Object.assign(bM,{defaultVisitor:h,convertValue:u,isVisitable:xv});function p(g,y){if(!R.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(g),R.forEach(g,function(v,b){(!(R.isUndefined(v)||v===null)&&i.call(e,v,R.isString(b)?b.trim():b,y,f))===!0&&p(v,y?y.concat(b):[b])}),d.pop()}}if(!R.isObject(s))throw new TypeError("data must be an object");return p(s),e}function B_(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Dw(s,e){this._pairs=[],s&&lm(s,this,e)}const ak=Dw.prototype;ak.append=function(e,t){this._pairs.push([e,t])};ak.toString=function(e){const t=e?function(n){return e.call(this,n,B_)}:B_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function _M(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lk(s,e,t){if(!e)return s;const n=t&&t.encode||_M;R.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=R.isURLSearchParams(e)?e.toString():new Dw(e,t).toString(n),r){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class H_{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,function(n){n!==null&&e(n)})}}const ck={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xM=typeof URLSearchParams<"u"?URLSearchParams:Dw,SM=typeof FormData<"u"?FormData:null,AM=typeof Blob<"u"?Blob:null,EM={isBrowser:!0,classes:{URLSearchParams:xM,FormData:SM,Blob:AM},protocols:["http","https","file","blob","url","data"]},Fw=typeof window<"u"&&typeof document<"u",Sv=typeof navigator=="object"&&navigator||void 0,kM=Fw&&(!Sv||["ReactNative","NativeScript","NS"].indexOf(Sv.product)<0),CM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",TM=Fw&&window.location.href||"http://localhost",PM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fw,hasStandardBrowserEnv:kM,hasStandardBrowserWebWorkerEnv:CM,navigator:Sv,origin:TM},Symbol.toStringTag,{value:"Module"})),Bt={...PM,...EM};function RM(s,e){return lm(s,new Bt.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,r){return Bt.isNode&&R.isBuffer(t)?(this.append(n,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function NM(s){return R.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function LM(s){const e={},t=Object.keys(s);let n;const i=t.length;let r;for(n=0;n<i;n++)r=t[n],e[r]=s[r];return e}function uk(s){function e(t,n,i,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&R.isArray(i)?i.length:o,l?(R.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!R.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],r)&&R.isArray(i[o])&&(i[o]=LM(i[o])),!a)}if(R.isFormData(s)&&R.isFunction(s.entries)){const t={};return R.forEachEntry(s,(n,i)=>{e(NM(n),i,t,0)}),t}return null}function IM(s,e,t){if(R.isString(s))try{return(e||JSON.parse)(s),R.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(s)}const sf={transitional:ck,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=R.isObject(e);if(r&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return i?JSON.stringify(uk(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e)||R.isReadableStream(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RM(e,this.formSerializer).toString();if((a=R.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return lm(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),IM(e)):e}],transformResponse:[function(e){const t=this.transitional||sf.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(R.isResponse(e)||R.isReadableStream(e))return e;if(e&&R.isString(e)&&(n&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ie.from(a,ie.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],s=>{sf.headers[s]={}});const MM=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OM=s=>{const e={};let t,n,i;return s&&s.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&MM[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},V_=Symbol("internals");function gu(s){return s&&String(s).trim().toLowerCase()}function xp(s){return s===!1||s==null?s:R.isArray(s)?s.map(xp):String(s)}function jM(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(s);)e[n[1]]=n[2];return e}const DM=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Qm(s,e,t,n,i){if(R.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!R.isString(e)){if(R.isString(n))return e.indexOf(n)!==-1;if(R.isRegExp(n))return n.test(e)}}function FM(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function $M(s,e){const t=R.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+t,{value:function(i,r,o){return this[n].call(this,e,i,r,o)},configurable:!0})})}class vs{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(a,l,u){const h=gu(l);if(!h)throw new Error("header name must be a non-empty string");const d=R.findKey(i,h);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=xp(a))}const o=(a,l)=>R.forEach(a,(u,h)=>r(u,h,l));if(R.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(R.isString(e)&&(e=e.trim())&&!DM(e))o(OM(e),t);else if(R.isHeaders(e))for(const[a,l]of e.entries())r(l,a,n);else e!=null&&r(t,e,n);return this}get(e,t){if(e=gu(e),e){const n=R.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return jM(i);if(R.isFunction(t))return t.call(this,i,n);if(R.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=gu(e),e){const n=R.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Qm(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function r(o){if(o=gu(o),o){const a=R.findKey(n,o);a&&(!t||Qm(n,n[a],a,t))&&(delete n[a],i=!0)}}return R.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];(!e||Qm(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return R.forEach(this,(i,r)=>{const o=R.findKey(n,r);if(o){t[o]=xp(i),delete t[r];return}const a=e?FM(r):String(r).trim();a!==r&&delete t[r],t[a]=xp(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return R.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&R.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[V_]=this[V_]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=gu(o);n[a]||($M(i,o),n[a]=!0)}return R.isArray(e)?e.forEach(r):r(e),this}}vs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(vs.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(n){this[t]=n}}});R.freezeMethods(vs);function Zm(s,e){const t=this||sf,n=e||t,i=vs.from(n.headers);let r=n.data;return R.forEach(s,function(a){r=a.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function hk(s){return!!(s&&s.__CANCEL__)}function eu(s,e,t){ie.call(this,s??"canceled",ie.ERR_CANCELED,e,t),this.name="CanceledError"}R.inherits(eu,ie,{__CANCEL__:!0});function dk(s,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?s(t):e(new ie("Request failed with status code "+t.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function zM(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function UM(s,e){s=s||10;const t=new Array(s),n=new Array(s);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),h=n[r];o||(o=u),t[i]=l,n[i]=u;let d=r,f=0;for(;d!==i;)f+=t[d++],d=d%s;if(i=(i+1)%s,i===r&&(r=(r+1)%s),u-o<e)return;const p=h&&u-h;return p?Math.round(f*1e3/p):void 0}}function BM(s,e){let t=0,n=1e3/e,i,r;const o=(u,h=Date.now())=>{t=h,i=null,r&&(clearTimeout(r),r=null),s.apply(null,u)};return[(...u)=>{const h=Date.now(),d=h-t;d>=n?o(u,h):(i=u,r||(r=setTimeout(()=>{r=null,o(i)},n-d)))},()=>i&&o(i)]}const rg=(s,e,t=3)=>{let n=0;const i=UM(50,250);return BM(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,u=i(l),h=o<=a;n=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-o)/u:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};s(d)},t)},G_=(s,e)=>{const t=s!=null;return[n=>e[0]({lengthComputable:t,total:s,loaded:n}),e[1]]},W_=s=>(...e)=>R.asap(()=>s(...e)),HM=Bt.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,Bt.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(Bt.origin),Bt.navigator&&/(msie|trident)/i.test(Bt.navigator.userAgent)):()=>!0,VM=Bt.hasStandardBrowserEnv?{write(s,e,t,n,i,r){const o=[s+"="+encodeURIComponent(e)];R.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),R.isString(n)&&o.push("path="+n),R.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const e=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function GM(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function WM(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function fk(s,e,t){let n=!GM(e);return s&&n||t==!1?WM(s,e):e}const q_=s=>s instanceof vs?{...s}:s;function Ha(s,e){e=e||{};const t={};function n(u,h,d,f){return R.isPlainObject(u)&&R.isPlainObject(h)?R.merge.call({caseless:f},u,h):R.isPlainObject(h)?R.merge({},h):R.isArray(h)?h.slice():h}function i(u,h,d,f){if(R.isUndefined(h)){if(!R.isUndefined(u))return n(void 0,u,d,f)}else return n(u,h,d,f)}function r(u,h){if(!R.isUndefined(h))return n(void 0,h)}function o(u,h){if(R.isUndefined(h)){if(!R.isUndefined(u))return n(void 0,u)}else return n(void 0,h)}function a(u,h,d){if(d in e)return n(u,h);if(d in s)return n(void 0,u)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h,d)=>i(q_(u),q_(h),d,!0)};return R.forEach(Object.keys(Object.assign({},s,e)),function(h){const d=l[h]||i,f=d(s[h],e[h],h);R.isUndefined(f)&&d!==a||(t[h]=f)}),t}const pk=s=>{const e=Ha({},s);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=vs.from(o),e.url=lk(fk(e.baseURL,e.url),s.params,s.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(R.isFormData(t)){if(Bt.hasStandardBrowserEnv||Bt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...h]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Bt.hasStandardBrowserEnv&&(n&&R.isFunction(n)&&(n=n(e)),n||n!==!1&&HM(e.url))){const u=i&&r&&VM.read(r);u&&o.set(i,u)}return e},qM=typeof XMLHttpRequest<"u",XM=qM&&function(s){return new Promise(function(t,n){const i=pk(s);let r=i.data;const o=vs.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,h,d,f,p,g;function y(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function v(){if(!_)return;const A=vs.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:A,config:s,request:_};dk(function(T){t(T),y()},function(T){n(T),y()},k),_=null}"onloadend"in _?_.onloadend=v:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(v)},_.onabort=function(){_&&(n(new ie("Request aborted",ie.ECONNABORTED,s,_)),_=null)},_.onerror=function(){n(new ie("Network Error",ie.ERR_NETWORK,s,_)),_=null},_.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||ck;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),n(new ie(E,k.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,s,_)),_=null},r===void 0&&o.setContentType(null),"setRequestHeader"in _&&R.forEach(o.toJSON(),function(E,k){_.setRequestHeader(k,E)}),R.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),a&&a!=="json"&&(_.responseType=i.responseType),u&&([f,g]=rg(u,!0),_.addEventListener("progress",f)),l&&_.upload&&([d,p]=rg(l),_.upload.addEventListener("progress",d),_.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(h=A=>{_&&(n(!A||A.type?new eu(null,s,_):A),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const b=zM(i.url);if(b&&Bt.protocols.indexOf(b)===-1){n(new ie("Unsupported protocol "+b+":",ie.ERR_BAD_REQUEST,s));return}_.send(r||null)})},KM=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let n=new AbortController,i;const r=function(u){if(!i){i=!0,a();const h=u instanceof Error?u:this.reason;n.abort(h instanceof ie?h:new eu(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,r(new ie(`timeout ${e} of ms exceeded`,ie.ETIMEDOUT))},e);const a=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),s=null)};s.forEach(u=>u.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>R.asap(a),l}},YM=function*(s,e){let t=s.byteLength;if(t<e){yield s;return}let n=0,i;for(;n<t;)i=n+e,yield s.slice(n,i),n=i},JM=async function*(s,e){for await(const t of QM(s))yield*YM(t,e)},QM=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},X_=(s,e,t,n)=>{const i=JM(s,e);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await i.next();if(u){a(),l.close();return}let d=h.byteLength;if(t){let f=r+=d;t(f)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},cm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gk=cm&&typeof ReadableStream=="function",ZM=cm&&(typeof TextEncoder=="function"?(s=>e=>s.encode(e))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),mk=(s,...e)=>{try{return!!s(...e)}catch{return!1}},eO=gk&&mk(()=>{let s=!1;const e=new Request(Bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!e}),K_=64*1024,Av=gk&&mk(()=>R.isReadableStream(new Response("").body)),og={stream:Av&&(s=>s.body)};cm&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!og[e]&&(og[e]=R.isFunction(s[e])?t=>t[e]():(t,n)=>{throw new ie(`Response type '${e}' is not supported`,ie.ERR_NOT_SUPPORT,n)})})})(new Response);const tO=async s=>{if(s==null)return 0;if(R.isBlob(s))return s.size;if(R.isSpecCompliantForm(s))return(await new Request(Bt.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(R.isArrayBufferView(s)||R.isArrayBuffer(s))return s.byteLength;if(R.isURLSearchParams(s)&&(s=s+""),R.isString(s))return(await ZM(s)).byteLength},sO=async(s,e)=>{const t=R.toFiniteNumber(s.getContentLength());return t??tO(e)},nO=cm&&(async s=>{let{url:e,method:t,data:n,signal:i,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:f}=pk(s);u=u?(u+"").toLowerCase():"text";let p=KM([i,r&&r.toAbortSignal()],o),g;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let _;try{if(l&&eO&&t!=="get"&&t!=="head"&&(_=await sO(h,n))!==0){let k=new Request(e,{method:"POST",body:n,duplex:"half"}),C;if(R.isFormData(n)&&(C=k.headers.get("content-type"))&&h.setContentType(C),k.body){const[T,P]=G_(_,rg(W_(l)));n=X_(k.body,K_,T,P)}}R.isString(d)||(d=d?"include":"omit");const v="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:v?d:void 0});let b=await fetch(g);const A=Av&&(u==="stream"||u==="response");if(Av&&(a||A&&y)){const k={};["status","statusText","headers"].forEach(M=>{k[M]=b[M]});const C=R.toFiniteNumber(b.headers.get("content-length")),[T,P]=a&&G_(C,rg(W_(a),!0))||[];b=new Response(X_(b.body,K_,T,()=>{P&&P(),y&&y()}),k)}u=u||"text";let E=await og[R.findKey(og,u)||"text"](b,s);return!A&&y&&y(),await new Promise((k,C)=>{dk(k,C,{data:E,headers:vs.from(b.headers),status:b.status,statusText:b.statusText,config:s,request:g})})}catch(v){throw y&&y(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,s,g),{cause:v.cause||v}):ie.from(v,v&&v.code,s,g)}}),Ev={http:vM,xhr:XM,fetch:nO};R.forEach(Ev,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const Y_=s=>`- ${s}`,iO=s=>R.isFunction(s)||s===null||s===!1,yk={getAdapter:s=>{s=R.isArray(s)?s:[s];const{length:e}=s;let t,n;const i={};for(let r=0;r<e;r++){t=s[r];let o;if(n=t,!iO(t)&&(n=Ev[(o=String(t)).toLowerCase()],n===void 0))throw new ie(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+r]=n}if(!n){const r=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(Y_).join(`
`):" "+Y_(r[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Ev};function e0(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new eu(null,s)}function J_(s){return e0(s),s.headers=vs.from(s.headers),s.data=Zm.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),yk.getAdapter(s.adapter||sf.adapter)(s).then(function(n){return e0(s),n.data=Zm.call(s,s.transformResponse,n),n.headers=vs.from(n.headers),n},function(n){return hk(n)||(e0(s),n&&n.response&&(n.response.data=Zm.call(s,s.transformResponse,n.response),n.response.headers=vs.from(n.response.headers))),Promise.reject(n)})}const vk="1.8.2",um={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{um[s]=function(n){return typeof n===s||"a"+(e<1?"n ":" ")+s}});const Q_={};um.transitional=function(e,t,n){function i(r,o){return"[Axios v"+vk+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(e===!1)throw new ie(i(o," has been removed"+(t?" in "+t:"")),ie.ERR_DEPRECATED);return t&&!Q_[o]&&(Q_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};um.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function rO(s,e,t){if(typeof s!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let i=n.length;for(;i-- >0;){const r=n[i],o=e[r];if(o){const a=s[r],l=a===void 0||o(a,r,s);if(l!==!0)throw new ie("option "+r+" must be "+l,ie.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ie("Unknown option "+r,ie.ERR_BAD_OPTION)}}const Sp={assertOptions:rO,validators:um},Dn=Sp.validators;class Ma{constructor(e){this.defaults=e,this.interceptors={request:new H_,response:new H_}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ha(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;n!==void 0&&Sp.assertOptions(n,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),i!=null&&(R.isFunction(i)?t.paramsSerializer={serialize:i}:Sp.assertOptions(i,{encode:Dn.function,serialize:Dn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Sp.assertOptions(t,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&R.merge(r.common,r[t.method]);r&&R.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),t.headers=vs.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let h,d=0,f;if(!l){const g=[J_.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,u),f=g.length,h=Promise.resolve(t);d<f;)h=h.then(g[d++],g[d++]);return h}f=a.length;let p=t;for(d=0;d<f;){const g=a[d++],y=a[d++];try{p=g(p)}catch(_){y.call(this,_);break}}try{h=J_.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,f=u.length;d<f;)h=h.then(u[d++],u[d++]);return h}getUri(e){e=Ha(this.defaults,e);const t=fk(e.baseURL,e.url,e.allowAbsoluteUrls);return lk(t,e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(e){Ma.prototype[e]=function(t,n){return this.request(Ha(n||{},{method:e,url:t,data:(n||{}).data}))}});R.forEach(["post","put","patch"],function(e){function t(n){return function(r,o,a){return this.request(Ha(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Ma.prototype[e]=t(),Ma.prototype[e+"Form"]=t(!0)});class $w{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,a){n.reason||(n.reason=new eu(r,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new $w(function(i){e=i}),cancel:e}}}function oO(s){return function(t){return s.apply(null,t)}}function aO(s){return R.isObject(s)&&s.isAxiosError===!0}const kv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kv).forEach(([s,e])=>{kv[e]=s});function wk(s){const e=new Ma(s),t=JE(Ma.prototype.request,e);return R.extend(t,Ma.prototype,e,{allOwnKeys:!0}),R.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return wk(Ha(s,i))},t}const nt=wk(sf);nt.Axios=Ma;nt.CanceledError=eu;nt.CancelToken=$w;nt.isCancel=hk;nt.VERSION=vk;nt.toFormData=lm;nt.AxiosError=ie;nt.Cancel=nt.CanceledError;nt.all=function(e){return Promise.all(e)};nt.spread=oO;nt.isAxiosError=aO;nt.mergeConfig=Ha;nt.AxiosHeaders=vs;nt.formToJSON=s=>uk(R.isHTMLForm(s)?new FormData(s):s);nt.getAdapter=yk.getAdapter;nt.HttpStatusCode=kv;nt.default=nt;const lO="https://api.jikan.moe/v4";async function cO(s){var e,t;try{const n=await nt.get(`${lO}/manga`,{params:{q:s,limit:1}});if(n.data.data.length===0)return null;const i=n.data.data[0];return{title:i.title,description:i.synopsis,genres:i.genres.map(r=>r.name),status:i.status.toLowerCase()==="publishing"?"ongoing":"completed",rating:i.score||0,cover:i.images.jpg.large_image_url,author:((t=(e=i.authors)==null?void 0:e[0])==null?void 0:t.name)||"Unknown"}}catch(n){return console.error("Error fetching manga data:",n),null}}function uO({mangaId:s,onClose:e}){const[t,n]=L.useState([]),[i,r]=L.useState(!0),[o,a]=L.useState({number:1,title:"",pages:[]});L.useEffect(()=>{l()},[s]);const l=async()=>{try{const{data:f,error:p}=await Q.from("chapters").select("*").eq("manga_id",s).order("number");if(p)throw p;n(f||[])}catch(f){console.error("Error loading chapters:",f),J.error("Failed to load chapters")}finally{r(!1)}},u=f=>{f.target.files&&a(p=>({...p,pages:[...Array.from(f.target.files||[])]}))},h=async f=>{f.preventDefault(),r(!0);try{const p=await Promise.all(o.pages.map(async y=>{const _=y.name.split(".").pop(),v=`${s}/${o.number}/${Math.random()}.${_}`,{error:b}=await Q.storage.from("pages").upload(v,y,{upsert:!0,cacheControl:"3600"});if(b)throw b;return v})),{error:g}=await Q.from("chapters").insert({manga_id:s,number:o.number,title:o.title,pages:p});if(g)throw g;J.success("Chapter added successfully"),a({number:Math.max(...t.map(y=>y.number),0)+1,title:"",pages:[]}),l()}catch(p){console.error("Error adding chapter:",p),J.error("Failed to add chapter")}finally{r(!1)}},d=async f=>{if(confirm("Are you sure you want to delete this chapter?"))try{const{error:p}=await Q.from("chapters").delete().eq("id",f);if(p)throw p;J.success("Chapter deleted successfully"),l()}catch(p){console.error("Error deleting chapter:",p),J.error("Failed to delete chapter")}};return m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:m.jsx(Bg,{size:20})}),m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Manage Chapters"}),m.jsxs("form",{onSubmit:h,className:"mb-8 space-y-4",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"w-24",children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Number"}),m.jsx("input",{type:"number",value:o.number,onChange:f=>a(p=>({...p,number:parseInt(f.target.value)})),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),m.jsx("input",{type:"text",value:o.title,onChange:f=>a(p=>({...p,title:f.target.value})),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pages"}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:u,className:"hidden",id:"page-upload"}),m.jsxs("label",{htmlFor:"page-upload",className:"flex items-center gap-2 px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors cursor-pointer",children:[m.jsx(ES,{size:20}),m.jsx("span",{children:"Upload Pages"})]}),o.pages.length>0&&m.jsxs("span",{className:"text-sm text-gray-400",children:[o.pages.length," pages selected"]})]})]}),m.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[m.jsx(_S,{size:20}),m.jsx("span",{children:"Add Chapter"})]})]}),m.jsx("div",{className:"space-y-4",children:t.map(f=>m.jsxs("div",{className:"flex items-center justify-between bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"font-medium",children:["Chapter ",f.number]}),m.jsx("p",{className:"text-sm text-gray-400",children:f.title}),m.jsxs("p",{className:"text-xs text-gray-500",children:[f.pages.length," pages"]})]}),m.jsx("button",{onClick:()=>d(f.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",children:m.jsx(AS,{size:20})})]},f.id))})]})})}const t0={title:"",description:"",author:"",status:"ongoing",cover:null,genres:[],rating:0};function hO(){const[s,e]=L.useState([]),[t,n]=L.useState([]),[i,r]=L.useState(t0),[o,a]=L.useState(null),[l,u]=L.useState(!1),[h,d]=L.useState(!1),[f,p]=L.useState(null),[g,y]=L.useState(!1),[_,v]=L.useState([]),[b,A]=L.useState(!1);L.useEffect(()=>{E(),k(),g&&C()},[g]);const E=async()=>{try{const{data:N,error:$}=await Q.from("mangas").select(`
          *,
          manga_genres (
            genres (name)
          ),
          chapters (id)
        `).order("created_at",{ascending:!1});if($)throw $;e(N||[])}catch(N){console.error("Error loading mangas:",N),J.error("Failed to load mangas")}},k=async()=>{try{const{data:N,error:$}=await Q.from("genres").select("name").order("name");if($)throw $;n(N.map(Z=>Z.name))}catch(N){console.error("Error loading genres:",N),J.error("Failed to load genres")}},C=async()=>{try{A(!0);const{data:N,error:$}=await Q.from("manga_reports").select(`
          *,
          mangas (title),
          profiles (username, email)
        `).order("created_at",{ascending:!1});if($)throw $;v(N||[])}catch(N){console.error("Error loading reports:",N),J.error("Failed to load reports")}finally{A(!1)}},T=async()=>{if(!i.title){J.error("Please enter a title to search");return}d(!0);try{const N=await cO(i.title);N?(r($=>({...$,description:N.description||$.description,author:N.author||$.author,status:N.status,genres:N.genres||$.genres,rating:N.rating||0})),J.success("Manga information fetched successfully")):J.error("No manga information found")}catch(N){console.error("Error fetching manga info:",N),J.error("Failed to fetch manga information")}finally{d(!1)}},P=async N=>{N.preventDefault(),u(!0);try{let $=null;if(i.cover){const D=i.cover.name.split(".").pop(),G=`${Math.random()}.${D}`,{error:O}=await Q.storage.from("covers").upload(G,i.cover,{upsert:!0,cacheControl:"3600"});if(O)throw O;$=G}const Z={title:i.title,description:i.description,author:i.author,status:i.status,rating:i.rating,...$&&{cover_url:$}};let we;if(o){const{error:D}=await Q.from("mangas").update(Z).eq("id",o);if(D)throw D;we=o}else{const{data:D,error:G}=await Q.from("mangas").insert(Z).select().single();if(G)throw G;we=D.id}if(we){await Q.from("manga_genres").delete().eq("manga_id",we);const D=i.genres.map(async G=>{const{data:O}=await Q.from("genres").select("id").eq("name",G).single();let X;if(O)X=O.id;else{const{data:Y}=await Q.from("genres").insert({name:G}).select().single();X=Y.id}return Q.from("manga_genres").insert({manga_id:we,genre_id:X})});await Promise.all(D)}J.success(o?"Manga updated successfully":"Manga created successfully"),r(t0),a(null),E()}catch($){console.error("Error saving manga:",$),J.error("Failed to save manga")}finally{u(!1)}},M=async N=>{if(confirm("Are you sure you want to delete this manga?"))try{const{error:$}=await Q.from("mangas").delete().eq("id",N);if($)throw $;J.success("Manga deleted successfully"),E()}catch($){console.error("Error deleting manga:",$),J.error("Failed to delete manga")}},j=N=>{r({title:N.title,description:N.description,author:N.author,status:N.status,cover:null,genres:N.manga_genres.map($=>$.genres.name),rating:N.rating||0}),a(N.id)},V=async(N,$)=>{try{const{error:Z}=await Q.from("manga_reports").update({status:$,resolved_at:$==="resolved"?new Date().toISOString():null}).eq("id",N);if(Z)throw Z;C(),J.success("Report status updated")}catch(Z){console.error("Error updating report:",Z),J.error("Failed to update report")}};return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Admin Panel"}),m.jsx("div",{className:"flex gap-4",children:m.jsxs("button",{onClick:()=>y(!g),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${g?"bg-yellow-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[m.jsx(vS,{size:20}),m.jsx("span",{children:"Reports"})]})})]}),g?m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Manga Reports"}),b?m.jsx("div",{className:"flex items-center justify-center py-8",children:m.jsx(Y0,{className:"animate-spin",size:32})}):_.length===0?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"No reports found"}):m.jsx("div",{className:"space-y-4",children:_.map(N=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:N.mangas.title}),m.jsxs("p",{className:"text-sm text-gray-400",children:["Chapter ",N.chapter," • Reported by ",N.profiles.username||N.profiles.email]}),m.jsx("p",{className:"text-sm text-gray-400",children:new Date(N.created_at).toLocaleDateString()})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${N.status==="pending"?"bg-yellow-500/20 text-yellow-500":N.status==="in_progress"?"bg-blue-500/20 text-blue-500":N.status==="resolved"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:N.status.replace("_"," ")})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-sm font-medium mb-1",children:"Issue Type"}),m.jsx("p",{className:"text-gray-300",children:N.issue_type.replace("_"," ")})]}),N.description&&m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-sm font-medium mb-1",children:"Description"}),m.jsx("p",{className:"text-gray-300",children:N.description})]}),m.jsxs("div",{className:"flex gap-2",children:[N.status==="pending"&&m.jsx("button",{onClick:()=>V(N.id,"in_progress"),className:"px-3 py-1 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Start Working"}),N.status==="in_progress"&&m.jsx("button",{onClick:()=>V(N.id,"resolved"),className:"px-3 py-1 bg-green-500 rounded-lg hover:bg-green-600 transition-colors text-sm",children:"Mark as Resolved"}),N.status==="pending"&&m.jsx("button",{onClick:()=>V(N.id,"rejected"),className:"px-3 py-1 bg-red-500 rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Reject"})]})]},N.id))})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:o?"Edit Manga":"Add New Manga"}),m.jsxs("form",{onSubmit:P,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:i.title,onChange:N=>r({...i,title:N.target.value}),className:"flex-1 px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),m.jsxs("button",{type:"button",onClick:T,disabled:h,className:"px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[h?m.jsx(Y0,{className:"animate-spin",size:20}):m.jsx(SS,{size:20}),m.jsx("span",{children:"Fetch Info"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),m.jsx("textarea",{value:i.description,onChange:N=>r({...i,description:N.target.value}),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Author"}),m.jsx("input",{type:"text",value:i.author,onChange:N=>r({...i,author:N.target.value}),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),m.jsx("input",{type:"number",min:"0",max:"10",step:"0.1",value:i.rating,onChange:N=>r({...i,rating:parseFloat(N.target.value)}),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),m.jsxs("select",{value:i.status,onChange:N=>r({...i,status:N.target.value}),className:"w-full px-4 py-2 rounded-lg bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"ongoing",children:"Ongoing"}),m.jsx("option",{value:"completed",children:"Completed"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cover Image"}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("input",{type:"file",onChange:N=>{var $;return r({...i,cover:(($=N.target.files)==null?void 0:$[0])||null})},accept:"image/*",className:"hidden",id:"cover-upload"}),m.jsxs("label",{htmlFor:"cover-upload",className:"flex items-center gap-2 px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors cursor-pointer",children:[m.jsx(ES,{size:20}),m.jsx("span",{children:"Choose File"})]}),i.cover&&m.jsx("span",{className:"text-sm text-gray-400",children:i.cover.name})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Genres"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(N=>m.jsx("button",{type:"button",onClick:()=>r($=>({...$,genres:$.genres.includes(N)?$.genres.filter(Z=>Z!==N):[...$.genres,N]})),className:`px-3 py-1 rounded-full text-sm transition-colors ${i.genres.includes(N)?"bg-blue-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:N},N))})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[m.jsx(xS,{size:20}),m.jsxs("span",{children:[o?"Update":"Create"," Manga"]})]}),o&&m.jsxs("button",{type:"button",onClick:()=>{r(t0),a(null)},className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors flex items-center gap-2",children:[m.jsx(Bg,{size:20}),m.jsx("span",{children:"Cancel"})]})]})]})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Manage Manga"}),m.jsx("div",{className:"space-y-4",children:s.map(N=>{var $,Z;return m.jsxs("div",{className:"flex items-center justify-between bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[N.cover_url?m.jsx("img",{src:`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/covers/${N.cover_url}`,alt:N.title,className:"w-16 h-16 rounded-lg object-cover"}):m.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-600 flex items-center justify-center",children:m.jsx(d2,{size:24,className:"text-gray-400"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:N.title}),m.jsx("p",{className:"text-sm text-gray-400",children:N.author}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("span",{className:"text-yellow-500",children:"★"}),m.jsx("span",{className:"text-sm",children:(($=N.rating)==null?void 0:$.toFixed(1))||"N/A"}),m.jsx("span",{className:"text-gray-500",children:"•"}),m.jsxs("span",{className:"text-sm",children:[((Z=N.chapters)==null?void 0:Z.length)||0," chapters"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>p(N.id),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Manage Chapters",children:m.jsx(bS,{size:20})}),m.jsx("button",{onClick:()=>j(N),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit Manga",children:m.jsx(x2,{size:20})}),m.jsx("button",{onClick:()=>M(N.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete Manga",children:m.jsx(AS,{size:20})})]})]},N.id)})})]})]}),f&&m.jsx(uO,{mangaId:f,onClose:()=>p(null)})]})}const dO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlzb2ptc2toemxiYmd1em92dnllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE0NjMwNzIsImV4cCI6MjA1NzAzOTA3Mn0.C7-eVxeVnQUAYU-aAp5jSQD9dkvOdQZWrSFuSF_f-Sc",VITE_SUPABASE_URL:"https://ysojmskhzlbbguzovvye.supabase.co"},Z_=s=>{let e;const t=new Set,n=(h,d)=>{const f=typeof h=="function"?h(e):h;if(!Object.is(f,e)){const p=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(g=>g(e,p))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(dO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=s(n,i,l);return l},fO=s=>s?Z_(s):Z_;var bk={exports:{}},_k={},xk={exports:{}},Sk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=L;function pO(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var gO=typeof Object.is=="function"?Object.is:pO,mO=qc.useState,yO=qc.useEffect,vO=qc.useLayoutEffect,wO=qc.useDebugValue;function bO(s,e){var t=e(),n=mO({inst:{value:t,getSnapshot:e}}),i=n[0].inst,r=n[1];return vO(function(){i.value=t,i.getSnapshot=e,s0(i)&&r({inst:i})},[s,t,e]),yO(function(){return s0(i)&&r({inst:i}),s(function(){s0(i)&&r({inst:i})})},[s]),wO(t),t}function s0(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!gO(s,t)}catch{return!0}}function _O(s,e){return e()}var xO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_O:bO;Sk.useSyncExternalStore=qc.useSyncExternalStore!==void 0?qc.useSyncExternalStore:xO;xk.exports=Sk;var SO=xk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm=L,AO=SO;function EO(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var kO=typeof Object.is=="function"?Object.is:EO,CO=AO.useSyncExternalStore,TO=hm.useRef,PO=hm.useEffect,RO=hm.useMemo,NO=hm.useDebugValue;_k.useSyncExternalStoreWithSelector=function(s,e,t,n,i){var r=TO(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=RO(function(){function l(p){if(!u){if(u=!0,h=p,p=n(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return d=g}return d=p}if(g=d,kO(h,p))return g;var y=n(p);return i!==void 0&&i(g,y)?(h=p,g):(h=p,d=y)}var u=!1,h,d,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,n,i]);var a=CO(s,r[0],r[1]);return PO(function(){o.hasValue=!0,o.value=a},[a]),NO(a),a};bk.exports=_k;var LO=bk.exports;const IO=i1(LO),Ak={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlzb2ptc2toemxiYmd1em92dnllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE0NjMwNzIsImV4cCI6MjA1NzAzOTA3Mn0.C7-eVxeVnQUAYU-aAp5jSQD9dkvOdQZWrSFuSF_f-Sc",VITE_SUPABASE_URL:"https://ysojmskhzlbbguzovvye.supabase.co"},{useDebugValue:MO}=Wk,{useSyncExternalStoreWithSelector:OO}=IO;let e1=!1;const jO=s=>s;function DO(s,e=jO,t){(Ak?"production":void 0)!=="production"&&t&&!e1&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),e1=!0);const n=OO(s.subscribe,s.getState,s.getServerState||s.getInitialState,e,t);return MO(n),n}const t1=s=>{(Ak?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof s=="function"?fO(s):s,t=(n,i)=>DO(e,n,i);return Object.assign(t,e),t},FO=s=>s?t1(s):t1,s1=FO((s,e)=>({user:null,loading:!0,setUser:t=>s({user:t}),setLoading:t=>s({loading:t}),fetchUserProfile:async t=>{var n;try{const{data:i,error:r}=await Q.auth.getUser();if(r)throw r;if(!i.user)throw new Error("No authenticated user");const{data:o,error:a}=await Q.from("profiles").select("username, avatar_url, is_admin").eq("user_id",t).maybeSingle();if(a)throw a;if(o)s({user:{id:t,email:i.user.email,isAdmin:o.is_admin||!1,username:o.username,avatar_url:o.avatar_url}});else{const{error:l}=await Q.from("profiles").insert({user_id:t,username:(n=i.user.email)==null?void 0:n.split("@")[0],is_admin:!1});if(l)throw l;const{data:u,error:h}=await Q.from("profiles").select("username, avatar_url, is_admin").eq("user_id",t).single();if(h)throw h;s({user:{id:t,email:i.user.email,isAdmin:u.is_admin||!1,username:u.username,avatar_url:u.avatar_url}})}}catch(i){console.error("Error fetching user profile:",i),s({user:null}),i!=null&&i.__isAuthError&&await Q.auth.signOut()}finally{s({loading:!1})}},logout:async()=>{await Q.auth.signOut(),s({user:null})}}));function $O(){const{user:s,loading:e,fetchUserProfile:t}=s1(),[n,i]=L.useState("home"),[r,o]=L.useState(null),[a,l]=L.useState(null),[u,h]=L.useState(!1),[d,f]=L.useState(!1),[p,g]=L.useState(!1),[y,_]=L.useState(()=>{const k=localStorage.getItem("darkMode");return k?JSON.parse(k):!0});L.useEffect(()=>{document.documentElement.classList.toggle("dark",y),localStorage.setItem("darkMode",JSON.stringify(y))},[y]),L.useEffect(()=>{Q.auth.getSession().then(({data:{session:C}})=>{C&&t(C.user.id)});const{data:{subscription:k}}=Q.auth.onAuthStateChange(async(C,T)=>{T&&t(T.user.id)});return()=>k.unsubscribe()},[]);const v=async()=>{await Q.auth.signOut(),g(!1),i("home")},b=()=>{_(!y)},A=k=>{o(k),i("manga-details")},E=(k,C)=>{l(C),i("reader")};return e?m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):m.jsxs("div",{className:`min-h-screen ${y?"dark bg-gray-900 text-white":"bg-gray-100 text-gray-900"}`,children:[m.jsx(gP,{position:"top-right"}),m.jsx("header",{className:`fixed top-0 w-full ${y?"bg-gray-800":"bg-white"} shadow-lg z-50`,children:m.jsx("div",{className:"container mx-auto px-4 py-3",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsx("h1",{className:"text-xl font-bold",children:"Manga Reader"}),m.jsxs("nav",{className:"hidden md:flex items-center gap-4",children:[m.jsxs("button",{onClick:()=>i("home"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${n==="home"?y?"bg-gray-700":"bg-gray-200":y?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:[m.jsx(h2,{size:20}),m.jsx("span",{children:"Home"})]}),m.jsxs("button",{onClick:()=>i("directory"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${n==="directory"?y?"bg-gray-700":"bg-gray-200":y?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:[m.jsx(K0,{size:20}),m.jsx("span",{children:"Directory"})]}),s&&m.jsxs("button",{onClick:()=>i("library"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${n==="library"?y?"bg-gray-700":"bg-gray-200":y?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:[m.jsx(f2,{size:20}),m.jsx("span",{children:"My Library"})]}),(s==null?void 0:s.isAdmin)&&m.jsxs("button",{onClick:()=>i("admin"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${n==="admin"?y?"bg-gray-700":"bg-gray-200":y?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:[m.jsx(_2,{size:20}),m.jsx("span",{children:"Admin"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",placeholder:"Search manga...",className:`w-64 px-4 py-2 rounded-lg ${y?"bg-gray-700 focus:ring-blue-500":"bg-gray-200 focus:ring-blue-400"} focus:outline-none focus:ring-2`}),m.jsx(SS,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),s?m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>g(!p),className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-colors hover:bg-gray-700",children:[s.avatar_url?m.jsx("img",{src:`https://ysojmskhzlbbguzovvye.supabase.co/storage/v1/object/public/avatars/${s.avatar_url}`,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover"}):m.jsx(E2,{size:20}),m.jsx("span",{className:"text-sm",children:s.username||s.email})]}),p&&m.jsx("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${y?"bg-gray-800":"bg-white"} ring-1 ring-black ring-opacity-5`,children:m.jsxs("div",{className:"py-1",children:[m.jsx("button",{onClick:()=>{f(!0),g(!1)},className:`block w-full text-left px-4 py-2 text-sm ${y?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:"Profile Settings"}),m.jsx("button",{onClick:b,className:`flex items-center w-full px-4 py-2 text-sm ${y?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:y?m.jsxs(m.Fragment,{children:[m.jsx(S2,{size:16,className:"mr-2"}),"Light Mode"]}):m.jsxs(m.Fragment,{children:[m.jsx(v2,{size:16,className:"mr-2"}),"Dark Mode"]})}),m.jsx("button",{onClick:v,className:`block w-full text-left px-4 py-2 text-sm text-red-600 ${y?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:"Logout"})]})})]}):m.jsxs("button",{onClick:()=>h(!0),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${y?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:[m.jsx(g2,{size:20}),m.jsx("span",{children:"Login"})]})]})]})})}),m.jsxs("main",{className:"pt-16 min-h-screen",children:[n==="home"&&m.jsx(PI,{onMangaSelect:A}),n==="directory"&&m.jsx(TI,{onMangaSelect:A}),n==="manga-details"&&r&&m.jsx(II,{manga:r,user:s,onBack:()=>i("directory"),onReadChapter:E}),n==="reader"&&r&&a&&m.jsx(CI,{manga:r,user:s,chapterNumber:a,onBack:()=>i("manga-details")}),n==="library"&&s&&m.jsx(NI,{userId:s.id,onMangaSelect:A}),n==="admin"&&(s==null?void 0:s.isAdmin)&&m.jsx(hO,{})]}),u&&m.jsx(RI,{onClose:()=>h(!1)}),d&&s&&m.jsx(LI,{user:s,onClose:()=>f(!1),onUpdate:s1.getState().setUser})]})}yS(document.getElementById("root")).render(m.jsx(L.StrictMode,{children:m.jsx($O,{})}));export{i1 as g};
